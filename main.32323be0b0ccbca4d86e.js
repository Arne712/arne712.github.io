(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r.e)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.e)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.4.2","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("EY2u"),i=n("LRne"),o=n("z6cu");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return So})),n.d(e,"b",(function(){return eu})),n.d(e,"c",(function(){return Xa})),n.d(e,"d",(function(){return $a})),n.d(e,"e",(function(){return Wa})),n.d(e,"f",(function(){return Qu})),n.d(e,"g",(function(){return Du})),n.d(e,"h",(function(){return io})),n.d(e,"i",(function(){return fu})),n.d(e,"j",(function(){return Bs})),n.d(e,"k",(function(){return iu})),n.d(e,"l",(function(){return zs})),n.d(e,"m",(function(){return jn})),n.d(e,"n",(function(){return xa})),n.d(e,"o",(function(){return W})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return $})),n.d(e,"r",(function(){return Eo})),n.d(e,"s",(function(){return ua})),n.d(e,"t",(function(){return ca})),n.d(e,"u",(function(){return ru})),n.d(e,"v",(function(){return ht})),n.d(e,"w",(function(){return Fu})),n.d(e,"x",(function(){return lt})),n.d(e,"y",(function(){return Au})),n.d(e,"z",(function(){return mu})),n.d(e,"A",(function(){return p})),n.d(e,"B",(function(){return tu})),n.d(e,"C",(function(){return Za})),n.d(e,"D",(function(){return Aa})),n.d(e,"E",(function(){return Gs})),n.d(e,"F",(function(){return Qs})),n.d(e,"G",(function(){return Ks})),n.d(e,"H",(function(){return Ws})),n.d(e,"I",(function(){return br})),n.d(e,"J",(function(){return g})),n.d(e,"K",(function(){return qu})),n.d(e,"L",(function(){return da})),n.d(e,"M",(function(){return Su})),n.d(e,"N",(function(){return so})),n.d(e,"O",(function(){return Ys})),n.d(e,"P",(function(){return Xs})),n.d(e,"Q",(function(){return ma})),n.d(e,"R",(function(){return _t})),n.d(e,"S",(function(){return ju})),n.d(e,"T",(function(){return Wn})),n.d(e,"U",(function(){return st})),n.d(e,"V",(function(){return $n})),n.d(e,"W",(function(){return zu})),n.d(e,"X",(function(){return Iu})),n.d(e,"Y",(function(){return nu})),n.d(e,"Z",(function(){return ao})),n.d(e,"ab",(function(){return xs})),n.d(e,"bb",(function(){return yr})),n.d(e,"cb",(function(){return tr})),n.d(e,"db",(function(){return Un})),n.d(e,"eb",(function(){return Vn})),n.d(e,"fb",(function(){return Qn})),n.d(e,"gb",(function(){return zn})),n.d(e,"hb",(function(){return Bn})),n.d(e,"ib",(function(){return Hn})),n.d(e,"jb",(function(){return Ts})),n.d(e,"kb",(function(){return Bu})),n.d(e,"lb",(function(){return Os})),n.d(e,"mb",(function(){return Is})),n.d(e,"nb",(function(){return qn})),n.d(e,"ob",(function(){return q})),n.d(e,"pb",(function(){return Po})),n.d(e,"qb",(function(){return Xo})),n.d(e,"rb",(function(){return Wo})),n.d(e,"sb",(function(){return Ss})),n.d(e,"tb",(function(){return ie})),n.d(e,"ub",(function(){return A})),n.d(e,"vb",(function(){return Mn})),n.d(e,"wb",(function(){return Io})),n.d(e,"xb",(function(){return Yt})),n.d(e,"yb",(function(){return Us})),n.d(e,"zb",(function(){return Ur})),n.d(e,"Ab",(function(){return Fo})),n.d(e,"Bb",(function(){return ls})),n.d(e,"Cb",(function(){return Va})),n.d(e,"Db",(function(){return Tt})),n.d(e,"Eb",(function(){return jt})),n.d(e,"Fb",(function(){return _})),n.d(e,"Gb",(function(){return w})),n.d(e,"Hb",(function(){return xt})),n.d(e,"Ib",(function(){return Nt})),n.d(e,"Jb",(function(){return Vo})),n.d(e,"Kb",(function(){return Go})),n.d(e,"Lb",(function(){return Ko})),n.d(e,"Mb",(function(){return Qo})),n.d(e,"Nb",(function(){return $o})),n.d(e,"Ob",(function(){return Cn})),n.d(e,"Pb",(function(){return bs})),n.d(e,"Qb",(function(){return ot})),n.d(e,"Rb",(function(){return Bo})),n.d(e,"Sb",(function(){return Ga})),n.d(e,"Tb",(function(){return Yo})),n.d(e,"Ub",(function(){return Ba})),n.d(e,"Vb",(function(){return Ke})),n.d(e,"Wb",(function(){return Qe})),n.d(e,"Xb",(function(){return ts})),n.d(e,"Yb",(function(){return Ia})),n.d(e,"Zb",(function(){return Ca})),n.d(e,"ac",(function(){return rs})),n.d(e,"bc",(function(){return ns})),n.d(e,"cc",(function(){return zo})),n.d(e,"dc",(function(){return is})),n.d(e,"ec",(function(){return Ua})),n.d(e,"fc",(function(){return qo})),n.d(e,"gc",(function(){return Se})),n.d(e,"hc",(function(){return _r})),n.d(e,"ic",(function(){return kt})),n.d(e,"jc",(function(){return cs})),n.d(e,"kc",(function(){return Uo})),n.d(e,"lc",(function(){return Ka})),n.d(e,"mc",(function(){return gs})),n.d(e,"nc",(function(){return ys})),n.d(e,"oc",(function(){return vs})),n.d(e,"pc",(function(){return qa}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("oB13"),u=n("x+ZX");function c(){return new r.a}function l(t){return{toString:t}.toString()}const h="__parameters__";function f(t,e,n){return l(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(h)?t[h]:Object.defineProperty(t,h,{value:[]})[h];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const d=f("Inject",t=>({token:t})),p=f("Optional"),m=f("Self"),g=f("SkipSelf");var y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function v(t){for(let e in t)if(t[e]===v)return e;throw Error("Could not find renamed property on target object.")}function b(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function E(t){return S(t,t[O])||S(t,t[x])}function S(t,e){return e&&e.token===t?e:null}function T(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(k))?t[I]:null}const O=v({"\u0275prov":v}),I=v({"\u0275inj":v}),C=v({"\u0275provFallback":v}),x=v({ngInjectableDef:v}),k=v({ngInjectorDef:v});function A(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(A).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function j(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const N=v({__forward_ref__:v});function R(t){return t.__forward_ref__=R,t.toString=function(){return A(this())},t}function P(t){return D(t)?t():t}function D(t){return"function"==typeof t&&t.hasOwnProperty(N)&&t.__forward_ref__===R}const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,M="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,q=L||U||F||M,V=v({"\u0275cmp":v}),B=v({"\u0275dir":v}),z=v({"\u0275pipe":v}),H=v({"\u0275mod":v}),Q=v({"\u0275loc":v}),K=v({"\u0275fac":v}),G=v({__NG_ELEMENT_ID__:v});class ${constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const W=new $("INJECTOR",-1),X={},Y=/\n/gm,J="__source",Z=v({provide:String,useValue:v});let tt,et=void 0;function nt(t){const e=et;return et=t,e}function rt(t){const e=tt;return tt=t,e}function it(t,e=y.Default){if(void 0===et)throw new Error("inject() must be called from an injection context");return null===et?at(t,void 0,e):et.get(t,e&y.Optional?null:void 0,e)}function ot(t,e=y.Default){return(tt||it)(P(t),e)}const st=ot;function at(t,e,n){const r=E(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&y.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${A(t)}]`)}function ut(t){const e=[];for(let n=0;n<t.length;n++){const r=P(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=y.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof p||"Optional"===i.ngMetadataName||i===p?n|=y.Optional:i instanceof g||"SkipSelf"===i.ngMetadataName||i===g?n|=y.SkipSelf:i instanceof m||"Self"===i.ngMetadataName||i===m?n|=y.Self:t=i instanceof d||i===d?i.token:i}e.push(ot(t,n))}else e.push(ot(r))}return e}class ct{get(t,e=X){if(e===X){const e=new Error(`NullInjectorError: No provider for ${A(t)}!`);throw e.name="NullInjectorError",e}return e}}class lt{}class ht{}function ft(t,e){t.forEach(t=>Array.isArray(t)?ft(t,e):e(t))}function dt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function mt(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function gt(t,e,n){let r=vt(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function yt(t,e){const n=vt(t,e);if(n>=0)return t[1|n]}function vt(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var bt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),_t=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const wt={},Et=[];let St=0;function Tt(t){return l(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===bt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Et,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||_t.Emulated,id:"c",styles:t.styles||Et,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=St++,n.inputs=At(t.inputs,e),n.outputs=At(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ot):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(It):null,n})}function Ot(t){return Rt(t)||function(t){return t[B]||null}(t)}function It(t){return function(t){return t[z]||null}(t)}const Ct={};function xt(t){const e={type:t.type,bootstrap:t.bootstrap||Et,declarations:t.declarations||Et,imports:t.imports||Et,exports:t.exports||Et,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&l(()=>{Ct[t.id]=t.type}),e}function kt(t,e){return l(()=>{const n=Dt(t,!0);n.declarations=e.declarations||Et,n.imports=e.imports||Et,n.exports=e.exports||Et})}function At(t,e){if(null==t)return wt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const jt=Tt;function Nt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Rt(t){return t[V]||null}function Pt(t,e){return t.hasOwnProperty(K)?t[K]:null}function Dt(t,e){const n=t[H]||null;if(!n&&!0===e)throw new Error(`Type ${A(t)} does not have '\u0275mod' property.`);return n}const Lt=20,Ft=10;function Mt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ut(t){return Array.isArray(t)&&!0===t[1]}function qt(t){return 0!=(8&t.flags)}function Vt(t){return 2==(2&t.flags)}function Bt(t){return 1==(1&t.flags)}function zt(t){return null!==t.template}function Ht(t){return 0!=(512&t[2])}function Qt(t){return"string"==typeof t?t:null==t?"":""+t}function Kt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Qt(t)}const Gt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function $t(t){return t instanceof Function?t():t}function Wt(t,e){const n=e?" in "+e:"";throw new Error(`No provider for ${Kt(t)} found${n}`)}class Xt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Yt(){return Jt}function Jt(t){return t.type.prototype.ngOnChanges&&(t.setInput=te),Zt}function Zt(){const t=ee(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===wt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function te(t,e,n,r){const i=ee(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:wt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Xt(u&&u.currentValue,e,s===wt),t[r]=e}function ee(t){return t.__ngSimpleChanges__||null}Yt.ngInherit=!0;const ne="http://www.w3.org/2000/svg";let re=void 0;function ie(t){re=t}function oe(t){return!!t.listen}const se={createRenderer:(t,e)=>void 0!==re?re:"undefined"!=typeof document?document:void 0};function ae(t){for(;Array.isArray(t);)t=t[0];return t}function ue(t,e){return ae(e[t+Lt])}function ce(t,e){return ae(e[t.index])}function le(t,e){return t.data[e+Lt]}function he(t,e){return t[e+Lt]}function fe(t,e){const n=e[t];return Mt(n)?n:n[0]}function de(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function pe(t){return 4==(4&t[2])}function me(t){return 128==(128&t[2])}function ge(t,e){return null===t||null==e?null:t[e]}function ye(t){t[18]=0}function ve(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const be={lFrame:Me(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _e(){return be.bindingsEnabled}function we(){return be.lFrame.lView}function Ee(){return be.lFrame.tView}function Se(t){be.lFrame.contextLView=t}function Te(){return be.lFrame.currentTNode}function Oe(t,e){be.lFrame.currentTNode=t,be.lFrame.isParent=e}function Ie(){return be.lFrame.isParent}function Ce(){be.lFrame.isParent=!1}function xe(){return be.isInCheckNoChangesMode}function ke(t){be.isInCheckNoChangesMode=t}function Ae(){return be.lFrame.bindingIndex++}function je(t,e){const n=be.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ne(e)}function Ne(t){be.lFrame.currentDirectiveIndex=t}function Re(){return be.lFrame.currentQueryIndex}function Pe(t){be.lFrame.currentQueryIndex=t}function De(t,e){const n=Fe();be.lFrame=n,n.currentTNode=e,n.lView=t}function Le(t){const e=Fe(),n=t[1];be.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function Fe(){const t=be.lFrame,e=null===t?null:t.child;return null===e?Me(t):e}function Me(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Ue(){const t=be.lFrame;return be.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const qe=Ue;function Ve(){const t=Ue();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Be(){return be.lFrame.selectedIndex}function ze(t){be.lFrame.selectedIndex=t}function He(){const t=be.lFrame;return le(t.tView,t.selectedIndex)}function Qe(){be.lFrame.currentNamespace=ne}function Ke(){be.lFrame.currentNamespace=null}function Ge(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function $e(t,e,n){Ye(t,e,3,n)}function We(t,e,n,r){(3&t[2])===n&&Ye(t,e,n,r)}function Xe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ye(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Je(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Je(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Ze=-1;class tn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function en(t,e,n){const r=oe(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];rn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function nn(t){return 3===t||4===t||6===t}function rn(t){return 64===t.charCodeAt(0)}function on(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||sn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function sn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function an(t){return t!==Ze}function un(t){return 32767&t}function cn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ln=!0;function hn(t){const e=ln;return ln=t,e}let fn=0;function dn(t,e){const n=mn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,pn(r.data,t),pn(e,null),pn(r.blueprint,null));const i=gn(t,e),o=t.injectorIndex;if(an(i)){const t=un(i),n=cn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function pn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function mn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function gn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ze;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ze}function yn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(G)&&(r=n[G]),null==r&&(r=n[G]=fn++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function vn(t,e,n,r=y.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(G)?t[G]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){De(e,t);try{const t=i();if(null!=t||r&y.Optional)return t;Wt(n)}finally{qe()}}else if("number"==typeof i){if(-1===i)return new On(t,e);let o=null,s=mn(t,e),a=Ze,u=r&y.Host?e[16][6]:null;for((-1===s||r&y.SkipSelf)&&(a=-1===s?gn(t,e):e[s+8],a!==Ze&&Tn(r,!1)?(o=e[1],s=un(a),e=cn(a,e)):s=-1);-1!==s;){const t=e[1];if(Sn(i,s,t.data)){const t=_n(s,e,n,o,r,u);if(t!==bn)return t}a=e[s+8],a!==Ze&&Tn(r,e[1].data[s+8]===u)&&Sn(i,s,e)?(o=t,s=un(a),e=cn(a,e)):s=-1}}}if(r&y.Optional&&void 0===i&&(i=null),0==(r&(y.Self|y.Host))){const t=e[9],o=rt(void 0);try{return t?t.get(n,i,r&y.Optional):at(n,i,r&y.Optional)}finally{rt(o)}}if(r&y.Optional)return i;Wt(n,"NodeInjector")}const bn={};function _n(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=wn(a,s,n,null==r?Vt(a)&&ln:r!=s&&2===a.type,i&y.Host&&o===a);return null!==u?En(e,s,u,a):bn}function wn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&zt(t)&&t.type===n)return u}return null}function En(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof tn){const s=i;s.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(Kt(o[n]));const a=hn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?rt(s.injectImpl):null;De(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Jt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&rt(u),hn(a),s.resolving=!1,qe()}}return i}function Sn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Tn(t,e){return!(t&y.Self||t&y.Host&&e)}class On{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return vn(this._tNode,this._lView,t,void 0,e)}}function In(t){const e=t;if(D(t))return()=>{const t=In(P(e));return t?t():null};let n=Pt(e);if(null===n){const t=T(e);n=t&&t.factory}return n||null}function Cn(t){return l(()=>{const e=t.prototype.constructor,n=e[K]||In(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||In(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function xn(t){return t.ngDebugContext}function kn(t){return t.ngOriginalError}function An(t,...e){t.error(...e)}class jn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||An}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?xn(t)?xn(t):this._findContext(kn(t)):null}_findOriginalError(t){let e=kn(t);for(;e&&kn(e);)e=kn(e);return e}}class Nn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Rn extends Nn{getTypeName(){return"HTML"}}class Pn extends Nn{getTypeName(){return"Style"}}class Dn extends Nn{getTypeName(){return"Script"}}class Ln extends Nn{getTypeName(){return"URL"}}class Fn extends Nn{getTypeName(){return"ResourceURL"}}function Mn(t){return t instanceof Nn?t.changingThisBreaksApplicationSecurity:t}function Un(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof Nn&&t.getTypeName()||null}function Vn(t){return new Rn(t)}function Bn(t){return new Pn(t)}function zn(t){return new Dn(t)}function Hn(t){return new Ln(t)}function Qn(t){return new Fn(t)}let Kn=!0,Gn=!1;function $n(){return Gn=!0,Kn}function Wn(){if(Gn)throw new Error("Cannot enable prod mode after platform setup.");Kn=!1}class Xn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Yn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tr(t){return(t=String(t)).match(Jn)||t.match(Zn)?t:($n()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function er(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function nr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const rr=er("area,br,col,hr,img,wbr"),ir=er("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),or=er("rp,rt"),sr=nr(or,ir),ar=nr(rr,nr(ir,er("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nr(or,er("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sr),ur=er("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cr=er("srcset"),lr=nr(ur,cr,er("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),er("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hr=er("script,style,template");class fr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ar.hasOwnProperty(e))return this.sanitizedSomething=!0,!hr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!lr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;ur[o]&&(s=tr(s)),cr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>tr(t.trim())).join(", ")),this.buf.push(" ",e,'="',mr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ar.hasOwnProperty(e)&&!rr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(mr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const dr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pr=/([^\#-~ |!])/g;function mr(t){return t.replace(/&/g,"&amp;").replace(dr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(pr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gr;function yr(t,e){let n=null;try{gr=gr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Xn:new Yn(t)}(t);let r=e?String(e):"";n=gr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=gr.getInertBodyElement(r)}while(r!==o);const s=new fr,a=s.sanitizeChildren(vr(n)||n);return $n()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=vr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function vr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var br=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function _r(t){const e=function(){const t=we();return t&&t[12]}();return e?e.sanitize(br.URL,t)||"":Un(t,"URL")?Mn(t):tr(Qt(t))}function wr(t,e){t.__ngContext__=e}function Er(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Sr="ng-template";function Tr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Er(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Or(t){return 0===t.type&&t.tagName!==Sr}function Ir(t,e,n){return e===(0!==t.type||n?t.tagName:Sr)}function Cr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(nn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Ir(t,u,n)||""===u&&1===e.length){if(xr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Tr(t.attrs,c,n)){if(xr(r))return!1;s=!0}continue}const l=kr(8&r?"class":u,i,Or(t),n);if(-1===l){if(xr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Er(e,c,0)||2&r&&c!==t){if(xr(r))return!1;s=!0}}}}else{if(!s&&!xr(r)&&!xr(u))return!1;if(s&&xr(u))continue;s=!1,r=u|1&r}}return xr(r)||s}function xr(t){return 0==(1&t)}function kr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ar(t,e,n=!1){for(let r=0;r<e.length;r++)if(Cr(t,e[r],n))return!0;return!1}function jr(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Nr(t,e){return t?":not("+e.trim()+")":e}function Rr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||xr(s)||(e+=Nr(o,i),i=""),r=s,o=o||!xr(r);n++}return""!==i&&(e+=Nr(o,i)),e}const Pr={};function Dr(t){const e=t[3];return Ut(e)?e[3]:e}function Lr(t){return Mr(t[13])}function Fr(t){return Mr(t[4])}function Mr(t){for(;null!==t&&!Ut(t);)t=t[4];return t}function Ur(t){qr(Ee(),we(),Be()+t,xe())}function qr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&$e(e,r,n)}else{const r=t.preOrderHooks;null!==r&&We(e,r,0,n)}ze(n)}function Vr(t,e){return t<<17|e<<2}function Br(t){return t>>17&32767}function zr(t){return 2|t}function Hr(t){return(131068&t)>>2}function Qr(t,e){return-131069&t|e<<2}function Kr(t){return 1|t}function Gr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Pe(i),n.contentQueries(2,e[o],o)}}}function $r(t,e,n){return oe(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Wr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ye(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Xr(t,e,n,r,i){const o=e+Lt,s=t.data[o]||function(t,e,n,r,i){const o=Te(),s=Ie(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,r,i);return Oe(s,!0),s}function Yr(t,e,n){Le(e);try{const r=t.viewQuery;null!==r&&Ci(1,r,n);const i=t.template;null!==i&&ti(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gr(t,e),t.staticViewQueries&&Ci(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ei(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ve()}}function Jr(t,e,n,r){const i=e[2];if(256==(256&i))return;Le(e);const o=xe();try{ye(e),be.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ti(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&$e(e,n,null)}else{const n=t.preOrderHooks;null!==n&&We(e,n,0,null),Xe(e,0)}if(function(t){for(let e=Lr(t);null!==e;e=Fr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ve(r,1),n[2]|=1024}}}(e),function(t){for(let e=Lr(t);null!==e;e=Fr(e))for(let t=Ft;t<e.length;t++){const n=e[t],r=n[1];me(n)&&Jr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Gr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&$e(e,n)}else{const n=t.contentHooks;null!==n&&We(e,n,1),Xe(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,ze(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(je(r,i),s(2,e[i])),i++)}}}finally{ze(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)wi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ci(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&$e(e,n)}else{const n=t.viewHooks;null!==n&&We(e,n,2),Xe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ve(e[3],-1))}finally{Ve()}}function Zr(t,e,n,r){const i=e[10],o=!xe(),s=pe(e);try{o&&!s&&i.begin&&i.begin(),s&&Yr(t,e,r),Jr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function ti(t,e,n,r,i){const o=Be();try{ze(-1),2&r&&e.length>Lt&&qr(t,e,0,xe()),n(r,i)}finally{ze(o)}}function ei(t,e,n){_e()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||dn(n,e),wr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=zt(r);o&&yi(e,n,r);const u=En(e,t,a,n);wr(u,e),null!==s&&vi(0,a-i,u,r,0,s),o&&(fe(n.index,e)[8]=u)}}(t,e,n,ce(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-Lt,u=be.lFrame.currentDirectiveIndex;try{ze(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Ne(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?hi(r,i):s&&o.push(null)}}finally{ze(-1),Ne(u)}}(t,e,n))}function ni(t,e,n=ce){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ii(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ii(t,e,n,r,i,o,s,a,u,c){const l=Lt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Pr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function oi(t,e,n,r){const i=ki(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function si(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ai(t,e,n,r,i,o,s,a){const u=ce(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ji(t,n,c,r,i),Vt(e)&&function(t,e){const n=fe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.tagName||"",r):i,oe(o)?o.setProperty(u,r,i):rn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ui(t,e,n,r){let i=!1;if(_e()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Ar(n,s.selectors,!1)&&(i||(i=[]),yn(dn(n,e),t,s.type),zt(s)?(di(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,mi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}fi(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=on(n.mergedAttrs,c.hostAttrs),gi(t,e,c),pi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-Lt),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-Lt),u=!0),ci(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Or(e)?null:bi(n,i);o.push(c),s=si(n,u,s),a=si(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),li(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=on(n.mergedAttrs,n.attrs),i}function ci(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function li(t,e,n){for(let r=0;r<n;r++)e.push(Pr),t.blueprint.push(Pr),t.data.push(null)}function hi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function fi(t,e,n){const r=Lt-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function di(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function pi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;zt(e)&&(n[""]=t)}}function mi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Pt(n.type)),i=new tn(r,zt(n),null);t.blueprint.push(i),e.push(i)}function yi(t,e,n){const r=ce(e,t),i=ri(n),o=t[10],s=Si(t,Wr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function vi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function bi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function _i(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function wi(t,e){const n=fe(e,t);if(me(n)){const t=n[1];80&n[2]?Jr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Lr(e);null!==r;r=Fr(r))for(let e=Ft;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Jr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=fe(n[r],e);me(i)&&i[5]>0&&t(i)}}(n)}}function Ei(t,e){const n=fe(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Yr(r,n,n[8])}function Si(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ti(t){for(;t;){t[2]|=64;const e=Dr(t);if(Ht(t)&&!e)return t;t=e}return null}function Oi(t,e,n){const r=e[10];r.begin&&r.begin();try{Jr(t,e,t.template,n)}catch(i){throw Ai(e,i),i}finally{r.end&&r.end()}}function Ii(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=de(n),i=r[1];Zr(i,r,i.template,n)}}(t[8])}function Ci(t,e,n){Pe(0),e(t,n)}const xi=(()=>Promise.resolve(null))();function ki(t){return t[7]||(t[7]=[])}function Ai(t,e){const n=t[9],r=n?n.get(jn,null):null;r&&r.handleError(e)}function ji(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ni(t,e,n,r,i){if(null!=r){let o,s=!1;Ut(r)?o=r:Mt(r)&&(s=!0,r=r[0]);const a=ae(r);0===t&&null!==n?null==i?Ui(e,n,a):Mi(e,n,a,i||null):1===t&&null!==n?Mi(e,n,a,i||null):2===t?function(t,e,n){const r=Vi(t,e);r&&function(t,e,n,r){oe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==ae(n)&&Ni(e,t,r,o,i);for(let s=Ft;s<n.length;s++){const i=n[s];Qi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ri(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ve(i,-1)),n.splice(r,1)}function Pi(t,e){if(t.length<=Ft)return;const n=Ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ri(o,r),e>0&&(t[n-1][4]=r[4]);const s=pt(t,Ft+e);Qi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Di(t,e){if(!(256&e[2])){const n=e[11];oe(n)&&n.destroyNode&&Qi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Li(t[1],t);for(;e;){let n=null;if(Mt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Mt(e)&&Li(e[1],e),e=e[3];null===e&&(e=t),Mt(e)&&Li(e[1],e),n=e&&e[4]}e=n}}(e)}}function Li(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof tn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):ae(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&oe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Ut(e[3])){n!==e[3]&&Ri(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Fi(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return ce(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==_t.ShadowDom&&n!==_t.Native)return null}return ce(r,n)}function Mi(t,e,n,r){oe(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Ui(t,e,n){oe(t)?t.appendChild(e,n):e.appendChild(n)}function qi(t,e,n,r){null!==r?Mi(t,e,n,r):Ui(t,e,n)}function Vi(t,e){return oe(t)?t.parentNode(e):e.parentNode}function Bi(t,e){return 3===t.type||4===t.type?ce(t,e):null}function zi(t,e,n,r){const i=Fi(t,r,e);if(null!=i){const t=e[11],o=Bi(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)qi(t,i,n[e],o);else qi(t,i,n,o)}}function Hi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&wr(ae(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(Hi(t,e,n.child,r,i,o,!1),Ni(e,t,i,a,o)):1===u?Ki(t,e,r,n,i,o):Ni(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Qi(t,e,n,r,i,o){Hi(n,r,t.firstChild,e,i,o,!1)}function Ki(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ni(e,t,i,a[u],o);else Hi(t,e,a,s[3],i,o,!0)}function Gi(t,e,n){oe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function $i(t,e,n){oe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Wi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(ae(s)),Ut(s))for(let e=Ft;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=Dr(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Di(this._lView[1],this._lView)}onDestroy(t){oi(this._lView[1],this._lView,null,t)}markForCheck(){Ti(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Oi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ke(!0);try{Oi(t,e,n)}finally{ke(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Qi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Xi extends Wi{constructor(t){super(t),this._view=t}detectChanges(){Ii(this._view)}checkNoChanges(){!function(t){ke(!0);try{Ii(t)}finally{ke(!1)}}(this._view)}get context(){return null}}let Yi,Ji,Zi;function to(t,e,n){return Yi||(Yi=class extends t{}),new Yi(ce(e,n))}function eo(t,e,n,r){return Ji||(Ji=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Wr(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Yr(e,n,t),new Wi(n)}}),0===n.type?new Ji(r,n,to(e,n,r)):null}function no(t,e,n,r){let i;Zi||(Zi=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return to(e,this._hostTNode,this._hostView)}get injector(){return new On(this._hostTNode,this._hostView)}get parentInjector(){const t=gn(this._hostTNode,this._hostView);if(an(t)){const e=cn(t,this._hostView),n=un(t);return new On(e[1].data[n+8],e)}return new On(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(lt,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ut(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Zi(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Ft?(e[4]=n[i],dt(n,Ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=function t(e,n){const r=Ft+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return ce(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return Ut(e)?t(-1,e):ae(e)}}{const t=n[16],i=t[6],o=Dr(t),s=i.projection[r.projection];return null!=s?e(o,s):e(n,r.next)}}return null}(e,i)}return n[7]}(i,o),a=n[11],u=Vi(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Qi(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),dt(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Pi(this._lContainer,e);n&&(pt(this._lContainer[8],e),Di(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Pi(this._lContainer,e);return n&&null!=pt(this._lContainer[8],e)?new Wi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Ut(o))i=o;else{let t;if(3===n.type)t=ae(o);else if(t=r[11].createComment(""),Ht(r)){const e=r[11],i=ce(n,r);Mi(e,Vi(e,i),t,function(t,e){return oe(t)?t.nextSibling(e):e.nextSibling}(e,i))}else zi(r[1],r,t,n);r[n.index]=i=_i(o,r,t,n),Si(r,i)}return new Zi(i,n,r)}function ro(t=!1){return function(t,e,n){if(!n&&Vt(t)){const n=fe(t.index,e);return new Wi(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new Wi(e[16],e):null}(Te(),we(),t)}let io=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>oo(),t})();const oo=ro,so=Function,ao=new $("Set Injector scope."),uo={},co={},lo=[];let ho=void 0;function fo(){return void 0===ho&&(ho=new ct),ho}function po(t,e=null,n=null,r){return new mo(t,n,e||fo(),r)}class mo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ft(e,n=>this.processProvider(n,t,e)),ft([t],t=>this.processInjectorType(t,[],i)),this.records.set(W,vo(void 0,this));const o=this.records.get(ao);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:A(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=X,n=y.Default){this.assertNotDestroyed();const r=nt(this);try{if(!(n&y.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof $)&&E(t);e=n&&this.injectableDefInScope(n)?vo(go(t),uo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&y.Self?fo():this.parent).get(t,e=n&y.Optional&&e===X?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(A(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[J]&&i.unshift(e[J]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=A(e);if(Array.isArray(e))i=e.map(A).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):A(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Y,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{nt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(A(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=P(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ft(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ft(r,t=>this.processProvider(t,n,r||lo))}}this.injectorDefTypes.add(o),this.records.set(o,vo(r.factory,uo));const a=r.providers;if(null!=a&&!s){const e=t;ft(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=_o(t=P(t))?t:P(t&&t.provide);const i=function(t,e,n){return bo(t)?vo(void 0,t.useValue):vo(yo(t),uo)}(t);if(_o(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=vo(void 0,uo,!0),e.factory=()=>ut(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===uo&&(e.value=co,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function go(t){const e=E(t),n=null!==e?e.factory:Pt(t);if(null!==n)return n;const r=T(t);if(null!==r)return r.factory;if(t instanceof $)throw new Error(`Token ${A(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=mt(e,"?");throw new Error(`Can't resolve all parameters for ${A(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[x]||t[C]&&t[C]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function yo(t,e,n){let r=void 0;if(_o(t)){const e=P(t);return Pt(e)||go(e)}if(bo(t))r=()=>P(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...ut(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>ot(P(t.useExisting));else{const e=P(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Pt(e)||go(e);r=()=>new e(...ut(t.deps))}var i;return r}function vo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bo(t){return null!==t&&"object"==typeof t&&Z in t}function _o(t){return"function"==typeof t}const wo=function(t,e,n){return function(t,e=null,n=null,r){const i=po(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Eo=(()=>{class t{static create(t,e){return Array.isArray(t)?wo(t,e,""):wo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=X,t.NULL=new ct,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>ot(W)}),t.__NG_ELEMENT_ID__=-1,t})();const So=new $("AnalyzeForEntryComponents");function To(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=j(i,t):2==o&&(r=j(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Oo(t,e){const n=de(t)[1],r=n.data.length-1;Ge(n,{directiveStart:r,directiveEnd:r+1})}function Io(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(zt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Co(t.inputs),e.declaredInputs=Co(t.declaredInputs),e.outputs=Co(t.outputs);const n=i.hostBindings;n&&Ao(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&xo(t,o),s&&ko(t,s),b(t.inputs,i.inputs),b(t.declaredInputs,i.declaredInputs),b(t.outputs,i.outputs),zt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Io&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=on(i.hostAttrs,n=on(n,i.hostAttrs))}}(r)}function Co(t){return t===wt?{}:t===Et?[]:t}function xo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ko(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ao(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let jo=null;function No(){if(!jo){const t=q.Symbol;if(t&&t.iterator)jo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(jo=n)}}}return jo}class Ro{constructor(t){this.wrapped=t}static wrap(t){return new Ro(t)}static unwrap(t){return Ro.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ro}}function Po(t){return!!Do(t)&&(Array.isArray(t)||!(t instanceof Map)&&No()in t)}function Do(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Lo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Fo(t,e,n,r){const i=we();return Lo(i,Ae(),e)&&(Ee(),function(t,e,n,r,i,o){const s=ce(t,e),a=e[11];if(null==r)oe(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?Qt(r):i(r,t.tagName||"",n);oe(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(He(),i,t,e,n,r)),Fo}function Mo(t,e,n,r){return Lo(t,Ae(),n)?e+Qt(n)+r:Pr}function Uo(t,e,n,r,i,o,s,a){const u=we(),c=Ee(),l=t+Lt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Xr(e,t,0,s||null,ge(c,a));ui(e,n,l,ge(c,u)),Ge(e,l);const h=l.tViews=ii(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];Oe(h,!1);const f=u[11].createComment("");zi(c,u,f,h),wr(f,u),Si(u,u[l]=_i(f,u,f,h)),Bt(h)&&ei(c,u,h),null!=s&&ni(u,h,a)}function qo(t){return he(be.lFrame.contextLView,t)}function Vo(t,e=y.Default){const n=we();return null===n?ot(t,e):vn(Te(),n,P(t),e)}function Bo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(nn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Te(),t)}function zo(t,e,n){const r=we();return Lo(r,Ae(),e)&&ai(Ee(),He(),r,t,e,r[11],n,!1),zo}function Ho(t,e,n,r,i){const o=i?"class":"style";ji(t,n,e.inputs[o],o,r)}function Qo(t,e,n,r){const i=we(),o=Ee(),s=Lt+t,a=i[11],u=i[s]=$r(e,a,be.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Xr(e,t,2,i,ge(a,o));return ui(e,n,u,ge(a,s)),null!==u.attrs&&To(u,u.attrs,!1),null!==u.mergedAttrs&&To(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];Oe(c,!0);const l=c.mergedAttrs;null!==l&&en(a,u,l);const h=c.classes;null!==h&&$i(a,u,h);const f=c.styles;null!==f&&Gi(a,u,f),zi(o,i,u,c),0===be.lFrame.elementDepthCount&&wr(u,i),be.lFrame.elementDepthCount++,Bt(c)&&(ei(o,i,c),function(t,e,n){if(qt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ni(i,c)}function Ko(){let t=Te();Ie()?Ce():(t=t.parent,Oe(t,!1));const e=t;be.lFrame.elementDepthCount--;const n=Ee();n.firstCreatePass&&(Ge(n,t),qt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ho(n,e,we(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ho(n,e,we(),e.stylesWithoutHost,!1)}function Go(t,e,n,r){Qo(t,e,n,r),Ko()}function $o(){return we()}function Wo(t){return!!t&&"function"==typeof t.then}function Xo(t){return!!t&&"function"==typeof t.subscribe}function Yo(t,e,n=!1,r){const i=we(),o=Ee(),s=Te();return function(t,e,n,r,i,o,s=!1,a){const u=Bt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=ki(e);let h=!0;if(2===r.type){const f=ce(r,e),d=a?a(f):wt,p=d.target||f,m=l.length,g=a?t=>a(ae(t[r.index])).target:r.index;if(oe(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Zo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,g,m,m+1)}}else o=Zo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,m,s)}const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Yo}function Jo(t,e,n){try{return!1!==e(n)}catch(r){return Ai(t,r),!1}}function Zo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?fe(t.index,e):e;0==(32&e[2])&&Ti(s);let a=Jo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Jo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ts(t=1){return function(t){return(be.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,be.lFrame.contextLView))[8]}(t)}function es(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Ar(t,o,!0):jr(r,o))return i}else n=i}return n}function ns(t){const e=we()[16][6];if(!e.projection){const n=e.projection=mt(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?es(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function rs(t,e=0,n){const r=we(),i=Ee(),o=Xr(i,t,1,null,n||null);null===o.projection&&(o.projection=e),Ce(),function(t,e,n){Ki(e[11],0,e,n,Fi(t,n,e),Bi(n.parent||e[6],e))}(i,r,o)}function is(t,e,n){return os(t,"",e,"",n),is}function os(t,e,n,r,i){const o=we(),s=Mo(o,e,n,r);return s!==Pr&&ai(Ee(),He(),o,t,s,o[11],i,!1),os}const ss=[];function as(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Br(o):Hr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];us(t[a],e)&&(u=!0,t[a+1]=r?Kr(n):zr(n)),a=r?Br(n):Hr(n)}u&&(t[n+1]=r?zr(o):Kr(o))}function us(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&vt(t,e)>=0}function cs(t,e,n){return hs(t,e,n,!1),cs}function ls(t,e){return hs(t,e,null,!0),ls}function hs(t,e,n,r){const i=we(),o=Ee(),s=function(t){const e=be.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Be()+Lt],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=be.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ds(n=fs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=fs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Hr(r))return t[Br(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=fs(null,t,e,n[1],r),n=ds(n,e.attrs,r),function(t,e,n,r){t[Br(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ds(r,t[o].hostAttrs,n);return ds(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Br(s),u=Hr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||vt(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Br(t[a+1]);t[r+1]=Vr(e,a),0!==e&&(t[e+1]=Qr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Vr(a,0),0!==a&&(t[a+1]=Qr(t[a+1],r)),a=r;else t[r+1]=Vr(u,0),0===a?a=r:t[u+1]=Qr(t[u+1],r),u=r;l&&(t[r+1]=zr(t[r+1])),as(t,c,r,!0),as(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&vt(o,e)>=0&&(n[r+1]=Kr(n[r+1]))}(e,c,t,r,o),s=Vr(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Pr&&Lo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(2!==e.type)return;const u=t.data,c=u[a+1];ms(1==(1&c)?ps(u,e,n,i,Hr(c),s):void 0)||(ms(o)||function(t){return 2==(2&t)}(c)&&(o=ps(u,null,n,i,a,s)),function(t,e,n,r,i){const o=oe(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,ue(Be(),n),i,o))}(o,o.data[Be()+Lt],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=A(Mn(t)))),t}(e,n),r,s)}function fs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ds(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ds(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),gt(t,s,!!n||e[++o]))}return void 0===t?null:t}function ps(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Pr&&(l=c?ss:void 0);let h=c?yt(l,r):u===r?l:void 0;if(o&&!ms(h)&&(h=yt(e,r)),ms(h)&&(a=h,s))return a;const f=t[i+1];i=s?Br(f):Hr(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=yt(t,r))}return a}function ms(t){return void 0!==t}function gs(t,e=""){const n=we(),r=Ee(),i=t+Lt,o=r.firstCreatePass?Xr(r,t,2,null,null):r.data[i],s=n[i]=function(t,e){return oe(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);zi(r,n,s,o),Oe(o,!1)}function ys(t){return vs("",t,""),ys}function vs(t,e,n){const r=we(),i=Mo(r,t,e,n);return i!==Pr&&function(t,e,n){const r=ue(e,t),i=t[11];oe(i)?i.setValue(r,n):r.textContent=n}(r,Be(),i),vs}function bs(t,e,n){const r=we();return Lo(r,Ae(),e)&&ai(Ee(),He(),r,t,e,r[11],n,!0),bs}const _s=void 0;var ws=["en",[["a","p"],["AM","PM"],_s],[["AM","PM"],_s,_s],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_s,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_s,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_s,"{1} 'at' {0}",_s],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Es={};function Ss(t,e,n){"string"!=typeof e&&(n=e,e=t[xs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Es[e]=t,n&&(Es[e][xs.ExtraData]=n)}function Ts(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Cs(e);if(n)return n;const r=e.split("-")[0];if(n=Cs(r),n)return n;if("en"===r)return ws;throw new Error(`Missing locale data for the locale "${t}".`)}function Os(t){return Ts(t)[xs.CurrencyCode]||null}function Is(t){return Ts(t)[xs.PluralCase]}function Cs(t){return t in Es||(Es[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),Es[t]}var xs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ks="en-US";let As=ks;function js(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(As=t.toLowerCase().replace(/_/g,"-"))}function Ns(t,e,n,r,i){if(t=P(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ns(t[o],e,n,r,i);else{const o=Ee(),s=we();let a=_o(t)?t:P(t.provide),u=yo(t);const c=Te(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(_o(t)||!t.multi){const r=new tn(u,i,Vo),d=Ds(a,e,i?l:l+f,h);-1===d?(yn(dn(c,s),o,a),Rs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Ds(a,e,l+f,h),p=Ds(a,e,l,l+f),m=d>=0&&n[d],g=p>=0&&n[p];if(i&&!g||!i&&!m){yn(dn(c,s),o,a);const l=function(t,e,n,r,i){const o=new tn(t,n,Vo);return o.multi=[],o.index=e,o.componentProviders=0,Ps(o,i,r&&!n),o}(i?Fs:Ls,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),Rs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Rs(o,t,d>-1?d:p,Ps(n[i?p:d],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function Rs(t,e,n,r){const i=_o(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ps(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ds(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ls(t,e,n,r){return Ms(this.multi,[])}function Fs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=En(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ms(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ms(i,o);return o}function Ms(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Us(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ee();if(r.firstCreatePass){const i=zt(t);Ns(n,r.data,r.blueprint,i,!0),Ns(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class qs{}class Vs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${A(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Bs=(()=>{class t{}return t.NULL=new Vs,t})(),zs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Hs(t),t})();const Hs=function(t){return to(t,Te(),we())};class Qs{}var Ks=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>$s(),t})();const $s=function(){const t=we(),e=fe(Te().index,t);return function(t){const e=t[11];if(oe(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Mt(e)?e:t)};let Ws=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Xs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ys=new Xs("10.2.5");class Js{constructor(){}supports(t){return Po(t)}create(t){return new ta(t)}}const Zs=(t,e)=>e;class ta{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Zs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ia(n,r,i)?e:n,s=ia(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Po(t))throw new Error(`Error trying to diff '${A(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[No()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new ea(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ra),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ra),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ea{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class na{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ra{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new na,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ia(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class oa{constructor(){}supports(t){return t instanceof Map||Do(t)}create(){return new sa}}class sa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Do(t)))throw new Error(`Error trying to diff '${A(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new aa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class aa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ua=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new g,new p]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>new t([new Js])}),t})(),ca=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new g,new p]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>new t([new oa])}),t})();const la=[new oa],ha=new ua([new Js]),fa=new ca(la);let da=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>pa(t,zs),t})();const pa=function(t,e){return eo(t,e,Te(),we())};let ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ga(t,zs),t})();const ga=function(t,e){return no(t,e,Te(),we())},ya={};class va extends Bs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Rt(t);return new wa(e,this.ngModule)}}function ba(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const _a=new $("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Gt});class wa extends qs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Rr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ba(this.componentDef.inputs)}get outputs(){return ba(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ya,i);return o!==ya||r===ya?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Qs,se),s=i.get(Ws,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(oe(t))return t.selectRootElement(e,n===_t.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):$r(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?ne:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Gt,clean:xi,playerHandler:null,flags:0},f=ii(0,null,null,1,0,null,null,null,null,null),d=Wr(null,f,h,l,null,null,o,a,s,i);let p,m;Le(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Xr(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(To(a,u,!0),null!==t&&(en(i,t,u),null!==a.classes&&$i(i,t,a.classes),null!==a.styles&&Gi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Wr(n,ri(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(yn(dn(a,n),s,e.type),di(s,a),mi(a,n.length,1)),Si(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)en(a,c,["ng-version",Ys.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!xr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&en(a,c,t),e&&e.length>0&&$i(a,c,e.join(" "))}if(m=le(f,0),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Te();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),fi(t,r,1),gi(t,e,n));const i=En(e,t,e.length-1,r);wr(i,e);const o=ce(r,e);return o&&wr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=Te();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){ze(a.index-Lt);const t=n[1];ci(t,e),li(t,n,e.hostVars),hi(e,s)}return s}(t,this.componentDef,d,h,[Oo]),Yr(f,d,null)}finally{Ve()}return new Ea(this.componentType,p,to(zs,m,d),d,m)}}class Ea extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Xi(r),this.componentType=t}get injector(){return new On(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Sa=new Map;class Ta extends lt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new va(this);const n=Dt(t),r=t[Q]||null;r&&js(r),this._bootstrapComponents=$t(n.bootstrap),this._r3Injector=po(t,e,[{provide:lt,useValue:this},{provide:Bs,useValue:this.componentFactoryResolver}],A(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Eo.THROW_IF_NOT_FOUND,n=y.Default){return t===Eo||t===lt||t===W?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Oa extends ht{constructor(t){super(),this.moduleType=t,null!==Dt(t)&&function(t){const e=new Set;!function t(n){const r=Dt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${A(e)} vs ${A(e.name)}`)}(i,Sa.get(i),n),Sa.set(i,n));const o=$t(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ta(this.moduleType,t)}}function Ia(t,e){const n=Ee();let r;const i=t+Lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=Pt(r.type)),s=rt(Vo);try{const e=hn(!1),r=o();return hn(e),function(t,e,n,r){const i=n+Lt;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,we(),t,r),r}finally{rt(s)}}function Ca(t,e,n){const r=we(),i=he(r,t);return function(t,e){return Ro.isWrapped(e)&&(e=Ro.unwrap(e),t[be.lFrame.bindingIndex]=Pr),e}(r,function(t,e){return t[1].data[e+Lt].pure}(r,t)?function(t,e,n,r,i,o){const s=e+n;return Lo(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===Pr?void 0:n}(t,s+1)}(r,function(){const t=be.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,i.transform,n,i):i.transform(n))}const xa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ka(){return this._results[No()]()}class Aa{constructor(){this.dirty=!0,this._results=[],this.changes=new xa,this.length=0;const t=No(),e=Aa.prototype;e[t]||(e[t]=ka)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ja{constructor(t){this.queryList=t,this.matches=null}clone(){return new ja(this.queryList)}setDirty(){this.queryList.setDirty()}}class Na{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Na(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Qa(t,e).matches&&this.queries[e].setDirty()}}class Ra{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Pa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Pa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Da{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Da(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,La(e,i)),this.matchTNodeWithReadOption(t,e,wn(e,t,i,!1,!1))}else n===da?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,wn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===zs||r===ma||r===da&&0===e.type)this.addMatch(e.index,-2);else{const n=wn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function La(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Fa(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?to(zs,t,e):0===t.type?eo(da,zs,t,e):null}(e,t):-2===n?function(t,e,n){return n===zs?to(zs,e,t):n===da?eo(da,zs,e,t):n===ma?no(ma,zs,e,t):void 0}(t,e,r):En(t,t[1],n,e)}function Ma(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Fa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ua(t){const e=we(),n=Ee(),r=Re();Pe(r+1);const i=Qa(n,r);if(t.dirty&&pe(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Ma(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=Ft;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Ma(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function qa(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&Ha(t,new Ra(n,r,false,i),-1),za(t,e)}(Ee(),we(),t,e,n)}function Va(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(Ha(t,new Ra(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),za(t,e)}(Ee(),we(),e,n,r,0,Te(),t)}function Ba(){return t=we(),e=Re(),t[19].queries[e].queryList;var t,e}function za(t,e){const n=new Aa;oi(t,e,n,n.destroy),null===e[19]&&(e[19]=new Na),e[19].queries.push(new ja(n))}function Ha(t,e,n){null===t.queries&&(t.queries=new Pa),t.queries.track(new Da(e,n))}function Qa(t,e){return t.queries.getByIndex(e)}function Ka(t,e){return eo(da,zs,t,e)}function Ga(t=y.Default){const e=ro(!0);if(null!=e||t&y.Optional)return e;Wt("ChangeDetectorRef")}const $a=new $("Application Initializer");let Wa=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Wo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(ot($a,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Xa=new $("AppId"),Ya={provide:Xa,useFactory:function(){return`${Ja()}${Ja()}${Ja()}`},deps:[]};function Ja(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Za=new $("Platform Initializer"),tu=new $("Platform ID"),eu=new $("appBootstrapListener");let nu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const ru=new $("LocaleId"),iu=new $("DefaultCurrencyCode");class ou{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const su=function(t){return new Oa(t)},au=su,uu=function(t){return Promise.resolve(su(t))},cu=function(t){const e=su(t),n=$t(Dt(t).declarations).reduce((t,e)=>{const n=Rt(e);return n&&t.push(new wa(n)),t},[]);return new ou(e,n)},lu=cu,hu=function(t){return Promise.resolve(cu(t))};let fu=(()=>{class t{constructor(){this.compileModuleSync=au,this.compileModuleAsync=uu,this.compileModuleAndAllComponentsSync=lu,this.compileModuleAndAllComponentsAsync=hu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const du=(()=>Promise.resolve(0))();function pu(t){"undefined"==typeof Zone?du.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class mu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xa(!1),this.onMicrotaskEmpty=new xa(!1),this.onStable=new xa(!1),this.onError=new xa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,bu(t),vu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),bu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return _u(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),wu(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return _u(t),e.invoke(r,i,o,s,a)}finally{wu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,bu(t),vu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,yu,gu,gu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function gu(){}const yu={};function vu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function bu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function _u(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wu(t){t._nesting--,vu(t)}class Eu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xa,this.onMicrotaskEmpty=new xa,this.onStable=new xa,this.onError=new xa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Su=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mu.assertNotInAngularZone(),pu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(ot(mu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),Tu=(()=>{class t{constructor(){this._applications=new Map,xu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return xu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class Ou{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Iu(t){xu=t}let Cu,xu=new Ou;const ku=new $("AllowMultipleToken");class Au{constructor(t,e){this.name=t,this.token=e}}function ju(t,e,n=[]){const r="Platform: "+e,i=new $(r);return(e=[])=>{let o=Nu();if(!o||o.injector.get(ku,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ao,useValue:"platform"});!function(t){if(Cu&&!Cu.destroyed&&!Cu.injector.get(ku,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Cu=t.get(Ru);const e=t.get(Za,null);e&&e.forEach(t=>t())}(Eo.create({providers:t,name:r}))}return function(t){const e=Nu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Nu(){return Cu&&!Cu.destroyed?Cu:null}let Ru=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Eu:("zone.js"===t?void 0:t)||new mu({enableLongStackTrace:$n(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:mu,useValue:n}];return n.run(()=>{const e=Eo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(jn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Lu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Wo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Wa);return t.runInitializers(),t.donePromise.then(()=>(js(i.injector.get(ru,ks)||ks),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Pu({},e);return function(t,e,n){const r=new Oa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Du);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${A(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(ot(Eo))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Pu(t,e){return Array.isArray(e)?e.reduce(Pu,t):Object.assign(Object.assign({},t),e)}let Du=(()=>{class t{constructor(t,e,n,r,i,l){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=$n(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),f=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{mu.assertNotInAngularZone(),pu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{mu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(h,f.pipe(t=>Object(u.a)()(Object(a.a)(c)(t))))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof qs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(lt),i=n.create(Eo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Su,null);return o&&i.injector.get(Tu).registerApplication(i.location.nativeElement,o),this._loadComponent(i),$n()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Lu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(eu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Lu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(ot(mu),ot(nu),ot(Eo),ot(jn),ot(Bs),ot(Wa))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Lu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Fu{}class Mu{}const Uu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let qu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Uu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Vu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Vu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(ot(fu),ot(Mu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Vu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Bu=function(t){return null},zu=ju(null,"core",[{provide:tu,useValue:"unknown"},{provide:Ru,deps:[Eo]},{provide:Tu,deps:[]},{provide:nu,deps:[]}]),Hu=[{provide:Du,useClass:Du,deps:[mu,nu,Eo,jn,Bs,Wa]},{provide:_a,deps:[mu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Wa,useClass:Wa,deps:[[new p,$a]]},{provide:fu,useClass:fu,deps:[]},Ya,{provide:ua,useFactory:function(){return ha},deps:[]},{provide:ca,useFactory:function(){return fa},deps:[]},{provide:ru,useFactory:function(t){return js(t=t||"undefined"!=typeof $localize&&$localize.locale||ks),t},deps:[[new d(ru),new p,new g]]},{provide:iu,useValue:"USD"}];let Qu=(()=>{class t{constructor(t){}}return t.\u0275mod=xt({type:t}),t.\u0275inj=w({factory:function(e){return new(e||t)(ot(Du))},providers:Hu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oB13:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function l(t,e){return function(n){let r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new h(r,e));const i=Object.create(n,u);return i.source=n,i.subjectFactory=r,i}}class h{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return w})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return T})),n.d(e,"i",(function(){return a})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return d})),n.d(e,"m",(function(){return p})),n.d(e,"n",(function(){return u})),n.d(e,"o",(function(){return c})),n.d(e,"p",(function(){return f})),n.d(e,"q",(function(){return m}));var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return a().indexOf("MSAppHost/")>=0}var g=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new g(i,a,r);return u},t}();function v(t,e){return t.replace(b,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var b=/\{\$([^}]+)}/g;function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function S(){}function T(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return T})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return g})),n.d(e,"j",(function(){return E}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(m.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const O={provide:class{},useFactory:w,deps:[v,u.z,[new u.A,b]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)(u.Qb(u.B))},providers:[O]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class m extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new m(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(m.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function g(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new m(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},yLV6:function(t,e,n){var r;!function(i,o,s,a){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),h=Math.round,f=Math.abs,d=Date.now;function p(t,e,n){return setTimeout(w(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function y(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var v=y((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),b=y((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function _(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function S(t,e){return t===a?e:t}function T(t,e,n){g(x(e),(function(e){t.addEventListener(e,n,!1)}))}function O(t,e,n){g(x(e),(function(e){t.removeEventListener(e,n,!1)}))}function I(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function x(t){return t.trim().split(/\s+/g)}function k(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function j(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];k(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function N(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return a}var R=1;function P(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var D="ontouchstart"in i,L=N(i,"PointerEvent")!==a,F=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),M="touch",U="mouse",q=["x","y"],V=["clientX","clientY"];function B(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&n.handler(e)},this.init()}function z(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,s=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=H(e)),i>1&&!n.firstMultiple?n.firstMultiple=H(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,u=s?s.center:o.center,c=e.center=Q(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=W(u,c),e.distance=$(u,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=G(e.deltaX,e.deltaY);var l,h,p=K(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=f(p.x)>f(p.y)?p.x:p.y,e.scale=s?(l=s.pointers,$((h=r)[0],h[1],V)/$(l[0],l[1],V)):1,e.rotation=s?function(t,e){return W(e[1],e[0],V)+W(t[1],t[0],V)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(u>25||s.velocity===a)){var c=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,h=K(u,c,l);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,o=G(c,l),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var m=t.element;I(e.srcEvent.target,m)&&(m=e.srcEvent.target),e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function H(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:e,center:Q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Q(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function K(t,e,n){return{x:e/t||0,y:n/t||0}}function G(t,e){return t===e?1:f(t)>=f(e)?t<0?2:4:e<0?8:16}function $(t,e,n){n||(n=q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function W(t,e,n){return n||(n=q),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}B.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(P(this.element),this.evWin,this.domHandler)}};var X={mousedown:1,mousemove:2,mouseup:4},Y="mousedown",J="mousemove mouseup";function Z(){this.evEl=Y,this.evWin=J,this.pressed=!1,B.apply(this,arguments)}_(Z,B,{handler:function(t){var e=X[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:U,srcEvent:t}))}});var tt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},et={2:M,3:"pen",4:U,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function it(){this.evEl=nt,this.evWin=rt,B.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),_(it,B,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=tt[r],o=et[t.pointerType]||t.pointerType,s=o==M,a=k(e,t.pointerId,"pointerId");1&i&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&i&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",at="touchstart touchmove touchend touchcancel";function ut(){this.evTarget=st,this.evWin=at,this.started=!1,B.apply(this,arguments)}function ct(t,e){var n=A(t.touches),r=A(t.changedTouches);return 12&e&&(n=j(n.concat(r),"identifier",!0)),[n,r]}_(ut,B,{handler:function(t){var e=ot[t.type];if(1===e&&(this.started=!0),this.started){var n=ct.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:M,srcEvent:t})}}});var lt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function ft(){this.evTarget=ht,this.targetIds={},B.apply(this,arguments)}function dt(t,e){var n=A(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=A(t.changedTouches),a=[],u=this.target;if(o=n.filter((function(t){return I(t.target,u)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[j(o.concat(a),"identifier",!0),a]:void 0}function pt(){B.apply(this,arguments);var t=w(this.handler,this);this.touch=new ft(this.manager,t),this.mouse=new Z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function mt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,gt.call(this,e)):12&t&&gt.call(this,e)}function gt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function yt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}_(ft,B,{handler:function(t){var e=lt[t.type],n=dt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:M,srcEvent:t})}}),_(pt,B,{handler:function(t,e,n){var r=n.pointerType==U;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(n.pointerType==M)mt.call(this,e,n);else if(r&&yt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=N(l.style,"touchAction"),bt=vt!==a,_t="compute",wt="auto",Et="manipulation",St="none",Tt="pan-x",Ot="pan-y",It=function(){if(!bt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Ct(t,e){this.manager=t,this.set(e)}Ct.prototype={set:function(t){t==_t&&(t=this.compute()),bt&&this.manager.element.style&&It[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(C(t,St))return St;var e=C(t,Tt),n=C(t,Ot);return e&&n?St:e||n?e?Tt:Ot:C(t,Et)?Et:wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=C(r,St)&&!It.none,o=C(r,Ot)&&!It["pan-y"],s=C(r,Tt)&&!It["pan-x"];if(i&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!s||!o)return i||o&&6&n||s&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var xt=32;function kt(t){this.options=u({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function At(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function jt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Nt(t,e){var n=e.manager;return n?n.get(t):t}function Rt(){kt.apply(this,arguments)}function Pt(){Rt.apply(this,arguments),this.pX=null,this.pY=null}function Dt(){Rt.apply(this,arguments)}function Lt(){kt.apply(this,arguments),this._timer=null,this._input=null}function Ft(){Rt.apply(this,arguments)}function Mt(){Rt.apply(this,arguments)}function Ut(){kt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function qt(t,e){return(e=e||{}).recognizers=S(e.recognizers,qt.defaults.preset),new Vt(t,e)}function Vt(t,e){this.options=u({},qt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(L?it:F?ft:D?pt:Z))(this,z),this.touchAction=new Ct(this,this.options.touchAction),Bt(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Bt(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,(function(i,o){n=N(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}kt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Nt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Nt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===k(e,t=Nt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Nt(t,this);var e=k(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+At(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+At(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=xt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=xt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(Rt,kt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:xt}}),_(Pt,Rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Ot),24&t&&e.push(Tt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Rt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=jt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),_(Dt,Rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[St]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),_(Lt,kt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return xt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),_(Ft,Rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[St]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),_(Mt,Rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Pt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=jt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),_(Ut,kt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Et]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||$(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return xt},failTimeout:function(){return this._timer=p((function(){this.state=xt}),this.options.interval,this),xt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),qt.VERSION="2.0.7",qt.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[Dt,{enable:!1},["rotate"]],[Mt,{direction:6}],[Pt,{direction:6},["swipe"]],[Ut],[Ut,{event:"doubletap",taps:2},["tap"]],[Lt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Vt.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof kt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=k(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return g(x(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return g(x(t),(function(t){e?n[t]&&n[t].splice(k(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Bt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(qt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:xt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Vt,Input:B,TouchAction:Ct,TouchInput:ft,MouseInput:Z,PointerEventInput:it,TouchMouseInput:pt,SingleTouchInput:ut,Recognizer:kt,AttrRecognizer:Rt,Tap:Ut,Pan:Pt,Swipe:Mt,Pinch:Dt,Rotate:Ft,Press:Lt,on:T,off:O,each:g,merge:b,extend:v,assign:u,inherit:_,bindFn:w,prefixed:N}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=qt,(r=(function(){return qt}).call(e,n,e,t))===a||(t.exports=r)}(window,document)},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},z6cu:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.f)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.d)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.d)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.g)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(m);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.g)(e,t)},createSubscribe:s.e,ErrorFactory:s.b,deepExtend:s.g}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.j)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.o)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL"),i=n("yLV6");let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Qb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=Object(r.Fb)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.Qb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Qb)(a).location;return new _(Object(r.Qb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u),r.Qb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u),r.Qb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=m(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(y),r.Qb(u))},t.normalizeQueryParams=g,t.joinWithSlash=p,t.stripTrailingSlash=m,t.\u0275prov=Object(r.Fb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new E(Object(r.Qb)(y),Object(r.Qb)(u))}function T(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const I=r.mb;class C{}let x=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.u))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function k(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let j=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.V)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new N(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.Q),r.Jb(r.L),r.Jb(r.s))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let R=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.Q),r.Jb(r.L))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class P{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.ub)(e)}'.`)}let L=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.l),r.Jb(r.t),r.Jb(r.E))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();class F{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class M{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const U=new M,q=new F;let V=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.rb)(e))return U;if(Object(r.qb)(e))return q;throw n=t,Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.ub)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Sb())},t.\u0275pipe=r.Ib({name:"async",type:t,pure:!1}),t})(),B=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[{provide:C,useClass:x}]}),t})();function z(t){return"browser"===t}function H(t){return"server"===t}let Q=(()=>{class t{}return t.\u0275prov=Object(r.Fb)({token:t,providedIn:"root",factory:()=>new K(Object(r.Qb)(a),window,Object(r.Qb)(r.m))}),t})();class K{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=G(this.window.history)||G(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function G(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class $ extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new $,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=X||(X=document.querySelector("base"),X)?X.getAttribute("href"):null;return null==e?null:(n=e,W||(W=document.createElement("a")),W.setAttribute("href",n),"/"===W.pathname.charAt(0)?W.pathname:"/"+W.pathname);var n}resetBaseElement(){X=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return k(document.cookie,t)}}let W,X=null;const Y=new r.q("TRANSITION_ID"),J=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Y,a,r.r],multi:!0}];class Z{static init(){Object(r.X)(new Z)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const tt=new r.q("EventManagerPlugins");let et=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(tt),r.Qb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let rt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),it=(()=>{class t extends rt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},st=/%COMP%/g;function at(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?at(t,i,n):(i=i.replace(st,t),n.push(i))}return n}function ut(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ct=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new lt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ht(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.R.Native:case r.R.ShadowDom:return new ft(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=at(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(et),r.Qb(it),r.Qb(r.c))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class lt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(ot[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=ot[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=ot[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.G.DashCase?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ut(n)):this.eventManager.addEventListener(t,e,ut(n))}}class ht extends lt{constructor(t,e,n,r){super(t),this.component=n;const i=at(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(st,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(st,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ft extends lt{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.R.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=at(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let dt=(()=>{class t extends nt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const pt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},mt=new r.q("HammerGestureConfig"),gt=new r.q("HammerLoader");let yt=(()=>{class t{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const vt=[{provide:tt,useClass:(()=>{class t extends nt{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!pt.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.`),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom Hammer.JS loader failed.`),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),o=function(t){r.runGuarded((function(){n(t)}))};return i.on(e,o),()=>{i.off(e,o),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(mt),r.Qb(r.Y),r.Qb(gt,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),multi:!0,deps:[a,mt,r.Y,[new r.A,gt]]},{provide:mt,useClass:yt,deps:[]}];let bt=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:vt}),t})();const _t=["alt","control","meta","shift"],wt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Et={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},St={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Tt=(()=>{class t extends nt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(_t.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Et.hasOwnProperty(e)&&(e=Et[e]))}return wt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),_t.forEach(r=>{r!=n&&(0,St[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const Ot=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){$.makeCurrent(),Z.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.tb)(document),document},deps:[]}],It=Object(r.S)(r.W,"browser",Ot),Ct=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:tt,useClass:dt,multi:!0,deps:[a,r.z,r.B]},{provide:tt,useClass:Tt,multi:!0,deps:[a]},[],{provide:ct,useClass:ct,deps:[et,it,r.c]},{provide:r.F,useExisting:ct},{provide:rt,useExisting:it},{provide:it,useClass:it,deps:[a]},{provide:r.M,useClass:r.M,deps:[r.z]},{provide:et,useClass:et,deps:[tt,r.z]},[]];let xt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Y,useExisting:r.c},J]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Qb(t,12))},providers:Ct,imports:[B,r.f]}),t})();"undefined"!=typeof window&&window;var kt=n("LRne"),At=n("Cfvw"),jt=n("XNiG"),Nt=n("9ppp");class Rt extends jt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Nt.a;return this._value}next(t){super.next(this._value=t)}}var Pt=n("z+Ro"),Dt=n("DH7j"),Lt=n("7o/Q");class Ft extends Lt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Mt extends Lt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ut=n("SeVD"),qt=n("HDdC");function Vt(t,e,n,r,i=new Mt(t,n,r)){if(!i.closed)return e instanceof qt.a?e.subscribe(i):Object(Ut.a)(e)(i)}var Bt=n("yCtX");const zt={};class Ht{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Qt(t,this.resultSelector))}}class Qt extends Ft{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(zt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Vt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===zt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Kt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Gt=n("EY2u");function $t(t){return new qt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(At.a)(n):Object(Gt.b)()).subscribe(e)})}var Wt=n("lJxs"),Xt=n("bHdf");function Yt(){return Object(Xt.a)(1)}function Jt(t,e){return function(n){return n.lift(new Zt(t,e))}}class Zt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new te(t,this.predicate,this.thisArg))}}class te extends Lt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const ee=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function ne(t){return function(e){return 0===t?Object(Gt.b)():e.lift(new re(t))}}class re{constructor(t){if(this.total=t,this.total<0)throw new ee}call(t,e){return e.subscribe(new ie(t,this.total))}}class ie extends Lt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function oe(t=ue){return e=>e.lift(new se(t))}class se{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ae(t,this.errorFactory))}}class ae extends Lt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(iS){t=iS}this.destination.error(t)}}}function ue(){return new Kt}function ce(t=null){return e=>e.lift(new le(t))}class le{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new he(t,this.defaultValue))}}class he extends Lt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var fe=n("SpAZ"),de=n("zx2A");function pe(t,e){return"function"==typeof e?n=>n.pipe(pe((n,r)=>Object(At.a)(t(n,r)).pipe(Object(Wt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new me(t))}class me{constructor(t){this.project=t}call(t,e){return e.subscribe(new ge(t,this.project))}}class ge extends de.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new de.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(de.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function ye(t){return e=>0===t?Object(Gt.b)():e.lift(new ve(t))}class ve{constructor(t){if(this.total=t,this.total<0)throw new ee}call(t,e){return e.subscribe(new be(t,this.total))}}class be extends Lt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function _e(...t){return Yt()(Object(kt.a)(...t))}function we(...t){const e=t[t.length-1];return Object(Pt.a)(e)?(t.pop(),n=>_e(t,n,e)):e=>_e(t,e)}function Ee(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Se(t,e,n))}}class Se{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Te(t,this.accumulator,this.seed,this.hasSeed))}}class Te extends Lt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Oe(t){return function(e){const n=new Ie(t),r=e.lift(n);return n.caught=r}}class Ie{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ce(t,this.selector,this.caught))}}class Ce extends de.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new de.a(this);this.add(r);const i=Object(de.c)(n,r);i!==r&&this.add(i)}}}var xe=n("5+tZ");function ke(t,e){return Object(xe.a)(t,e,1)}function Ae(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Jt((e,n)=>t(e,n,r)):fe.a,ye(1),n?ce(e):oe(()=>new Kt))}var je=n("vkgz"),Ne=n("quSY");class Re{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Pe(t,this.callback))}}class Pe extends Lt.a{constructor(t,e){super(t),this.add(new Ne.a(e))}}class De{constructor(t,e){this.id=t,this.url=e}}class Le extends De{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fe extends De{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Me extends De{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ue extends De{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qe extends De{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ve extends De{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Be extends De{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ze extends De{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class He extends De{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qe{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ke{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ge{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $e{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class We{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xe{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ye{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Je="primary";class Ze{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function tn(t){return new Ze(t)}function en(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function nn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function rn(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!on(t[i],e[i]))return!1;return!0}function on(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function sn(t){return Array.prototype.concat.apply([],t)}function an(t){return t.length>0?t[t.length-1]:null}function un(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function cn(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(At.a)(Promise.resolve(t)):Object(kt.a)(t)}function ln(t,e,n){return n?function(t,e){return rn(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!pn(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>on(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!pn(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!pn(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!pn(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class hn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tn(this.queryParams)),this._queryParamMap}toString(){return vn.serialize(this)}}class fn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,un(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bn(this)}}class dn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=tn(this.parameters)),this._parameterMap}toString(){return On(this)}}function pn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function mn(t,e){let n=[];return un(t.children,(t,r)=>{r===Je&&(n=n.concat(e(t,r)))}),un(t.children,(t,r)=>{r!==Je&&(n=n.concat(e(t,r)))}),n}class gn{}class yn{parse(t){const e=new An(t);return new hn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return bn(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return un(e.children,(e,n)=>{n!==Je&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=mn(e,(n,r)=>r===Je?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${bn(e)}/${n[0]}`:`${bn(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${wn(e)}=${wn(t)}`).join("&"):`${wn(e)}=${wn(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const vn=new yn;function bn(t){return t.segments.map(t=>On(t)).join("/")}function _n(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wn(t){return _n(t).replace(/%3B/gi,";")}function En(t){return _n(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sn(t){return decodeURIComponent(t)}function Tn(t){return Sn(t.replace(/\+/g,"%20"))}function On(t){return`${En(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${En(t)}=${En(e[t])}`).join("")}`;var e}const In=/^[^\/()?;=#]+/;function Cn(t){const e=t.match(In);return e?e[0]:""}const xn=/^[^=?&#]+/,kn=/^[^?&#]+/;class An{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fn([],{}):new fn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new fn(t,e)),n}parseSegment(){const t=Cn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new dn(Sn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Cn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Cn(this.remaining);t&&(n=t,this.capture(n))}t[Sn(e)]=Sn(n)}parseQueryParam(t){const e=function(t){const e=t.match(xn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(kn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Tn(e),i=Tn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Cn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Je);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new fn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class jn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Nn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Nn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Rn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Rn(t,this._root).map(t=>t.value)}}function Nn(t,e){if(t===e.value)return e;for(const n of e.children){const e=Nn(t,n);if(e)return e}return null}function Rn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Rn(t,n);if(r.length)return r.unshift(e),r}return[]}class Pn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Dn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Ln extends jn{constructor(t,e){super(t),this.snapshot=e,Bn(this,t)}toString(){return this.snapshot.toString()}}function Fn(t,e){const n=function(t,e){const n=new qn([],{},{},"",{},Je,e,null,t.root,-1,{});return new Vn("",new Pn(n,[]))}(t,e),r=new Rt([new dn("",{})]),i=new Rt({}),o=new Rt({}),s=new Rt({}),a=new Rt(""),u=new Mn(r,i,s,a,o,Je,e,n.root);return u.snapshot=n.root,new Ln(new Pn(u,[]),n)}class Mn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Wt.a)(t=>tn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Wt.a)(t=>tn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Un(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class qn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vn extends jn{constructor(t,e){super(e),this.url=t,Bn(this,e)}toString(){return zn(this._root)}}function Bn(t,e){e.value._routerState=t,e.children.forEach(e=>Bn(t,e))}function zn(t){const e=t.children.length>0?` { ${t.children.map(zn).join(", ")} } `:"";return`${t.value}${e}`}function Hn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,rn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),rn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!rn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),rn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Qn(t,e){return rn(t.params,e.params)&&function(t,e){return pn(t,e)&&t.every((t,n)=>rn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Qn(t.parent,e.parent))}function Kn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Gn(t){return"object"==typeof t&&null!=t&&t.outlets}function $n(t,e,n,r,i){let o={};return r&&un(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new hn(n.root===t?e:function t(e,n,r){const i={};return un(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new fn(e.segments,i)}(n.root,t,e),o,i)}class Wn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Kn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Gn);if(r&&r!==an(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Yn(t,e,n){if(t||(t=new fn([],{})),0===t.segments.length&&t.hasChildren())return Jn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Gn(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!nr(a,u,e))return o;r+=2}else{if(!nr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new fn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new fn(t.segments.slice(r.pathIndex),t.children),Jn(e,0,i)}return r.match&&0===i.length?new fn(t.segments,{}):r.match&&!t.hasChildren()?Zn(t,e,n):r.match?Jn(t,0,i):Zn(t,e,n)}function Jn(t,e,n){if(0===n.length)return new fn(t.segments,{});{const r=function(t){return Gn(t[0])?t[0].outlets:{[Je]:t}}(n),i={};return un(r,(n,r)=>{null!==n&&(i[r]=Yn(t.children[r],e,n))}),un(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new fn(t.segments,i)}}function Zn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Gn(o)){const t=tr(o.outlets);return new fn(r,t)}if(0===i&&Kn(n[0])){r.push(new dn(t.segments[e].path,n[0])),i++;continue}const s=Gn(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&Kn(a)?(r.push(new dn(s,er(a))),i+=2):(r.push(new dn(s,{})),i++)}return new fn(r,{})}function tr(t){const e={};return un(t,(t,n)=>{null!==t&&(e[n]=Zn(new fn([],{}),0,t))}),e}function er(t){const e={};return un(t,(t,n)=>e[n]=""+t),e}function nr(t,e,n){return t==n.path&&rn(e,n.parameters)}class rr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Hn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Dn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),un(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Dn(t),i=t.value.component?n.children:e;un(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Dn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Xe(t.value.snapshot))}),t.children.length&&this.forwardEvent(new $e(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Hn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ir(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ir(t){Hn(t.value),t.children.forEach(ir)}class or{constructor(t,e){this.routes=t,this.module=e}}function sr(t){return"function"==typeof t}function ar(t){return t instanceof hn}const ur=Symbol("INITIAL_VALUE");function cr(){return pe(t=>function(...t){let e=void 0,n=void 0;return Object(Pt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Dt.a)(t[0])&&(t=t[0]),Object(Bt.a)(t,n).lift(new Ht(e))}(...t.map(t=>t.pipe(ye(1),we(ur)))).pipe(Ee((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==ur)return t;if(r===ur&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ar(r))return r}return t},t)},ur),Jt(t=>t!==ur),Object(Wt.a)(t=>ar(t)?t:!0===t),ye(1)))}class lr{constructor(t){this.segmentGroup=t||null}}class hr{constructor(t){this.urlTree=t}}function fr(t){return new qt.a(e=>e.error(new lr(t)))}function dr(t){return new qt.a(e=>e.error(new hr(t)))}function pr(t){return new qt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class mr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Je).pipe(Object(Wt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Oe(t=>{if(t instanceof hr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof lr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Je).pipe(Object(Wt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Oe(t=>{if(t instanceof lr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new fn([],{[Je]:t}):t;return new hn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Wt.a)(t=>new fn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(kt.a)({});const n=[],r=[],i={};return un(t,(t,o)=>{const s=e(o,t).pipe(Object(Wt.a)(t=>i[o]=t));o===Je?n.push(s):r.push(s)}),kt.a.apply(null,n.concat(r)).pipe(Yt(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Jt((e,n)=>t(e,n,r)):fe.a,ne(1),n?ce(e):oe(()=>new Kt))}(),Object(Wt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(kt.a)(...n).pipe(ke(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Oe(t=>{if(t instanceof lr)return Object(kt.a)(null);throw t}))),Ae(t=>!!t),Oe((t,n)=>{if(t instanceof Kt||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(kt.a)(new fn([],{}));throw new lr(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return br(r)!==o?fr(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):fr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?dr(i):this.lineralizeSegments(n,i).pipe(Object(xe.a)(n=>{const i=new fn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=gr(e,r,i);if(!s)return fr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?dr(l):this.lineralizeSegments(r,l).pipe(Object(xe.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Wt.a)(t=>(n._loadedConfig=t,new fn(r,{})))):Object(kt.a)(new fn(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=gr(e,n,r);if(!i)return fr(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(xe.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>vr(t,e,n)&&br(n)!==Je)}(t,n,r)?{segmentGroup:yr(new fn(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&br(r)!==Je&&(n[br(r)]=new fn([],{}));return n}(r,new fn(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>vr(t,e,n))}(t,n,r)?{segmentGroup:yr(new fn(t.segments,function(t,e,n,r){const i={};for(const o of n)vr(t,e,o)&&!r[br(o)]&&(i[br(o)]=new fn([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(Wt.a)(t=>new fn(o,t))):0===r.length&&0===s.length?Object(kt.a)(new fn(o,{})):this.expandSegment(n,i,r,s,Je,!0).pipe(Object(Wt.a)(t=>new fn(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(kt.a)(new or(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(kt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(xe.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Wt.a)(t=>(e._loadedConfig=t,t))):function(t){return new qt.a(e=>e.error(en(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(kt.a)(new or([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(kt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&sr(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!sr(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return cn(o)});return Object(kt.a)(i).pipe(cr(),Object(je.a)(t=>{if(!ar(t))return;const e=en(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Wt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(kt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return pr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new hn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return un(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return un(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new fn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function gr(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||nn)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function yr(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new fn(t.segments.concat(e.segments),e.children)}return t}function vr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function br(t){return t.outlet||Je}class _r{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class wr{constructor(t,e){this.component=t,this.route=e}}function Er(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Dn(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!pn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pn(t.url,e.url)||!rn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qn(t,e)||!rn(t.queryParams,e.queryParams);case"paramsChange":default:return!Qn(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new _r(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new wr(u.outlet.component,a))}else a&&Tr(n,u,o),o.canActivateChecks.push(new _r(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),un(s,(t,e)=>Tr(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Sr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Tr(t,e,n){const r=Dn(t),i=t.value;un(r,(t,r)=>{Tr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new wr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Or(t,e){return null!==t&&e&&e(new We(t)),Object(kt.a)(!0)}function Ir(t,e){return null!==t&&e&&e(new Ge(t)),Object(kt.a)(!0)}function Cr(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(kt.a)(!0);const i=r.map(r=>$t(()=>{const i=Sr(r,e,n);let o;if(function(t){return t&&sr(t.canActivate)}(i))o=cn(i.canActivate(e,t));else{if(!sr(i))throw new Error("Invalid CanActivate guard");o=cn(i(e,t))}return o.pipe(Ae())}));return Object(kt.a)(i).pipe(cr())}function xr(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>$t(()=>{const i=e.guards.map(i=>{const o=Sr(i,e.node,n);let s;if(function(t){return t&&sr(t.canActivateChild)}(o))s=cn(o.canActivateChild(r,t));else{if(!sr(o))throw new Error("Invalid CanActivateChild guard");s=cn(o(r,t))}return s.pipe(Ae())});return Object(kt.a)(i).pipe(cr())}));return Object(kt.a)(i).pipe(cr())}class kr{}class Ar{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Rr(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Je),n=new qn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Je,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Pn(n,e),i=new Vn(this.url,r);return this.inheritParamsAndData(i._root),Object(kt.a)(i)}catch(iS){return new qt.a(e=>e.error(iS))}}inheritParamsAndData(t){const e=t.value,n=Un(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=mn(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===Je?-1:e.value.outlet===Je?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(iS){if(!(iS instanceof kr))throw iS}if(this.noLeftoversInUrl(e,n,r))return[];throw new kr}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new kr;if((t.outlet||Je)!==r)throw new kr;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?an(n).parameters:{};i=new qn(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lr(t),r,t.component,t,jr(e),Nr(e)+n.length,Fr(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new kr;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||nn)(n,t,e);if(!r)throw new kr;const i={};un(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new qn(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lr(t),r,t.component,t,jr(e),Nr(e)+o.length,Fr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Rr(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Pn(i,t)]}if(0===a.length&&0===c.length)return[new Pn(i,[])];const l=this.processSegment(a,u,c,Je);return[new Pn(i,l)]}}function jr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Nr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Rr(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Pr(t,e,n)&&Dr(n)!==Je)}(t,n,r)){const i=new fn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Dr(o)!==Je){const n=new fn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Dr(o)]=n}return i}(t,e,r,new fn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Pr(t,e,n))}(t,n,r)){const o=new fn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Pr(t,n,a)&&!i[Dr(a)]){const n=new fn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Dr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new fn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Pr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Dr(t){return t.outlet||Je}function Lr(t){return t.data||{}}function Fr(t){return t.resolve||{}}function Mr(t){return function(e){return e.pipe(pe(e=>{const n=t(e);return n?Object(At.a)(n).pipe(Object(Wt.a)(()=>e)):Object(At.a)([e])}))}}class Ur extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let qr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Kb(0,"router-outlet")},directives:function(){return[ni]},encapsulation:2}),t})();function Vr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Br(r,zr(e,r))}}function Br(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Je)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Vr(t.children,e)}function zr(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Hr(t){const e=t.children&&t.children.map(Hr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Je&&(n.component=qr),n}const Qr=new r.q("ROUTES");class Kr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Wt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new or(sn(r.injector.get(Qr)).map(Hr),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(At.a)(this.loader.load(t)):cn(t()).pipe(Object(xe.a)(t=>t instanceof r.v?Object(kt.a)(t):Object(At.a)(this.compiler.compileModuleAsync(t))))}}class Gr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new $r,this.attachRef=null}}class $r{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Gr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Wr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Xr(t){throw t}function Yr(t,e,n){return e.parse("/")}function Jr(t,e){return Object(kt.a)(null)}let Zr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new jt.a,this.errorHandler=Xr,this.malformedUriErrorHandler=Yr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Jr,afterPreactivation:Jr},this.urlHandlingStrategy=new Wr,this.routeReuseStrategy=new Ur,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.Y);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new hn(new fn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Kr(s,a,t=>this.triggerEvent(new Qe(t)),t=>this.triggerEvent(new Ke(t))),this.routerState=Fn(this.currentUrlTree,this.rootComponentType),this.transitions=new Rt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Jt(t=>0!==t.id),Object(Wt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),pe(t=>{let n=!1,r=!1;return Object(kt.a)(t).pipe(Object(je.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),pe(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(kt.a)(t).pipe(pe(t=>{const n=this.transitions.getValue();return e.next(new Le(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Gt.a:[t]}),pe(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(pe(t=>function(t,e,n,r,i){return new mr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Wt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(je.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(xe.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Ar(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Wt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(je.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(je.a)(t=>{const n=new qe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Le(n,this.serializeUrl(r),i,o);e.next(a);const u=Fn(r,this.rootComponentType).snapshot;return Object(kt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Gt.a}),Mr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(je.a)(t=>{const e=new Ve(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Wt.a)(t=>Object.assign(Object.assign({},t),{guards:Er(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(xe.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(kt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(At.a)(t).pipe(Object(xe.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(kt.a)(!0);const s=o.map(o=>{const s=Sr(o,e,i);let a;if(function(t){return t&&sr(t.canDeactivate)}(s))a=cn(s.canDeactivate(t,e,n,r));else{if(!sr(s))throw new Error("Invalid CanDeactivate guard");a=cn(s(t,e,n,r))}return a.pipe(Ae())});return Object(kt.a)(s).pipe(cr())}(t.component,t.route,n,e,r)),Ae(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(xe.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(At.a)(e).pipe(ke(e=>Object(At.a)([Ir(e.route.parent,r),Or(e.route,r),xr(t,e.path,n),Cr(t,e.route,n)]).pipe(Yt(),Ae(t=>!0!==t,!0))),Ae(t=>!0!==t,!0))}(r,o,t,e):Object(kt.a)(n)),Object(Wt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(je.a)(t=>{if(ar(t.guardsResult)){const e=en(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(je.a)(t=>{const e=new Be(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Jt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Me(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Mr(t=>{if(t.guards.canActivateChecks.length)return Object(kt.a)(t).pipe(Object(je.a)(t=>{const e=new ze(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),pe(t=>{let n=!1;return Object(kt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(xe.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(kt.a)(t);let o=0;return Object(At.a)(n).pipe(ke(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(kt.a)({});const o={};return Object(At.a)(i).pipe(Object(xe.a)(i=>function(t,e,n,r){const i=Sr(t,e,r);return cn(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(je.a)(t=>{o[i]=t}))),ne(1),Object(xe.a)(()=>Object.keys(o).length===i.length?Object(kt.a)(o):Gt.a))}(t._resolve,t,e,r).pipe(Object(Wt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Un(t,n).resolve),null)))}(t.route,e,r,i)),Object(je.a)(()=>o++),ne(1),Object(xe.a)(e=>o===n.length?Object(kt.a)(t):Gt.a))}))}),Object(je.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Me(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(je.a)(t=>{const e=new He(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Mr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Wt.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Pn(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Mn(new Rt((i=n.value).url),new Rt(i.params),new Rt(i.queryParams),new Rt(i.fragment),new Rt(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new Pn(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Ln(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(je.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Wt.a)(t=>(new rr(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(je.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Me(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Re(i))),Oe(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ar(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Me(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ue(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Pp){t.reject(Pp)}}var i;return Gt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Vr(t),this.config=t.map(Hr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.V)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return $n(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Wn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return un(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Wn(n,e,r)}(n);if(o.toRoot())return $n(e.root,new fn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Xn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Xn(t,t===e.root,0)}const r=Kn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Xn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Jn(s.segmentGroup,s.index,o.commands):Yn(s.segmentGroup,s.index,o.commands);return $n(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.V)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=ar(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(iS){e=this.malformedUriErrorHandler(iS,this.urlSerializer,t)}return e}isActive(t,e){if(ar(t))return ln(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ln(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Fe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.N),r.Qb(gn),r.Qb($r),r.Qb(E),r.Qb(r.r),r.Qb(r.w),r.Qb(r.i),r.Qb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),ti=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new jt.a,this.subscription=t.events.subscribe(t=>{t instanceof Fe&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.V)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:ei(this.skipLocationChange),replaceUrl:ei(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ei(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ei(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Zr),r.Jb(Mn),r.Jb(y))},t.\u0275dir=r.Eb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Tb("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)})),2&t&&(r.Pb("href",e.href,r.hc),r.Ab("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.xb]}),t})();function ei(t){return""===t||!!t}let ni=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Je,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ri(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb($r),r.Jb(r.Q),r.Jb(r.j),r.Rb("name"),r.Jb(r.h))},t.\u0275dir=r.Eb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ri{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Mn?this.route:t===$r?this.childContexts:this.parent.get(t,e)}}class ii{}class oi{preload(t,e){return Object(kt.a)(null)}}let si=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Kr(e,n,e=>t.triggerEvent(new Qe(e)),e=>t.triggerEvent(new Ke(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Jt(t=>t instanceof Fe),ke(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(At.a)(n).pipe(Object(Xt.a)(),Object(Wt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(xe.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Zr),r.Qb(r.w),r.Qb(r.i),r.Qb(r.r),r.Qb(ii))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),ai=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Le?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fe&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ye&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ye(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Zr),r.Qb(Q),r.Qb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const ui=new r.q("ROUTER_CONFIGURATION"),ci=new r.q("ROUTER_FORROOT_GUARD"),li=[E,{provide:gn,useClass:yn},{provide:Zr,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new Zr(null,t,e,n,r,i,o,sn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[gn,$r,E,r.r,r.w,r.i,Qr,ui,[class{},new r.A],[class{},new r.A]]},$r,{provide:Mn,useFactory:function(t){return t.routerState.root},deps:[Zr]},{provide:r.w,useClass:r.K},si,oi,class{preload(t,e){return e().pipe(Oe(()=>Object(kt.a)(null)))}},{provide:ui,useValue:{enableTracing:!1}}];function hi(){return new r.y("Router",Zr)}let fi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[li,gi(e),{provide:ci,useFactory:mi,deps:[[Zr,new r.A,new r.J]]},{provide:ui,useValue:n||{}},{provide:y,useFactory:pi,deps:[u,[new r.p(b),new r.A],ui]},{provide:ai,useFactory:di,deps:[Zr,Q,ui]},{provide:ii,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:oi},{provide:r.y,multi:!0,useFactory:hi},[yi,{provide:r.d,multi:!0,useFactory:vi,deps:[yi]},{provide:_i,useFactory:bi,deps:[yi]},{provide:r.b,multi:!0,useExisting:_i}]]}}static forChild(e){return{ngModule:t,providers:[gi(e)]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Qb(ci,8),r.Qb(Zr,8))}}),t})();function di(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ai(t,e,n)}function pi(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function mi(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function gi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Qr,multi:!0,useValue:t}]}let yi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new jt.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Zr),r=this.injector.get(ui);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(kt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(ui),n=this.injector.get(si),i=this.injector.get(ai),o=this.injector.get(Zr),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.r))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function vi(t){return t.appInitializer.bind(t)}function bi(t){return t.bootstrapListener.bind(t)}const _i=new r.q("Router Initializer");class wi{}const Ei="*";function Si(t,e=null){return{type:4,styles:e,timings:t}}function Ti(t,e=null){return{type:2,steps:t,options:e}}function Oi(t){return{type:6,styles:t,offset:null}}function Ii(t){return{type:5,steps:t}}function Ci(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function xi(t){Promise.resolve(null).then(t)}class ki{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){xi(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Ai{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?xi(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const ji=[Oi({transform:"translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg)",offset:.15}),Oi({transform:"translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg)",offset:.3}),Oi({transform:"translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg)",offset:.45}),Oi({transform:"translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg)",offset:.6}),Oi({transform:"translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg)",offset:.75}),Oi({transform:"none",offset:1})],Ni=[Oi({transform:"skewX(-12.5deg) skewY(-12.5deg)",offset:.111}),Oi({transform:"skewX(6.25deg) skewY(6.25deg)",offset:.222}),Oi({transform:"skewX(-3.125deg) skewY(-3.125deg)",offset:.333}),Oi({transform:"skewX(1.5625deg) skewY(1.5625deg)",offset:.444}),Oi({transform:"skewX(-0.78125deg) skewY(-0.78125deg)",offset:.555}),Oi({transform:"skewX(0.390625deg) skewY(0.390625deg)",offset:.666}),Oi({transform:"skewX(0.390625deg) skewY(0.390625deg)",offset:.777}),Oi({transform:"skewX(-0.1953125deg) skewY(-0.1953125deg)",offset:.888}),Oi({transform:"none",offset:1})],Ri=[Oi({transform:"rotate3d(0, 0, 1, 15deg)",offset:.2}),Oi({transform:"rotate3d(0, 0, 1, -10deg)",offset:.4}),Oi({transform:"rotate3d(0, 0, 1, 5deg)",offset:.6}),Oi({transform:"rotate3d(0, 0, 1, -5deg)",offset:.8}),Oi({transform:"none",offset:1})],Pi=[Oi({transform:"translate3d(0, 0, 0)",offset:0}),Oi({transform:"translate3d(-150%, 0, 0)",opacity:0,offset:1})],Di=[Oi({transform:"scale3d(.475, .475, .475) translate3d(-42px, 0, 0)",offset:.4}),Oi({transform:"scale(.1) translate3d(2000px, 0, 0)","transform-origin":"right center",offset:1})],Li=[Oi({transform:"rotate3d(0, 0, 0, 0deg)",opacity:1,"transform-origin":"right bottom",offset:0}),Oi({transform:"rotate3d(0, 0, 1, 90deg)",opacity:0,"transform-origin":"right bottom",offset:1})],Fi=[Oi({transform:"perspective(400px)",offset:0}),Oi({transform:"perspective(400px) rotate3d(0, 1, 0, -15deg)",opacity:1,offset:.33}),Oi({transform:"perspective(400px) rotate3d(0, 1, 0, 90deg)",opacity:0,offset:1})];class Mi{}class Ui{}class qi{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof qi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new qi;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof qi?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Vi{encodeKey(t){return Bi(t)}encodeValue(t){return Bi(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Bi(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class zi{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Vi,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new zi({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Hi(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Qi(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Ki(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Gi{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new qi),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new zi,this.urlWithParams=e}serializeBody(){return null===this.body?null:Hi(this.body)||Qi(this.body)||Ki(this.body)||"string"==typeof this.body?this.body:this.body instanceof zi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ki(this.body)?null:Qi(this.body)?this.body.type||null:Hi(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Gi(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var $i=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Wi{constructor(t,e=200,n="OK"){this.headers=t.headers||new qi,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Xi extends Wi{constructor(t={}){super(t),this.type=$i.ResponseHeader}clone(t={}){return new Xi({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Yi extends Wi{constructor(t={}){super(t),this.type=$i.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Yi({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ji extends Wi{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Zi(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let to=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Gi)r=t;else{let i=void 0;i=n.headers instanceof qi?n.headers:new qi(n.headers);let o=void 0;n.params&&(o=n.params instanceof zi?n.params:new zi({fromObject:n.params})),r=new Gi(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(kt.a)(r).pipe(ke(t=>this.handler.handle(t)));if(t instanceof Gi||"events"===n.observe)return i;const o=i.pipe(Jt(t=>t instanceof Yi));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Wt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Wt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Wt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Wt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new zi).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Zi(n,e))}post(t,e,n={}){return this.request("POST",t,Zi(n,e))}put(t,e,n={}){return this.request("PUT",t,Zi(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Mi))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class eo{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const no=new r.q("HTTP_INTERCEPTORS");let ro=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const io=/^\)\]\}',?\n/;class oo{}let so=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),ao=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new qi(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Xi({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(io,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Yi({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Ji({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Ji({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:$i.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:$i.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:$i.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(oo))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const uo=new r.q("XSRF_COOKIE_NAME"),co=new r.q("XSRF_HEADER_NAME");class lo{}let ho,fo=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=k(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(r.B),r.Qb(uo))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),po=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(lo),r.Qb(co))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),mo=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(no,[]);this.chain=t.reduceRight((t,e)=>new eo(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ui),r.Qb(r.r))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),go=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:po,useClass:ro}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:uo,useValue:e.cookieName}:[],e.headerName?{provide:co,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[po,{provide:no,useExisting:po,multi:!0},{provide:lo,useClass:fo},{provide:uo,useValue:"XSRF-TOKEN"},{provide:co,useValue:"X-XSRF-TOKEN"}]}),t})(),yo=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[to,{provide:Mi,useClass:mo},ao,{provide:Ui,useExisting:ao},so,{provide:oo,useExisting:so}],imports:[[go.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),vo=(()=>{class t{constructor(t){this.http=t,this.url=""}nextQuestion(){return"question..."}getProducts(){return this.http.get("https://makeup-api.herokuapp.com/api/v1/products.json?brand=maybelline&tags=vegan")}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(to))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();try{ho="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(CO){ho=!1}let bo=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?z(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ho)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.B))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Qb)(r.B))},token:t,providedIn:"root"}),t})(),_o=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})();var wo=n("D0XW");class Eo{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new So(t,this.dueTime,this.scheduler))}}class So extends Lt.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(To,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function To(t){t.debouncedNext()}"undefined"!=typeof Element&&Element;const Oo="cdk-high-contrast-black-on-white",Io="cdk-high-contrast-white-on-black",Co="cdk-high-contrast-active";let xo=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Co),t.remove(Oo),t.remove(Io);const e=this.getHighContrastMode();1===e?(t.add(Co),t.add(Oo)):2===e&&(t.add(Co),t.add(Io))}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(bo),r.Qb(a))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Qb)(bo),Object(r.Qb)(a))},token:t,providedIn:"root"}),t})(),ko=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})();const Ao=new r.P("10.2.7");function jo(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function No(t){switch(t.length){case 0:return new ki;case 1:return t[0];default:return new Ai(t)}}function Ro(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case Ei:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function Po(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Do(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Do(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Do(n,"destroy",t)))}}function Do(t,e,n){const r=n.totalTime,i=Lo(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Lo(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Fo(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Mo(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Uo=(t,e)=>!1,qo=(t,e)=>!1,Vo=(t,e,n)=>[];const Bo=jo();(Bo||"undefined"!=typeof Element)&&(Uo=(t,e)=>t.contains(e),qo=(()=>{if(Bo||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):qo}})(),Vo=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let zo=null,Ho=!1;function Qo(t){zo||(zo=("undefined"!=typeof document?document.body:null)||{},Ho=!!zo.style&&"WebkitAppearance"in zo.style);let e=!0;return zo.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in zo.style,!e&&Ho)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in zo.style),e}const Ko=qo,Go=Uo,$o=Vo;function Wo(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Xo=(()=>{class t{validateStyleProperty(t){return Qo(t)}matchesElement(t,e){return Ko(t,e)}containsElement(t,e){return Go(t,e)}query(t,e,n){return $o(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new ki(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Yo=(()=>{class t{}return t.NOOP=new Xo,t})();const Jo="ng-enter",Zo="ng-leave",ts="ng-trigger",es=".ng-trigger",ns="ng-animating",rs=".ng-animating";function is(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:os(parseFloat(e[1]),e[2])}function os(t,e){switch(e){case"s":return 1e3*t;default:return t}}function ss(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=os(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=os(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function as(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function us(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else as(t,n);return n}function cs(t,e,n){return n?e+":"+n+";":""}function ls(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=cs(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=cs(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function hs(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=bs(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),jo()&&ls(t))}function fs(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=bs(e);t.style[n]=""}),jo()&&ls(t))}function ds(t){return Array.isArray(t)?1==t.length?t[0]:Ti(t):t}const ps=new RegExp("{{\\s*(.+?)\\s*}}","g");function ms(t){let e=[];if("string"==typeof t){let n;for(;n=ps.exec(t);)e.push(n[1]);ps.lastIndex=0}return e}function gs(t,e,n){const r=t.toString(),i=r.replace(ps,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function ys(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const vs=/-+([a-z0-9])/g;function bs(t){return t.replace(vs,(...t)=>t[1].toUpperCase())}function _s(t,e){return 0===t||0===e}function ws(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach((function(e){n[e]=Ss(t,e)}))}}return e}function Es(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Ss(t,e){return window.getComputedStyle(t)[e]}const Ts="*";function Os(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(xs(i,s)),"<"!=o[0]||i==Ts&&s==Ts||e.push(xs(s,i))}(t,n,e)):n.push(t),n}const Is=new Set(["true","1"]),Cs=new Set(["false","0"]);function xs(t,e){const n=Is.has(t)||Cs.has(t),r=Is.has(e)||Cs.has(e);return(i,o)=>{let s=t==Ts||t==i,a=e==Ts||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?Is.has(t):Cs.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?Is.has(e):Cs.has(e)),s&&a}}const ks=new RegExp("s*:selfs*,?","g");function As(t,e,n){return new js(t).build(e,n)}class js{constructor(t){this._driver=t}build(t,e){const n=new Ns(e);return this._resetContextStyleTimingState(n),Es(this,ds(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(Rs(t)){const e=t;Object.keys(e).forEach(t=>{ms(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=ys(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Es(this,ds(t.animation),e);return{type:1,matchers:Os(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Ps(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Es(this,t,e)),options:Ps(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Es(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Ps(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Ds(ss(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Ds(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||ss(r,e),Ds(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Oi({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=Oi(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Ei?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Rs(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=ms(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Rs(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Rs(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Es(this,ds(t.animation),e),options:Ps(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ps(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ps(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(ks,"")),[t=t.replace(/@\*/g,es).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,rs),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Fo(e.collectedStyles,e.currentQuerySelector,{});const s=Es(this,ds(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:Ps(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:ss(t.timings,e.errors,!0);return{type:12,animation:Es(this,ds(t.animation),e),timings:n,options:null}}}class Ns{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Rs(t){return!Array.isArray(t)&&"object"==typeof t}function Ps(t){var e;return t?(t=as(t)).params&&(t.params=(e=t.params)?as(e):null):t={},t}function Ds(t,e,n){return{duration:t,delay:e,easing:n}}function Ls(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Fs{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Ms=new RegExp(":enter","g"),Us=new RegExp(":leave","g");function qs(t,e,n,r,i,o={},s={},a,u,c=[]){return(new Vs).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class Vs{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new Fs;const l=new zs(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),Es(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Ls(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?is(n.duration):null,o=null!=n.delay?is(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Es(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Bs);const t=is(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Es(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?is(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),Es(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return ss(e.params?gs(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?is(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Bs);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),Es(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;Es(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const Bs={};class zs{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Bs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Hs(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=is(n.duration)),null!=n.delay&&(r.delay=is(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=gs(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new zs(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=Bs,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Qs(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(Ms,"."+this._enterClassName)).replace(Us,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class Hs{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Hs(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Ei,this._currentKeyframe[t]=Ei}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Ei})):us(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=gs(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Ei),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=us(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==Ei&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?ys(t.values()):[],o=e.size?ys(e.values()):[];if(n){const t=r[0],e=as(t);t.offset=0,e.offset=1,r=[t,e]}return Ls(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class Qs extends Hs{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=us(t[0],!1);a.offset=0,i.push(a);const u=us(t[0],!1);u.offset=Ks(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=us(t[r],!1);s.offset=Ks((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return Ls(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Ks(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Gs{}class $s extends Gs{normalizePropertyName(t,e){return bs(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(Ws[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const Ws=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Xs(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const Ys={};class Js{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Ys,f=this.buildStyles(n,s&&s.params||Ys,l),d=a&&a.params||Ys,p=this.buildStyles(r,d,l),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},_=c?[]:qs(t,e,this.ast.animation,i,o,f,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return Xs(e,this._triggerName,n,r,v,f,p,[],[],g,y,w,l);_.forEach(t=>{const n=t.element,r=Fo(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Fo(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const E=ys(m.values());return Xs(e,this._triggerName,n,r,v,f,p,_,E,g,y,w)}}class Zs{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=as(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=gs(o,r,e)),n[t]=o})}}),n}}class ta{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Zs(t.style,t.options&&t.options.params||{})}),ea(this.states,"true","1"),ea(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Js(t,e,this.states))}),this.fallbackTransition=new Js(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function ea(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const na=new Fs;class ra{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=As(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=Ro(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=qs(this._driver,e,i,Jo,Zo,{},{},n,na,r),o.forEach(t=>{const e=Fo(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Ei)})});const a=No(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=Lo(e,"","","");return Po(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const ia="ng-animate-queued",oa="ng-animate-disabled",sa=".ng-animate-disabled",aa=[],ua={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ca={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class la{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=as(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const ha="void",fa=new la(ha);class da{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,_a(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=Fo(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=Fo(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(_a(t,ts),_a(t,"ng-trigger-"+e),a[e]=fa),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new ma(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(_a(t,ts),_a(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new la(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=fa),u.value!==ha&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{fs(t,n),hs(t,r)})}return}const c=Fo(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(_a(t,ia),o.onStart(()=>{wa(t,ia)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,es,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,ha,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&No(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||fa,s=new la(ha),a=new ma(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==ua||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){_a(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=Lo(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Po(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class pa{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new da(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(ga(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!ga(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),_a(t,oa)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),wa(t,oa))}removeNode(t,e,n,r){if(ga(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return ga(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,es,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,rs,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return No(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=ua,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,sa)&&this.markElementAsDisabled(t,!1),this.driver.query(t,sa,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)_a(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?No(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new Fs,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=ba(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=Jo+p++;d.set(e,n),t.forEach(t=>_a(t,n))});const m=[],g=new Set,y=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=ba(h,Array.from(g));b.forEach((t,e)=>{const n=Zo+p++;v.set(e,n),t.forEach(t=>_a(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>wa(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>wa(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>fs(i,p.fromStyles)),e.onDestroy(()=>hs(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>fs(i,p.fromStyles)),e.onDestroy(()=>hs(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Fo(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,S=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Fo(E,e,[]).push(t),t.destroy()})});const T=m.filter(t=>Sa(t,a,u)),O=new Map;va(O,this.driver,y,u,Ei).forEach(t=>{Sa(t,a,u)&&T.push(t)});const I=new Map;f.forEach((t,e)=>{va(I,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=O.get(t),n=I.get(t);O.set(t,Object.assign(Object.assign({},e),n))});const C=[],x=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>hs(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,I,O);if(o.setRealPlayer(n),t===k)C.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=No(e)),r.push(o)}}else fs(e,s.fromStyles),o.onDestroy(()=>hs(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=No(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<m.length;A++){const t=m[A],e=t.__ng_removed;if(wa(t,Zo),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,rs,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Ea(this,t,r):this.processLeaveNode(t)}return m.length=0,C.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),C}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==ha;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=Fo(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}fs(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new ki(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof Ai?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||aa).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=o.get(h),y=Ro(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),d){const e=new ma(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{Fo(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>_a(t,ns));const f=No(h);return f.onDestroy(()=>{c.forEach(t=>wa(t,ns)),hs(a,e.toStyles)}),l.forEach(t=>{Fo(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new ki(t.duration,t.delay)}}class ma{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new ki,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Po(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Fo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ga(t){return t&&1===t.nodeType}function ya(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function va(t,e,n,r,i){const o=[];n.forEach(t=>o.push(ya(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=ca,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>ya(t,o[a++])),s}function ba(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=i.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function _a(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function wa(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Ea(t,e,n){No(n).onDone(()=>t.processLeaveNode(e))}function Sa(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Ta{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new pa(t,e,n),this._timelineEngine=new ra(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=As(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new ta(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Mo(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Mo(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Oa(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=Ca(e[0]),e.length>1&&(r=Ca(e[e.length-1]))):e&&(n=Ca(e)),n||r?new Ia(t,n,r):null}let Ia=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&hs(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(hs(this._element,this._initialStyles),this._endStyles&&(hs(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(fs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fs(this._element,this._endStyles),this._endStyles=null),hs(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Ca(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];xa(i)&&(e=e||{},e[i]=t[i])}return e}function xa(t){return"display"===t||"position"===t}const ka="animation",Aa="animationend";class ja{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Fa(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),La(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Da(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Na(this._element,this._name,"paused")}resume(){Na(this._element,this._name,"running")}setPosition(t){const e=Ra(this._element,this._name);this._position=t*this._duration,La(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Da(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Fa(t,"").split(","),r=Pa(n,e);r>=0&&(n.splice(r,1),La(t,"",n.join(",")))}(this._element,this._name))}}function Na(t,e,n){La(t,"PlayState",n,Ra(t,e))}function Ra(t,e){const n=Fa(t,"");return n.indexOf(",")>0?Pa(n.split(","),e):Pa([n],e)}function Pa(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Da(t,e,n){n?t.removeEventListener(Aa,e):t.addEventListener(Aa,e)}function La(t,e,n,r){const i=ka+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Fa(t,e){return t.style[ka+e]}class Ma{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ja(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Ss(this.element,n))})}this.currentSnapshot=t}}class Ua extends ki{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Wo(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class qa{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return Qo(t)}matchesElement(t,e){return Ko(t,e)}containsElement(t,e){return Go(t,e)}query(t,e,n){return $o(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Wo(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof Ma),u={};_s(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=ws(t,e,u));if(0==n)return new Ua(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const f=Oa(t,e),d=new Ma(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class Va{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Ss(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Ba{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(za().toString()),this._cssKeyframesDriver=new qa}validateStyleProperty(t){return Qo(t)}matchesElement(t,e){return Ko(t,e)}containsElement(t,e){return Go(t,e)}query(t,e,n){return $o(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof Va);_s(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Oa(t,e=ws(t,e=e.map(t=>us(t,!1)),u));return new Va(t,e,a,l)}}function za(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let Ha=(()=>{class t extends wi{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.R.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Ti(t):t;return Ga(this._renderer,null,e,"register",[n]),new Qa(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.F),r.Qb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class Qa extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Ka(this._id,t,e||{},this._renderer)}}class Ka{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Ga(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function Ga(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const $a="@",Wa="@.disabled";let Xa=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Ya("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new Ja(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.F),r.Qb(Ta),r.Qb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class Ya{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==$a&&e==Wa?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Ja extends Ya{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==$a?"."==e.charAt(1)&&e==Wa?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==$a){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=$a&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Za=(()=>{class t extends Ta{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(Yo),r.Qb(Gs))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const tu=new r.q("AnimationModuleType"),eu=[{provide:Yo,useFactory:function(){return"function"==typeof za()?new Ba:new qa}},{provide:tu,useValue:"BrowserAnimations"},{provide:wi,useClass:Ha},{provide:Gs,useFactory:function(){return new $s}},{provide:Ta,useClass:Za},{provide:r.F,useFactory:function(t,e,n){return new Xa(t,e,n)},deps:[ct,Ta,r.z]}];let nu=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:eu,imports:[xt]}),t})();const ru=new r.P("10.2.7"),iu=new r.q("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let ou,su=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const t=this._document||document;return"object"==typeof t&&t?t:null}_getWindow(){const t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return Object(r.V)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){const t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(t||!e||!e.body||"function"!=typeof getComputedStyle)return;const n=e.createElement("div");n.classList.add("mat-theme-loaded-marker"),e.body.appendChild(n);const r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(n)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&ru.full!==Ao.full&&console.warn("The Angular Material version ("+ru.full+") does not match the Angular CDK version ("+Ao.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Qb(xo),r.Qb(iu,8),r.Qb(a,8))},imports:[[ko],ko]}),t})();function au(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),e&&this._elementRef.nativeElement.classList.add("mat-"+e),this._color=e)}}}try{ou="undefined"!=typeof Intl}catch(CO){ou=!1}let uu=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[su,_o],su]}),t})();var cu=n("n6bG");function lu(t,e,n,r){return Object(cu.a)(n)&&(r=n,n=void 0),r?lu(t,e,n).pipe(Object(Wt.a)(t=>Object(Dt.a)(t)?r(...t):r(t))):new qt.a(r=>{!function t(e,n,r,i,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,o),s=()=>t.removeEventListener(n,r,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),s=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),s=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)t(e[s],n,r,i,o)}i.add(s)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)})}const hu=["primaryValueBar"];class fu{constructor(t){this._elementRef=t}}const du=au(fu,"primary"),pu=new r.q("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=Object(r.U)(a),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}});let mu=0,gu=(()=>{class t extends du{constructor(t,e,n,i){super(t),this._elementRef=t,this._ngZone=e,this._animationMode=n,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new r.n,this._animationEndSubscription=Ne.a.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+mu++;const o=i?i.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${o}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===n}get value(){return this._value}set value(t){this._value=yu(function(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}(t)||0)}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=yu(t||0)}_primaryTransform(){return{transform:`scaleX(${this.value/100})`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scaleX(${this.bufferValue/100})`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=lu(t,"transitionend").pipe(Jt(e=>e.target===t)).subscribe(()=>{"determinate"!==this.mode&&"buffer"!==this.mode||this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.l),r.Jb(r.z),r.Jb(tu,8),r.Jb(pu,8))},t.\u0275cmp=r.Db({type:t,selectors:[["mat-progress-bar"]],viewQuery:function(t,e){var n;1&t&&r.pc(hu,!0),2&t&&r.ec(n=r.Ub())&&(e._primaryValueBar=n.first)},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,e){2&t&&(r.Ab("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),r.Bb("_mat-animation-noopable",e._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[r.wb],decls:9,vars:4,consts:[["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,e){1&t&&(r.Wb(),r.Mb(0,"svg",0),r.Mb(1,"defs"),r.Mb(2,"pattern",1),r.Kb(3,"circle",2),r.Lb(),r.Lb(),r.Kb(4,"rect",3),r.Lb(),r.Vb(),r.Kb(5,"div",4),r.Kb(6,"div",5,6),r.Kb(8,"div",7)),2&t&&(r.zb(2),r.cc("id",e.progressbarId),r.zb(2),r.Ab("fill",e._rectangleFillValue),r.zb(1),r.cc("ngStyle",e._bufferTransform()),r.zb(1),r.cc("ngStyle",e._primaryTransform()))},directives:[L],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),t})();function yu(t,e=0,n=100){return Math.max(e,Math.min(n,t))}let vu=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[B,su],su]}),t})();const bu=["*",[["mat-card-footer"]]],_u=["*","mat-card-footer"];let wu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),Eu=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(tu,8))},t.\u0275cmp=r.Db({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&r.Bb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:_u,decls:2,vars:0,template:function(t,e){1&t&&(r.bc(bu),r.ac(0),r.ac(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),Su=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[su],su]}),t})(),Tu=(()=>{class t{constructor(t){this.api=t,this.results=[]}ngOnInit(){this.question=this.api.nextQuestion(),this.progress=0,this.animationState=""}startAnimation(t){this.progress+=1,this.results.push("slideOutLeft"==t?0:"zoomOutRight"==t?1:2),console.log(this.results),this.animationState||(this.animationState=t),this.question=this.api.nextQuestion()}resetAnimationState(){this.animationState=""}}var e;return t.\u0275fac=function(e){return new(e||t)(r.Jb(vo))},t.\u0275cmp=r.Db({type:t,selectors:[["app-hammer-card"]],decls:18,vars:5,consts:[[1,"wrapper"],[1,"progressui"],["mode","determinate",1,"bar",3,"value"],[1,"swipe-card",3,"swipeleft","swiperight","swipeup"],[1,"buttons"],[1,"wrong",3,"click"],[1,"skip",3,"click"],[1,"correct",3,"click"]],template:function(t,e){1&t&&(r.Mb(0,"div",0),r.Mb(1,"div",1),r.Mb(2,"p"),r.mc(3),r.Lb(),r.Kb(4,"mat-progress-bar",2),r.Mb(5,"p"),r.mc(6),r.Lb(),r.Lb(),r.Mb(7,"mat-card",3),r.Tb("@cardAnimator.done",(function(){return e.resetAnimationState()}))("swipeleft",(function(){return e.startAnimation("slideOutLeft")}))("swiperight",(function(){return e.startAnimation("zoomOutRight")}))("swipeup",(function(){return e.startAnimation("rotateOutUpRight")})),r.Mb(8,"mat-card-content"),r.Mb(9,"p"),r.mc(10),r.Lb(),r.Lb(),r.Lb(),r.Mb(11,"div",4),r.Mb(12,"a",5),r.Tb("click",(function(){return e.startAnimation("slideOutLeft")})),r.mc(13,"Wrong"),r.Lb(),r.Mb(14,"a",6),r.Tb("click",(function(){return e.startAnimation("rotateOutUpRight")})),r.mc(15,"Skip"),r.Lb(),r.Mb(16,"a",7),r.Tb("click",(function(){return e.startAnimation("zoomOutRight")})),r.mc(17,"Right"),r.Lb(),r.Lb(),r.Lb()),2&t&&(r.zb(3),r.oc("",e.progress," / 100"),r.zb(1),r.dc("value",e.progress),r.zb(2),r.oc("",e.progress,"%"),r.zb(1),r.cc("@cardAnimator",e.animationState),r.zb(3),r.oc(" ",e.question," "))},directives:[gu,Eu,wu],styles:[".swipe-card[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;height:50vh}.swipe-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:10px}.correct[_ngcontent-%COMP%]{font-size:12px;color:#a3be8c}.wrong[_ngcontent-%COMP%]{font-size:12px;color:#bf616a}.skip[_ngcontent-%COMP%]{font-size:15px}.progressui[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.progressui[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:10%;font-size:10px}.bar[_ngcontent-%COMP%]{width:80%}"],data:{animation:[(e=[Ci("*=> wobble",Si(1e3,Ii(ji))),Ci("* => swing",Si(1e3,Ii(Ri))),Ci("* => jello",Si(1e3,Ii(Ni))),Ci("* => zoomOutRight",Si(500,Ii(Di))),Ci("* => slideOutLeft",Si(500,Ii(Pi))),Ci("* => rotateOutUpRight",Si(500,Ii(Li))),Ci("* => flipOutY",Si(1e3,Ii(Fi)))],{type:7,name:"cardAnimator",definitions:e,options:{}})]}}),t})(),Ou=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-search"]],decls:1,vars:0,template:function(t,e){1&t&&r.Kb(0,"app-hammer-card")},directives:[Tu],styles:[""]}),t})();function Iu(t,e){if(1&t&&(r.Mb(0,"div",2),r.Kb(1,"img",3),r.Mb(2,"div",4),r.Mb(3,"strong"),r.mc(4),r.Lb(),r.Mb(5,"p",5),r.mc(6),r.Lb(),r.Mb(7,"p"),r.mc(8),r.Lb(),r.Mb(9,"a",6),r.mc(10,"More"),r.Lb(),r.Lb(),r.Lb()),2&t){const t=e.$implicit;r.zb(1),r.dc("src",t.image_link,r.hc),r.zb(3),r.nc(t.name),r.zb(2),r.oc("",t.price," $"),r.zb(2),r.nc(t.description),r.zb(1),r.dc("href",t.product_link,r.hc)}}function Cu(t,e){if(1&t&&(r.Mb(0,"main"),r.kc(1,Iu,11,5,"div",1),r.Lb()),2&t){const t=r.Xb();r.zb(1),r.cc("ngForOf",t.prods)}}let xu=(()=>{class t{constructor(t){this.api=t}ngOnInit(){this.api.getProducts().subscribe(t=>{this.prods=t})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(vo))},t.\u0275cmp=r.Db({type:t,selectors:[["app-browse"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[3,"src"],[1,"info"],[1,"price"],[3,"href"]],template:function(t,e){1&t&&r.kc(0,Cu,2,1,"main",0),2&t&&r.cc("ngIf",e.prods)},directives:[R,j],styles:["main[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(19rem,1fr));grid-gap:1rem}main[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-style:solid;border-radius:12px;border-width:0;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);padding:2rem}main[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.price[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{color:#99d5cd}a[_ngcontent-%COMP%]{float:right;text-decoration:none}"]}),t})();var ku=n("mrSG"),Au=n("Jgta"),ju=n("VRyK"),Nu=n("pxpQ"),Ru=n("qgXg"),Pu=n("Ylt2");class Du extends jt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Lu(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Nt.a;if(this.isStopped||this.hasError?o=Ne.a.EMPTY:(this.observers.push(t),o=new Pu.a(this,t)),r&&t.add(t=new Nu.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ru.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Lu{constructor(t,e){this.time=t,this.value=e}}function Fu(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Du(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Mu(t,e){return e?pe(()=>t,e):pe(()=>t)}var Uu=n("tf+s"),qu=n("spgP");const Vu=new r.q("angularfire2.auth.use-emulator"),Bu=new r.q("angularfire2.auth.settings"),zu=new r.q("angularfire2.auth.tenant-id"),Hu=new r.q("angularfire2.auth.langugage-code"),Qu=new r.q("angularfire2.auth.use-device-language"),Ku=new r.q("angularfire.auth.persistence");let Gu=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new qu.d(i),f=Object(qu.h)(h),d=new jt.a,p=Object(kt.a)(void 0).pipe(Object(Nu.b)(h.outsideAngular),pe(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Wt.a)(()=>Object(qu.g)(t,i,e)),Object(Wt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(qu.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Fu({bufferSize:1,refCount:!1}));if(H(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(kt.a)(null);else{p.pipe(Ae()).subscribe();const t=p.pipe(pe(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Fu({bufferSize:1,refCount:!1})),e=t=>new qt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(pe(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(pe(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Mu(n),Object(Uu.a)(h.outsideAngular),Object(Nu.b)(h.insideAngular)),this.user=t.pipe(Mu(r),Object(Uu.a)(h.outsideAngular),Object(Nu.b)(h.insideAngular)),this.idToken=this.user.pipe(pe(t=>t?Object(At.a)(t.getIdToken()):Object(kt.a)(null))),this.idTokenResult=this.user.pipe(pe(t=>t?Object(At.a)(t.getIdTokenResult()):Object(kt.a)(null))),this.credential=Object(ju.a)(t,d,this.authState.pipe(Jt(t=>!t))).pipe(Object(Wt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Uu.a)(h.outsideAngular),Object(Nu.b)(h.insideAngular))}return Object(qu.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(qu.c),r.Qb(qu.b,8),r.Qb(r.B),r.Qb(r.z),r.Qb(Vu,8),r.Qb(Bu,8),r.Qb(zu,8),r.Qb(Hu,8),r.Qb(Qu,8),r.Qb(Ku,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Qb)(qu.c),Object(r.Qb)(qu.b,8),Object(r.Qb)(r.B),Object(r.Qb)(r.z),Object(r.Qb)(Vu,8),Object(r.Qb)(Bu,8),Object(r.Qb)(zu,8),Object(r.Qb)(Hu,8),Object(r.Qb)(Qu,8),Object(r.Qb)(Ku,8))},token:t,providedIn:"any"}),t})(),$u=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[Gu]}),t})();function Wu(){return t=>t.lift(new Xu)}class Xu{call(t,e){return e.subscribe(new Yu(t))}}class Yu extends Lt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class Ju{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Zu(t,this.compare,this.keySelector))}}class Zu extends Lt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var tc=n("zIRd"),ec=n("qOnz"),nc=n("q/0M"),rc=function(t,e){return(rc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ic(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var oc,sc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ac=ac||{},uc=sc||self;function cc(){}function lc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function hc(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var fc="closure_uid_"+(1e9*Math.random()>>>0),dc=0;function pc(t,e,n){return t.call.apply(t.bind,arguments)}function mc(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function gc(t,e,n){return(gc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pc:mc).apply(null,arguments)}function yc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function vc(){return Date.now()}function bc(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function _c(){this.j=this.j,this.i=this.i}_c.prototype.j=!1,_c.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,fc)&&t[fc]||(t[fc]=++dc)}(this)},_c.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var wc=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ec=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Sc(t){return Array.prototype.concat.apply([],arguments)}function Tc(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Oc(t){return/^[\s\xa0]*$/.test(t)}var Ic,Cc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function xc(t,e){return-1!=t.indexOf(e)}function kc(t,e){return t<e?-1:t>e?1:0}t:{var Ac=uc.navigator;if(Ac){var jc=Ac.userAgent;if(jc){Ic=jc;break t}}Ic=""}function Nc(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Rc(t){var e={};for(var n in t)e[n]=t[n];return e}var Pc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dc(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Pc.length;o++)n=Pc[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Lc(t){return Lc[" "](t),t}Lc[" "]=cc;var Fc,Mc,Uc=xc(Ic,"Opera"),qc=xc(Ic,"Trident")||xc(Ic,"MSIE"),Vc=xc(Ic,"Edge"),Bc=Vc||qc,zc=xc(Ic,"Gecko")&&!(xc(Ic.toLowerCase(),"webkit")&&!xc(Ic,"Edge"))&&!(xc(Ic,"Trident")||xc(Ic,"MSIE"))&&!xc(Ic,"Edge"),Hc=xc(Ic.toLowerCase(),"webkit")&&!xc(Ic,"Edge");function Qc(){var t=uc.document;return t?t.documentMode:void 0}t:{var Kc="",Gc=(Mc=Ic,zc?/rv:([^\);]+)(\)|;)/.exec(Mc):Vc?/Edge\/([\d\.]+)/.exec(Mc):qc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mc):Hc?/WebKit\/(\S+)/.exec(Mc):Uc?/(?:Version)[ \/]?(\S+)/.exec(Mc):void 0);if(Gc&&(Kc=Gc?Gc[1]:""),qc){var $c=Qc();if(null!=$c&&$c>parseFloat(Kc)){Fc=String($c);break t}}Fc=Kc}var Wc={};function Xc(t){return function(t,e){var n=Wc;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Cc(String(Fc)).split("."),r=Cc(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=kc(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||kc(0==s[2].length,0==a[2].length)||kc(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var Yc=uc.document&&qc&&(Qc()||parseInt(Fc,10))||void 0,Jc=!qc||9<=Number(Yc),Zc=qc&&!Xc("9"),tl=function(){if(!uc.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{uc.addEventListener("test",cc,e),uc.removeEventListener("test",cc,e)}catch(n){}return t}();function el(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function nl(t,e){if(el.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(zc){t:{try{Lc(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:rl[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}el.prototype.b=function(){this.defaultPrevented=!0},bc(nl,el);var rl={2:"touch",3:"pen",4:"mouse"};nl.prototype.b=function(){nl.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Zc)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var il="closure_listenable_"+(1e6*Math.random()|0),ol=0;function sl(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ol,this.Y=this.Z=!1}function al(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ul(t){this.src=t,this.a={},this.b=0}function cl(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=wc(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(al(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ll(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ul.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ll(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new sl(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var hl="closure_lm_"+(1e6*Math.random()|0),fl={};function dl(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=wl(r),e&&e[il]?e.wa(n,r,hc(i)?!!i.capture:!!i,o):pl(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)dl(t,e[o],n,r,i);return null}return n=wl(n),t&&t[il]?t.va(e,n,hc(r)?!!r.capture:!!r,i):pl(t,e,n,!1,r,i)}function pl(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=hc(i)?!!i.capture:!!i;if(s&&!Jc)return null;var a=bl(t);if(a||(t[hl]=a=new ul(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=vl,e=Jc?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tl||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gl(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ml(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[il])cl(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gl(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bl(e))?(cl(n,t),0==n.b&&(n.src=null,e[hl]=null)):al(t)}}}function gl(t){return t in fl?fl[t]:fl[t]="on"+t}function yl(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ml(t),n.call(r,e)}function vl(t,e){if(t.Y)return!0;if(!Jc){if(!e)t:{e=["window","event"];for(var n=uc,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return yl(t,e=new nl(e,this))}return yl(t,new nl(e,this))}function bl(t){return(t=t[hl])instanceof ul?t:null}var _l="__closure_events_fn_"+(1e9*Math.random()>>>0);function wl(t){return"function"==typeof t?t:(t[_l]||(t[_l]=function(e){return t.handleEvent(e)}),t[_l])}function El(){_c.call(this),this.c=new ul(this),this.J=this,this.C=null}function Sl(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new el(e,t);else if(e instanceof el)e.target=e.target||t;else{var i=e;Dc(e=new el(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Tl(s,r,!0,e)&&i}if(i=Tl(s=e.a=t,r,!0,e)&&i,i=Tl(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Tl(s=e.a=n[o],r,!1,e)&&i}function Tl(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&cl(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}bc(El,_c),El.prototype[il]=!0,(oc=El.prototype).addEventListener=function(t,e,n,r){dl(this,t,e,n,r)},oc.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=hc(i)?!!i.capture:!!i,r=wl(r),e&&e[il]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ll(s=e.a[n],r,i,o))&&(al(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=bl(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ll(n,r,i,o)),(r=-1<e?n[e]:null)&&ml(r))}(this,t,e,n,r)},oc.G=function(){if(El.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)al(n[r]);delete e.a[t],e.b--}}this.C=null},oc.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},oc.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ol=uc.JSON.stringify;function Il(){this.b=this.a=null}var Cl,xl=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Al}),(function(t){t.reset()}));function kl(){var t=Pl,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Al(){this.next=this.b=this.a=null}function jl(t){uc.setTimeout((function(){throw t}),0)}function Nl(t,e){Cl||function(){var t=uc.Promise.resolve(void 0);Cl=function(){t.then(Dl)}}(),Rl||(Cl(),Rl=!0),Pl.add(t,e)}Il.prototype.add=function(t,e){var n=xl.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Al.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Al.prototype.reset=function(){this.next=this.b=this.a=null};var Rl=!1,Pl=new Il;function Dl(){for(var t;t=kl();){try{t.a.call(t.b)}catch(n){jl(n)}var e=xl;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Rl=!1}function Ll(t,e){El.call(this),this.b=t||1,this.a=e||uc,this.f=gc(this.Za,this),this.g=vc()}function Fl(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ml(t,e,n){if("function"==typeof t)n&&(t=gc(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=gc(t.handleEvent,t)}return 2147483647<Number(e)?-1:uc.setTimeout(t,e||0)}function Ul(t){t.a=Ml((function(){t.a=null,t.c&&(t.c=!1,Ul(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}bc(Ll,El),(oc=Ll.prototype).aa=!1,oc.M=null,oc.Za=function(){if(this.aa){var t=vc()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Sl(this,"tick"),this.aa&&(Fl(this),this.start()))}},oc.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=vc())},oc.G=function(){Ll.X.G.call(this),Fl(this),delete this.a};var ql=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}rc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ul(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(uc.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(_c);function Vl(t){_c.call(this),this.b=t,this.a={}}bc(Vl,_c);var Bl=[];function zl(t,e,n,r){Array.isArray(n)||(n&&(Bl[0]=n.toString()),n=Bl);for(var i=0;i<n.length;i++){var o=dl(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Hl(t){Nc(t.a,(function(t,e){this.a.hasOwnProperty(e)&&ml(t)}),t),t.a={}}function Ql(){this.a=!0}function Kl(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ol(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Vl.prototype.G=function(){Vl.X.G.call(this),Hl(this)},Vl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ql.prototype.info=function(){};var Gl={},$l=null;function Wl(){return $l=$l||new El}function Xl(t){el.call(this,Gl.Fa,t)}function Yl(t){var e=Wl();Sl(e,new Xl(e,t))}function Jl(t,e){el.call(this,Gl.STAT_EVENT,t),this.stat=e}function Zl(t){var e=Wl();Sl(e,new Jl(e,t))}function th(t){el.call(this,Gl.Ga,t)}function eh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return uc.setTimeout((function(){t()}),e)}Gl.Fa="serverreachability",bc(Xl,el),Gl.STAT_EVENT="statevent",bc(Jl,el),Gl.Ga="timingevent",bc(th,el);var nh={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},rh={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ih(){}function oh(){}ih.prototype.a=null;var sh,ah={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function uh(){el.call(this,"d")}function ch(){el.call(this,"c")}function lh(){}function hh(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Vl(this),this.P=fh,this.R=new Ll(t=Bc?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}bc(uh,el),bc(ch,el),bc(lh,ih),sh=new lh;var fh=45e3,dh={},ph={};function mh(t,e,n){t.H=1,t.i=Fh(jh(e)),t.j=n,t.I=!0,gh(t,null)}function gh(t,e){t.u=vc(),bh(t),t.l=jh(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Xh(n.b,"t",r),t.D=0,t.a=Qf(t.g,t.g.C?e:null),0<t.O&&(t.F=new ql(gc(t.Ca,t,t.a),t.O)),zl(t.J,t.a,"readystatechange",t.Xa),e=t.B?Rc(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Yl(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function yh(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=vh(t,n);if(i==ph){4==e&&(t.h=4,Zl(14),r=!1),Kl(t.c,t.f,null,"[Incomplete Response]");break}if(i==dh){t.h=4,Zl(15),Kl(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Kl(t.c,t.f,i,null),Th(t,i)}4==e&&0==n.length&&(t.h=1,Zl(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ff(e),e.F=!0,Zl(11))):(Kl(t.c,t.f,n,"[Invalid Chunked Response]"),Sh(t),Eh(t))}function vh(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ph:(n=Number(e.substring(n,r)),isNaN(n)?dh:(r+=1)+n>e.length?ph:(e=e.substr(r,n),t.D=r+n,e))}function bh(t){t.T=vc()+t.P,_h(t,t.P)}function _h(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=eh(gc(t.Va,t),e)}function wh(t){t.o&&(uc.clearTimeout(t.o),t.o=null)}function Eh(t){0==t.g.v||t.A||qf(t.g,t)}function Sh(t){wh(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Fl(t.R),Hl(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Th(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||rf(n.b,t)))if(n.I=t.N,!t.C&&rf(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(SE){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Uf(n),xf(n)}Lf(n),Zl(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=eh(gc(n.Sa,n),6e3));if(1>=nf(n.b)&&n.ea){try{n.ea()}catch(SE){}n.ea=void 0}}else Bf(n,11)}else if((t.C||n.a==t)&&Uf(n),!Oc(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(xc(l,"spdy")||xc(l,"quic")||xc(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(of(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Lh(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=vc()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Hf(u,u.C?u.ga:null,u.fa),d.C){sf(u.b,d);var p=d,m=u.D;m&&p.setTimeout(m),p.o&&(wh(p),bh(p)),u.a=d}else Df(u);0<n.g.length&&jf(n)}else"stop"!=i[0]&&"close"!=i[0]||Bf(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Bf(n,7):Cf(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Yl(4)}catch(SE){}}function Oh(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(lc(t)||"string"==typeof t)Ec(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(lc(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(lc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ih(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ih)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ch(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xh(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xh(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(oc=hh.prototype).setTimeout=function(t){this.P=t},oc.Xa=function(t){t=t.target;var e=this.F;e&&3==Sf(t)?e.f():this.Ca(t)},oc.Ca=function(t){try{if(t==this.a)t:{var e=Sf(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Bc&&!this.a.$())){this.A||4!=e||7==n||Yl(8==n||0>=r?3:2),wh(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oc(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Zl(12),Sh(this),Eh(this);break t}Kl(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Th(this,u)}this.I?(yh(this,e,o),Bc&&this.b&&3==e&&(zl(this.J,this.R,"tick",this.Wa),this.R.start())):(Kl(this.c,this.f,o,null),Th(this,o)),4==e&&Sh(this),this.b&&!this.A&&(4==e?qf(this.g,this):(this.b=!1,bh(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Zl(12)):(this.h=0,Zl(13)),Sh(this),Eh(this)}}}catch(c){}},oc.Wa=function(){if(this.a){var t=Sf(this.a),e=this.a.$();this.D<e.length&&(wh(this),yh(this,t,e),this.b&&4!=t&&bh(this))}},oc.cancel=function(){this.A=!0,Sh(this)},oc.Va=function(){this.o=null;var t=vc();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Yl(3),Zl(17)),Sh(this),this.h=2,Eh(this)):_h(this,this.T-t)},(oc=Ih.prototype).K=function(){Ch(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},oc.L=function(){return Ch(this),this.a.concat()},oc.get=function(t,e){return xh(this.b,t)?this.b[t]:e},oc.set=function(t,e){xh(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},oc.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ah(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ah){this.a=void 0!==e?e:t.a,Nh(this,t.f),this.j=t.j,Rh(this,t.c),Ph(this,t.h),this.g=t.g,e=t.b;var n=new Kh;n.c=e.c,e.a&&(n.a=new Ih(e.a),n.b=e.b),Dh(this,n),this.i=t.i}else t&&(n=String(t).match(kh))?(this.a=!!e,Nh(this,n[1]||"",!0),this.j=Mh(n[2]||""),Rh(this,n[3]||"",!0),Ph(this,n[4]),this.g=Mh(n[5]||"",!0),Dh(this,n[6]||"",!0),this.i=Mh(n[7]||"")):(this.a=!!e,this.b=new Kh(null,this.a))}function jh(t){return new Ah(t)}function Nh(t,e,n){t.f=n?Mh(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Rh(t,e,n){t.c=n?Mh(e,!0):e}function Ph(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Dh(t,e,n){e instanceof Kh?(t.b=e,function(t,e){e&&!t.f&&(Gh(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($h(this,e),Xh(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Uh(e,Hh)),t.b=new Kh(e,t.a))}function Lh(t,e,n){t.b.set(e,n)}function Fh(t){return Lh(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^vc()).toString(36)),t}function Mh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Uh(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qh),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qh(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ah.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Uh(e,Vh,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Uh(e,Vh,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Uh(n,"/"==n.charAt(0)?zh:Bh,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Uh(n,Qh)),t.join("")};var Vh=/[#\/\?@]/g,Bh=/[#\?:]/g,zh=/[#\?]/g,Hh=/[#\?@]/g,Qh=/#/g;function Kh(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Gh(t){t.a||(t.a=new Ih,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $h(t,e){Gh(t),e=Yh(t,e),xh(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xh((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ch(t)))}function Wh(t,e){return Gh(t),e=Yh(t,e),xh(t.a.b,e)}function Xh(t,e,n){$h(t,e),0<n.length&&(t.c=null,t.a.set(Yh(t,e),Tc(n)),t.b+=n.length)}function Yh(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(oc=Kh.prototype).add=function(t,e){Gh(this),this.c=null,t=Yh(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},oc.forEach=function(t,e){Gh(this),this.a.forEach((function(n,r){Ec(n,(function(n){t.call(e,n,r,this)}),this)}),this)},oc.L=function(){Gh(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},oc.K=function(t){Gh(this);var e=[];if("string"==typeof t)Wh(this,t)&&(e=Sc(e,this.a.get(Yh(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Sc(e,t[n])}return e},oc.set=function(t,e){return Gh(this),this.c=null,Wh(this,t=Yh(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},oc.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},oc.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Jh=function(){return function(t,e){this.b=t,this.a=e}}();function Zh(t){this.g=t||tf,t=uc.PerformanceNavigationTiming?0<(t=uc.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(uc.ia&&uc.ia.ya&&uc.ia.ya()&&uc.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var tf=10;function ef(t){return!!t.b||!!t.a&&t.a.size>=t.f}function nf(t){return t.b?1:t.a?t.a.size:0}function rf(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function of(t,e){t.a?t.a.add(e):t.b=e}function sf(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function af(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ic(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Tc(t.c)}function uf(){}function cf(){this.a=new uf}function lf(t,e,n){var r=n||"";try{Oh(t,(function(t,n){var i=t;hc(t)&&(i=Ol(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(iS){throw e.push(r+"type="+encodeURIComponent("_badmap")),iS}}function hf(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Zh.prototype.cancel=function(){var t,e;if(this.c=af(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ic(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},uf.prototype.stringify=function(t){return uc.JSON.stringify(t,void 0)},uf.prototype.parse=function(t){return uc.JSON.parse(t,void 0)};var ff=uc.JSON.parse;function df(t){El.call(this),this.headers=new Ih,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=pf,this.D=this.F=!1}bc(df,El);var pf="",mf=/^https?$/i,gf=["POST","PUT"];function yf(t){return"content-type"==t.toLowerCase()}function vf(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,bf(t),wf(t)}function bf(t){t.u||(t.u=!0,Sl(t,"complete"),Sl(t,"error"))}function _f(t){if(t.b&&void 0!==ac&&(!t.s[1]||4!=Sf(t)||2!=t.W()))if(t.l&&4==Sf(t))Ml(t.za,0,t);else if(Sl(t,"readystatechange"),4==Sf(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(kh)[1]||null;if(!o&&uc.self&&uc.self.location){var s=uc.self.location.protocol;o=s.substr(0,s.length-1)}i=!mf.test(o?o.toLowerCase():"")}e=i}if(e)Sl(t,"complete"),Sl(t,"success");else{t.h=6;try{var a=2<Sf(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",bf(t)}}finally{wf(t)}}}function wf(t,e){if(t.a){Ef(t);var n=t.a,r=t.s[0]?cc:null;t.a=null,t.s=null,e||Sl(t,"ready");try{n.onreadystatechange=r}catch(iS){}}}function Ef(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(uc.clearTimeout(t.m),t.m=null)}function Sf(t){return t.a?t.a.readyState:0}function Tf(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Nc(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Lh(t,e,n))}function Of(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function If(t){this.pa=0,this.g=[],this.c=new Ql,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Of("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Of("baseRetryDelayMs",5e3,t),this.Ra=Of("retryDelaySeedMs",1e4,t),this.Ma=Of("forwardChannelMaxRetries",2,t),this.ma=Of("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Zh(t&&t.concurrentRequestLimit),this.ka=new cf,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Cf(t){if(kf(t),3==t.v){var e=t.R++,n=jh(t.B);Lh(n,"SID",t.J),Lh(n,"RID",e),Lh(n,"TYPE","terminate"),Rf(t,n),(e=new hh(t,t.c,e,void 0)).H=2,e.i=Fh(jh(n)),n=!1,uc.navigator&&uc.navigator.sendBeacon&&(n=uc.navigator.sendBeacon(e.i.toString(),"")),!n&&uc.Image&&((new Image).src=e.i,n=!0),n||(e.a=Qf(e.g,null),e.a.ba(e.i)),e.u=vc(),bh(e)}zf(t)}function xf(t){t.a&&(Ff(t),t.a.cancel(),t.a=null)}function kf(t){xf(t),t.j&&(uc.clearTimeout(t.j),t.j=null),Uf(t),t.b.cancel(),t.h&&("number"==typeof t.h&&uc.clearTimeout(t.h),t.h=null)}function Af(t,e){t.g.push(new Jh(t.Oa++,e)),3==t.v&&jf(t)}function jf(t){ef(t.b)||t.h||(t.h=!0,Nl(t.Ba,t),t.u=0)}function Nf(t,e){var n;n=e?e.f:t.R++;var r=jh(t.B);Lh(r,"SID",t.J),Lh(r,"RID",n),Lh(r,"AID",t.P),Rf(t,r),t.i&&t.l&&Tf(r,t.i,t.l),n=new hh(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Pf(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),of(t.b,n),mh(n,r,e)}function Rf(t,e){t.f&&Oh({},(function(t,n){Lh(e,n,t)}))}function Pf(t,e,n){n=Math.min(t.g.length,n);var r=t.f?gc(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{lf(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Df(t){t.a||t.j||(t.T=1,Nl(t.Aa,t),t.o=0)}function Lf(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=eh(gc(t.Aa,t),Vf(t,t.o)),t.o++,0))}function Ff(t){null!=t.s&&(uc.clearTimeout(t.s),t.s=null)}function Mf(t){t.a=new hh(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=jh(t.la);Lh(e,"RID","rpc"),Lh(e,"SID",t.J),Lh(e,"CI",t.H?"0":"1"),Lh(e,"AID",t.P),Rf(t,e),Lh(e,"TYPE","xmlhttp"),t.i&&t.l&&Tf(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Fh(jh(e)),n.j=null,n.I=!0,gh(n,t)}function Uf(t){null!=t.m&&(uc.clearTimeout(t.m),t.m=null)}function qf(t,e){var n=null;if(t.a==e){Uf(t),Ff(t),t.a=null;var r=2}else{if(!rf(t.b,e))return;n=e.s,sf(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=vc()-e.u;var i=t.u;Sl(r=Wl(),new th(r,n,e,i)),jf(t)}else Df(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(nf(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=eh(gc(t.Ba,t,e),Vf(t,t.u)),t.u++,0)))}(t,e)||2==r&&Lf(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Bf(t,5);break;case 4:Bf(t,10);break;case 3:Bf(t,6);break;default:Bf(t,2)}}function Vf(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Bf(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=gc(t.Ya,t);n||(n=new Ah("//www.google.com/images/cleardot.gif"),uc.location&&"http"==uc.location.protocol||Nh(n,"https"),Fh(n)),function(t,e){var n=new Ql;if(uc.Image){var r=new Image;r.onload=yc(hf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=yc(hf,n,r,"TestLoadImage: error",!1,e),r.onabort=yc(hf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=yc(hf,n,r,"TestLoadImage: timeout",!1,e),uc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zl(2);t.v=0,t.f&&t.f.ra(e),zf(t),kf(t)}function zf(t){t.v=0,t.I=-1,t.f&&(0==af(t.b).length&&0==t.g.length||(t.b.c.length=0,Tc(t.g),t.g.length=0),t.f.qa())}function Hf(t,e,n){var r=function(t){return t instanceof Ah?jh(t):new Ah(t,void 0)}(n);if(""!=r.c)e&&Rh(r,e+"."+r.c),Ph(r,r.h);else{var i=uc.location;r=function(t,e,n,r){var i=new Ah(null,void 0);return t&&Nh(i,t),e&&Rh(i,e),n&&Ph(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Nc(t.V,(function(t,e){Lh(r,e,t)})),n=t.na,(e=t.A)&&n&&Lh(r,e,n),Lh(r,"VER",t.ha),Rf(t,r),r}function Qf(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new df(t.Na)).F=t.C,e}function Kf(){}function Gf(){if(qc&&!(10<=Number(Yc)))throw Error("Environmental error: no available transport.")}function $f(t,e){El.call(this),this.a=new If(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Oc(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Oc(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Yf(this)}function Wf(t){uh.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Xf(){ch.call(this),this.status=1}function Yf(t){this.a=t}(oc=df.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:sh),this.a.onreadystatechange=gc(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void vf(this,o)}t=n||"";var i=new Ih(this.headers);r&&Oh(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=yf,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=uc.FormData&&t instanceof uc.FormData,!(0<=wc(gf,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ef(this),0<this.o&&((this.D=function(t){return qc&&Xc(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=gc(this.xa,this)):this.m=Ml(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){vf(this,o)}},oc.xa=function(){void 0!==ac&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Sl(this,"timeout"),this.abort(8))},oc.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Sl(this,"complete"),Sl(this,"abort"),wf(this))},oc.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),wf(this,!0)),df.X.G.call(this)},oc.za=function(){this.j||(this.A||this.l||this.g?_f(this):this.Ua())},oc.Ua=function(){_f(this)},oc.W=function(){try{return 2<Sf(this)?this.a.status:-1}catch(Mc){return-1}},oc.$=function(){try{return this.a?this.a.responseText:""}catch(Mc){return""}},oc.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ff(e)}},oc.ua=function(){return this.h},oc.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(oc=If.prototype).ha=8,oc.v=1,oc.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new hh(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Dc(r=Rc(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Pf(this,n,e),Lh(i=jh(this.B),"RID",t),Lh(i,"CVER",22),this.A&&Lh(i,"X-HTTP-Session-Id",this.A),Rf(this,i),this.i&&r&&Tf(i,this.i,r),of(this.b,n),this.Ia&&Lh(i,"TYPE","init"),this.da?(Lh(i,"$req",e),Lh(i,"SID","null"),n.U=!0,mh(n,i,null)):mh(n,i,e),this.v=2}}else 3==this.v&&(t?Nf(this,t):0==this.g.length||ef(this.b)||Nf(this))},oc.Aa=function(){if(this.j=null,Mf(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=eh(gc(this.Ta,this),t)}},oc.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Zl(10),xf(this),Mf(this))},oc.Sa=function(){null!=this.m&&(this.m=null,xf(this),Lf(this),Zl(19))},oc.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Zl(2)):(this.c.info("Failed to ping google.com"),Zl(1))},(oc=Kf.prototype).ta=function(){},oc.sa=function(){},oc.ra=function(){},oc.qa=function(){},oc.Ja=function(){},Gf.prototype.a=function(t,e){return new $f(t,e)},bc($f,El),$f.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Zl(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Hf(t,null,t.fa),jf(t)},$f.prototype.close=function(){Cf(this.a)},$f.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Af(this.a,e)}else this.l?((e={}).__data__=Ol(t),Af(this.a,e)):Af(this.a,t)},$f.prototype.G=function(){this.a.f=null,delete this.f,Cf(this.a),delete this.a,$f.X.G.call(this)},bc(Wf,uh),bc(Xf,ch),bc(Yf,Kf),Yf.prototype.ta=function(){Sl(this.a,"a")},Yf.prototype.sa=function(t){Sl(this.a,new Wf(t))},Yf.prototype.ra=function(t){Sl(this.a,new Xf(t))},Yf.prototype.qa=function(){Sl(this.a,"b")},Gf.prototype.createWebChannel=Gf.prototype.a,$f.prototype.send=$f.prototype.h,$f.prototype.open=$f.prototype.g,$f.prototype.close=$f.prototype.close,nh.NO_ERROR=0,nh.TIMEOUT=8,nh.HTTP_ERROR=6,rh.COMPLETE="complete",oh.EventType=ah,ah.OPEN="a",ah.CLOSE="b",ah.ERROR="c",ah.MESSAGE="d",El.prototype.listen=El.prototype.va,df.prototype.listenOnce=df.prototype.wa,df.prototype.getLastError=df.prototype.Qa,df.prototype.getLastErrorCode=df.prototype.ua,df.prototype.getStatus=df.prototype.W,df.prototype.getResponseJson=df.prototype.Pa,df.prototype.getResponseText=df.prototype.$,df.prototype.send=df.prototype.ba;var Jf=nh,Zf=rh,td=Gl,ed=oh,nd=df,rd=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();rd.o=-1;var id={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},od=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(ku.c)(e,t),e}(Error),sd=new nc.b("@firebase/firestore");function ad(){return sd.logLevel}function ud(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(sd.logLevel<=nc.a.DEBUG){var r=e.map(hd);sd.debug.apply(sd,Object(ku.f)(["Firestore (8.4.2): "+t],r))}}function cd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(sd.logLevel<=nc.a.ERROR){var r=e.map(hd);sd.error.apply(sd,Object(ku.f)(["Firestore (8.4.2): "+t],r))}}function ld(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(sd.logLevel<=nc.a.WARN){var r=e.map(hd);sd.warn.apply(sd,Object(ku.f)(["Firestore (8.4.2): "+t],r))}}function hd(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(iS){return t}}function fd(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.2) INTERNAL ASSERTION FAILED: "+t;throw cd(e),new Error(e)}function dd(t,e){t||fd()}function pd(t,e){return t}function md(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var gd=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=md(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function yd(t,e){return t<e?-1:t>e?1:0}function vd(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function bd(t){return t+"\0"}var _d=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new od(id.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new od(id.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new od(id.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new od(id.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?yd(this.nanoseconds,t.nanoseconds):yd(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),wd=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new _d(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Ed(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sd(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Td(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Od=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&fd(),void 0===n?n=t.length-e:n>t.length-e&&fd(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ku.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new od(id.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Od),Cd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ku.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Cd.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new od(id.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new od(id.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new od(id.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new od(id.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Od),kd=function(){function t(t){this.fields=t,t.sort(xd.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return vd(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ad=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return yd(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Ad.EMPTY_BYTE_STRING=new Ad("");var jd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nd(t){if(dd(!!t),"string"==typeof t){var e=0,n=jd.exec(t);if(dd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rd(t.seconds),nanos:Rd(t.nanos)}}function Rd(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Pd(t){return"string"==typeof t?Ad.fromBase64String(t):Ad.fromUint8Array(t)}function Dd(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ld(t){var e=Nd(t.mapValue.fields.__local_write_time__.timestampValue);return new _d(e.seconds,e.nanos)}function Fd(t){return null==t}function Md(t){return 0===t&&1/t==-1/0}function Ud(t){return"number"==typeof t&&Number.isInteger(t)&&!Md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var qd=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Id.fromString(e))},t.fromName=function(e){return new t(Id.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Id.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Id.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Id(e.slice()))},t}();function Vd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dd(t)?4:10:fd()}function Bd(t,e){var n=Vd(t);if(n!==Vd(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ld(t).isEqual(Ld(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Nd(t.timestampValue),r=Nd(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Pd(t.bytesValue).isEqual(Pd(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Rd(t.geoPointValue.latitude)===Rd(e.geoPointValue.latitude)&&Rd(t.geoPointValue.longitude)===Rd(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Rd(t.integerValue)===Rd(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Rd(t.doubleValue),r=Rd(e.doubleValue);return n===r?Md(n)===Md(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return vd(t.arrayValue.values||[],e.arrayValue.values||[],Bd);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ed(n)!==Ed(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Bd(n[i],r[i])))return!1;return!0}(t,e);default:return fd()}}function zd(t,e){return void 0!==(t.values||[]).find((function(t){return Bd(t,e)}))}function Hd(t,e){var n=Vd(t),r=Vd(e);if(n!==r)return yd(n,r);switch(n){case 0:return 0;case 1:return yd(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Rd(t.integerValue||t.doubleValue),r=Rd(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Qd(t.timestampValue,e.timestampValue);case 4:return Qd(Ld(t),Ld(e));case 5:return yd(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Pd(t),r=Pd(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=yd(n[i],r[i]);if(0!==o)return o}return yd(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=yd(Rd(t.latitude),Rd(e.latitude));return 0!==n?n:yd(Rd(t.longitude),Rd(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Hd(n[i],r[i]);if(o)return o}return yd(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=yd(r[s],o[s]);if(0!==a)return a;var u=Hd(n[r[s]],i[o[s]]);if(0!==u)return u}return yd(r.length,o.length)}(t.mapValue,e.mapValue);default:throw fd()}}function Qd(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return yd(t,e);var n=Nd(t),r=Nd(e),i=yd(n.seconds,r.seconds);return 0!==i?i:yd(n.nanos,r.nanos)}function Kd(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Nd(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Pd(e.bytesValue).toBase64():"referenceValue"in e?qd.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):fd();var n}(t)}function Gd(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function $d(t){return!!t&&"integerValue"in t}function Wd(t){return!!t&&"arrayValue"in t}function Xd(t){return!!t&&"nullValue"in t}function Yd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jd(t){return!!t&&"mapValue"in t}var Zd=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(xd.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Bd(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Vd(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Jd(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)})),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(xd.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Jd(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function tp(t){var e=[];return Sd(t.fields||{},(function(t,n){var r=new xd([t]);if(Jd(n)){var i=tp(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new kd(e)}var ep=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,wd.min(),Zd.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Zd.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Zd.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Zd.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Zd.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),np=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function rp(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new np(t,e,n,r,i,o,s)}function ip(t){var e=pd(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Kd(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=yp(e.startAt)),e.endAt&&(n+="|ub:",n+=yp(e.endAt)),e.h=n}return e.h}function op(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!bp(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Bd(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wp(t.startAt,e.startAt)&&wp(t.endAt,e.endAt)}function sp(t){return qd.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ap=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(ku.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new up(t,n,r):"array-contains"===n?new fp(t,r):"in"===n?new dp(t,r):"not-in"===n?new pp(t,r):"array-contains-any"===n?new mp(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new cp(t,n):new lp(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Hd(e,this.value)):null!==e&&Vd(this.value)===Vd(e)&&this.m(Hd(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return fd()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),up=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=qd.fromName(r.referenceValue),i}return Object(ku.c)(e,t),e.prototype.matches=function(t){var e=qd.comparator(t.key,this.key);return this.m(e)},e}(ap),cp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=hp(0,n),r}return Object(ku.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ap),lp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=hp(0,n),r}return Object(ku.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ap);function hp(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return qd.fromName(t.referenceValue)}))}var fp=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ku.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Wd(e)&&zd(e.arrayValue,this.value)},e}(ap),dp=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ku.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&zd(this.value.arrayValue,e)},e}(ap),pp=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ku.c)(e,t),e.prototype.matches=function(t){if(zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!zd(this.value.arrayValue,e)},e}(ap),mp=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ku.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Wd(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return zd(e.value.arrayValue,t)}))},e}(ap),gp=function(t,e){this.position=t,this.before=e};function yp(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Kd(t)})).join(",")}var vp=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function bp(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function _p(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?qd.comparator(qd.fromName(s.referenceValue),n.key):Hd(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function wp(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Bd(t.position[n],e.position[n]))return!1;return!0}var Ep=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Sp(t,e,n,r,i,o,s,a){return new Ep(t,e,n,r,i,o,s,a)}function Tp(t){return new Ep(t)}function Op(t){return!Fd(t.limit)&&"F"===t.limitType}function Ip(t){return!Fd(t.limit)&&"L"===t.limitType}function Cp(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function xp(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function kp(t){return null!==t.collectionGroup}function Ap(t){var e=pd(t);if(null===e.p){e.p=[];var n=xp(e),r=Cp(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new vp(n)),e.p.push(new vp(xd.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new vp(xd.keyField(),u))}}}return e.p}function jp(t){var e=pd(t);if(!e.T)if("F"===e.limitType)e.T=rp(e.path,e.collectionGroup,Ap(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ap(e);r<i.length;r++){var o=i[r];n.push(new vp(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new gp(e.endAt.position,!e.endAt.before):null,a=e.startAt?new gp(e.startAt.position,!e.startAt.before):null;e.T=rp(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Np(t,e,n){return new Ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rp(t,e){return op(jp(t),jp(e))&&t.limitType===e.limitType}function Pp(t){return ip(jp(t))+"|lt:"+t.limitType}function Dp(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Kd(e.value);var e})).join(", ")+"]"),Fd(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+yp(t.startAt)),t.endAt&&(e+=", endAt: "+yp(t.endAt)),"Target("+e+")"}(jp(t))+"; limitType="+t.limitType+")"}function Lp(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):qd.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!_p(t.startAt,Ap(t),e)||t.endAt&&_p(t.endAt,Ap(t),e))}(t,e)}function Fp(t){return function(e,n){for(var r=!1,i=0,o=Ap(t);i<o.length;i++){var s=o[i],a=Mp(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Mp(t,e,n){var r=t.field.isKeyField()?qd.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Hd(r,i):fd()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fd()}}function Up(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function qp(t){return{integerValue:""+t}}function Vp(t,e){return Ud(e)?qp(e):Up(t,e)}var Bp=function(){this._=void 0};function zp(t,e,n){return t instanceof Kp?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Gp?$p(t,e):t instanceof Wp?Xp(t,e):function(t,e){var n=Qp(t,e),r=Jp(n)+Jp(t.A);return $d(n)&&$d(t.A)?qp(r):Up(t.R,r)}(t,e)}function Hp(t,e,n){return t instanceof Gp?$p(t,e):t instanceof Wp?Xp(t,e):n}function Qp(t,e){return t instanceof Yp?$d(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ku.c)(e,t),e}(Bp),Gp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ku.c)(e,t),e}(Bp);function $p(t,e){for(var n=Zp(e),r=function(t){n.some((function(e){return Bd(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Wp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ku.c)(e,t),e}(Bp);function Xp(t,e){for(var n=Zp(e),r=function(t){n=n.filter((function(e){return!Bd(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Yp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(ku.c)(e,t),e}(Bp);function Jp(t){return Rd(t.integerValue||t.doubleValue)}function Zp(t){return Wd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var tm=function(t,e){this.field=t,this.transform=e},em=function(t,e){this.version=t,this.transformResults=e},nm=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function rm(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var im=function(){};function om(t,e,n){t instanceof lm?function(t,e,n){var r=t.value.clone(),i=dm(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof hm?function(t,e,n){if(rm(t.precondition,e)){var r=dm(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(fm(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function sm(t,e,n){t instanceof lm?function(t,e,n){if(rm(t.precondition,e)){var r=t.value.clone(),i=pm(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(cm(e),r).setHasLocalMutations()}}(t,e,n):t instanceof hm?function(t,e,n){if(rm(t.precondition,e)){var r=pm(t.fieldTransforms,n,e),i=e.data;i.setAll(fm(t)),i.setAll(r),e.convertToFoundDocument(cm(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){rm(t.precondition,e)&&e.convertToNoDocument(wd.min())}(t,e)}function am(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Qp(o.transform,s||null);null!=a&&(null==n&&(n=Zd.empty()),n.set(o.field,a))}return n||null}function um(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&vd(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Gp&&e instanceof Gp||t instanceof Wp&&e instanceof Wp?vd(t.elements,e.elements,Bd):t instanceof Yp&&e instanceof Yp?Bd(t.A,e.A):t instanceof Kp&&e instanceof Kp}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function cm(t){return t.isFoundDocument()?t.version:wd.min()}var lm=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(ku.c)(e,t),e}(im),hm=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(ku.c)(e,t),e}(im);function fm(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function dm(t,e,n){var r=new Map;dd(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Hp(s,a,n[i]))}return r}function pm(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,zp(a,u,e))}return r}var mm,gm,ym=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(ku.c)(e,t),e}(im),vm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(ku.c)(e,t),e}(im),bm=function(t){this.count=t};function _m(t){switch(t){case id.OK:return fd();case id.CANCELLED:case id.UNKNOWN:case id.DEADLINE_EXCEEDED:case id.RESOURCE_EXHAUSTED:case id.INTERNAL:case id.UNAVAILABLE:case id.UNAUTHENTICATED:return!1;case id.INVALID_ARGUMENT:case id.NOT_FOUND:case id.ALREADY_EXISTS:case id.PERMISSION_DENIED:case id.FAILED_PRECONDITION:case id.ABORTED:case id.OUT_OF_RANGE:case id.UNIMPLEMENTED:case id.DATA_LOSS:return!0;default:return fd()}}function wm(t){if(void 0===t)return cd("GRPC error has no .code"),id.UNKNOWN;switch(t){case mm.OK:return id.OK;case mm.CANCELLED:return id.CANCELLED;case mm.UNKNOWN:return id.UNKNOWN;case mm.DEADLINE_EXCEEDED:return id.DEADLINE_EXCEEDED;case mm.RESOURCE_EXHAUSTED:return id.RESOURCE_EXHAUSTED;case mm.INTERNAL:return id.INTERNAL;case mm.UNAVAILABLE:return id.UNAVAILABLE;case mm.UNAUTHENTICATED:return id.UNAUTHENTICATED;case mm.INVALID_ARGUMENT:return id.INVALID_ARGUMENT;case mm.NOT_FOUND:return id.NOT_FOUND;case mm.ALREADY_EXISTS:return id.ALREADY_EXISTS;case mm.PERMISSION_DENIED:return id.PERMISSION_DENIED;case mm.FAILED_PRECONDITION:return id.FAILED_PRECONDITION;case mm.ABORTED:return id.ABORTED;case mm.OUT_OF_RANGE:return id.OUT_OF_RANGE;case mm.UNIMPLEMENTED:return id.UNIMPLEMENTED;case mm.DATA_LOSS:return id.DATA_LOSS;default:return fd()}}(gm=mm||(mm={}))[gm.OK=0]="OK",gm[gm.CANCELLED=1]="CANCELLED",gm[gm.UNKNOWN=2]="UNKNOWN",gm[gm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gm[gm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gm[gm.NOT_FOUND=5]="NOT_FOUND",gm[gm.ALREADY_EXISTS=6]="ALREADY_EXISTS",gm[gm.PERMISSION_DENIED=7]="PERMISSION_DENIED",gm[gm.UNAUTHENTICATED=16]="UNAUTHENTICATED",gm[gm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gm[gm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gm[gm.ABORTED=10]="ABORTED",gm[gm.OUT_OF_RANGE=11]="OUT_OF_RANGE",gm[gm.UNIMPLEMENTED=12]="UNIMPLEMENTED",gm[gm.INTERNAL=13]="INTERNAL",gm[gm.UNAVAILABLE=14]="UNAVAILABLE",gm[gm.DATA_LOSS=15]="DATA_LOSS";var Em=function(){function t(t,e){this.comparator=t,this.root=e||Tm.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tm.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tm.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Sm(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Sm(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Sm(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Sm(this.root,t,this.comparator,!0)},t}(),Sm=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Tm=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw fd();if(this.right.isRed())throw fd();var t=this.left.check();if(t!==this.right.check())throw fd();return t+(this.isRed()?0:1)},t}();Tm.EMPTY=null,Tm.RED=!0,Tm.BLACK=!1,Tm.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw fd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw fd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw fd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw fd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw fd()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Tm(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Om=function(){function t(t){this.comparator=t,this.data=new Em(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Im(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Im(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Im=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Cm=new Em(qd.comparator);function xm(){return Cm}var km=new Em(qd.comparator);function Am(){return km}var jm=new Em(qd.comparator);function Nm(){return jm}var Rm=new Om(qd.comparator);function Pm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Rm,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Dm=new Om(yd);function Lm(){return Dm}var Fm=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Mm.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(wd.min(),r,Lm(),xm(),Pm())},t}(),Mm=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Ad.EMPTY_BYTE_STRING,n,Pm(),Pm(),Pm())},t}(),Um=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},qm=function(t,e){this.targetId=t,this.V=e},Vm=function(t,e,n,r){void 0===n&&(n=Ad.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Bm=function(){function t(){this.S=0,this.D=Qm(),this.C=Ad.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Pm(),e=Pm(),n=Pm();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:fd()}})),new Mm(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Qm()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),zm=function(){function t(t){this.W=t,this.G=new Map,this.H=xm(),this.J=Hm(),this.Y=new Om(yd)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:fd()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(sp(i))if(0===n){var o=new qd(i.path);this.tt(e,o,ep.newNoDocument(o,wd.min()))}else dd(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&sp(o.target)){var s=new qd(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,ep.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Pm();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Fm(t,n,this.Y,this.H,r);return this.H=xm(),this.J=Hm(),this.Y=new Om(yd),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Bm,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Om(yd),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||ud("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Bm),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Hm(){return new Em(qd.comparator)}function Qm(){return new Em(qd.comparator)}var Km={asc:"ASCENDING",desc:"DESCENDING"},Gm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$m=function(t,e){this.databaseId=t,this.I=e};function Wm(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xm(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ym(t,e){return Wm(t,e.toTimestamp())}function Jm(t){return dd(!!t),wd.fromTimestamp(function(t){var e=Nd(t);return new _d(e.seconds,e.nanos)}(t))}function Zm(t,e){return function(t){return new Id(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function tg(t){var e=Id.fromString(t);return dd(Sg(e)),e}function eg(t,e){return Zm(t.databaseId,e.path)}function ng(t,e){var n=tg(e);if(n.get(1)!==t.databaseId.projectId)throw new od(id.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new od(id.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qd(sg(n))}function rg(t,e){return Zm(t.databaseId,e)}function ig(t){var e=tg(t);return 4===e.length?Id.emptyPath():sg(e)}function og(t){return new Id(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sg(t){return dd(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ag(t,e,n){return{name:eg(t,e),fields:n.toProto().mapValue.fields}}function ug(t,e,n){var r=ng(t,e.name),i=Jm(e.updateTime),o=new Zd({mapValue:{fields:e.fields}}),s=ep.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function cg(t,e){var n;if(e instanceof lm)n={update:ag(t,e.key,e.value)};else if(e instanceof ym)n={delete:eg(t,e.key)};else if(e instanceof hm)n={update:ag(t,e.key,e.data),updateMask:Eg(e.fieldMask)};else{if(!(e instanceof vm))return fd();n={verify:eg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Kp)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gp)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wp)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yp)return{fieldPath:e.field.canonicalString(),increment:n.A};throw fd()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ym(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:fd()}(t,e.precondition)),n}function lg(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?nm.updateTime(Jm(t.updateTime)):void 0!==t.exists?nm.exists(t.exists):nm.none()}(e.currentDocument):nm.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(dd("REQUEST_TIME"===e.setToServerValue),n=new Kp):"appendMissingElements"in e?n=new Gp(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Wp(e.removeAllFromArray.values||[]):"increment"in e?n=new Yp(t,e.increment):fd();var r=xd.fromServerFormat(e.fieldPath);return new tm(r,n)}(t,e)})):[];if(e.update){var i=ng(t,e.update.name),o=new Zd({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new kd((t.fieldPaths||[]).map((function(t){return xd.fromServerFormat(t)})))}(e.updateMask);return new hm(i,o,s,n,r)}return new lm(i,o,n,r)}if(e.delete){var a=ng(t,e.delete);return new ym(a,n)}if(e.verify){var u=ng(t,e.verify);return new vm(u,n)}return fd()}function hg(t,e){return{documents:[rg(t,e.path)]}}function fg(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=rg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=rg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Yd(t.value))return{unaryFilter:{field:vg(t.field),op:"IS_NAN"}};if(Xd(t.value))return{unaryFilter:{field:vg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Yd(t.value))return{unaryFilter:{field:vg(t.field),op:"IS_NOT_NAN"}};if(Xd(t.value))return{unaryFilter:{field:vg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vg(t.field),op:yg(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:vg(t.field),direction:gg(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Fd(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=pg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=pg(e.endAt)),n}function dg(t){var e=ig(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){dd(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[wg(e)]:void 0!==e.fieldFilter?[_g(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):fd():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new vp(bg(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Fd(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=mg(n.startAt));var l=null;return n.endAt&&(l=mg(n.endAt)),Sp(e,i,a,s,u,"F",c,l)}function pg(t){return{before:t.before,values:t.position}}function mg(t){return new gp(t.values||[],!!t.before)}function gg(t){return Km[t]}function yg(t){return Gm[t]}function vg(t){return{fieldPath:t.canonicalString()}}function bg(t){return xd.fromServerFormat(t.fieldPath)}function _g(t){return ap.create(bg(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return fd()}}(t.fieldFilter.op),t.fieldFilter.value)}function wg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=bg(t.unaryFilter.field);return ap.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=bg(t.unaryFilter.field);return ap.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=bg(t.unaryFilter.field);return ap.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=bg(t.unaryFilter.field);return ap.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return fd()}}function Eg(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Sg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Tg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ig(e)),e=Og(t.get(n),e);return Ig(e)}function Og(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ig(t){return t+"\x01\x01"}function Cg(t){var e=t.length;if(dd(e>=2),2===e)return dd("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Id.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&fd(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:fd()}o=s+2}return new Id(r)}var xg=function(t,e){this.seconds=t,this.nanoseconds=e},kg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};kg.store="owner",kg.key="owner";var Ag=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ag.store="mutationQueues",Ag.keyPath="userId";var jg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};jg.store="mutations",jg.keyPath="batchId",jg.userMutationsIndex="userMutationsIndex",jg.userMutationsKeyPath=["userId","batchId"];var Ng=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Tg(e)]},t.key=function(t,e,n){return[t,Tg(e),n]},t}();Ng.store="documentMutations",Ng.PLACEHOLDER=new Ng;var Rg=function(t,e){this.path=t,this.readTime=e},Pg=function(t,e){this.path=t,this.version=e},Dg=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Dg.store="remoteDocuments",Dg.readTimeIndex="readTimeIndex",Dg.readTimeIndexPath="readTime",Dg.collectionReadTimeIndex="collectionReadTimeIndex",Dg.collectionReadTimeIndexPath=["parentPath","readTime"];var Lg=function(t){this.byteSize=t};Lg.store="remoteDocumentGlobal",Lg.key="remoteDocumentGlobalKey";var Fg=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Fg.store="targets",Fg.keyPath="targetId",Fg.queryTargetsIndexName="queryTargetsIndex",Fg.queryTargetsKeyPath=["canonicalId","targetId"];var Mg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Mg.store="targetDocuments",Mg.keyPath=["targetId","path"],Mg.documentTargetsIndex="documentTargetsIndex",Mg.documentTargetsKeyPath=["path","targetId"];var Ug=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ug.key="targetGlobalKey",Ug.store="targetGlobal";var qg=function(t,e){this.collectionId=t,this.parent=e};qg.store="collectionParents",qg.keyPath=["collectionId","parent"];var Vg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Vg.store="clientMetadata",Vg.keyPath="clientId";var Bg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Bg.store="bundles",Bg.keyPath="bundleId";var zg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};zg.store="namedQueries",zg.keyPath="name";var Hg=Object(ku.f)(Object(ku.f)([],Object(ku.f)(Object(ku.f)([],Object(ku.f)(Object(ku.f)([],Object(ku.f)(Object(ku.f)([],[Ag.store,jg.store,Ng.store,Dg.store,Fg.store,kg.store,Ug.store,Mg.store]),[Vg.store])),[Lg.store])),[qg.store])),[Bg.store,zg.store]),Qg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kg=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Gg=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},$g=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&fd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Wg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Gg,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Jg(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=ry(e.target.error);n.ft.reject(new Jg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Jg(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(ud("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ty(e)},t}(),Xg=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(ec.i)())&&cd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ud("SimpleDb","Removing database:",t),ey(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(ec.i)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(ud("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Jg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new od(id.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Jg(t,n))},i.onupgradeneeded=function(t){ud("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){ud("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(ku.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(ku.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(ku.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Wg.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),$g.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return ud("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Yg=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return ey(this.Pt.delete())},t}(),Jg=function(t){function e(e,n){var r=this;return(r=t.call(this,id.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(ku.c)(e,t),e}(od);function Zg(t){return"IndexedDbTransactionError"===t.name}var ty=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ud("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ud("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ey(n)},t.prototype.add=function(t){return ud("SimpleDb","ADD",this.store.name,t,t),ey(this.store.add(t))},t.prototype.get=function(t){var e=this;return ey(this.store.get(t)).next((function(n){return void 0===n&&(n=null),ud("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return ud("SimpleDb","DELETE",this.store.name,t),ey(this.store.delete(t))},t.prototype.count=function(){return ud("SimpleDb","COUNT",this.store.name),ey(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){ud("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new $g((function(n,r){e.onerror=function(t){var e=ry(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new $g((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Yg(i),s=e(i.primaryKey,i.value,o);if(s instanceof $g){var a=s.catch((function(t){return o.done(),$g.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return $g.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ey(t){return new $g((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ry(t.target.error);n(e)}}))}var ny=!1;function ry(t){var e=Xg._t(Object(ec.i)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new od("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ny||(ny=!0,setTimeout((function(){throw r}),0)),r}}return t}var iy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(ku.c)(e,t),e}(Kg);function oy(t,e){var n=pd(t);return Xg.It(n.Mt,e)}var sy=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&om(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&sm(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&sm(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(wd.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Pm())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&vd(this.mutations,t.mutations,(function(t,e){return um(t,e)}))&&vd(this.baseMutations,t.baseMutations,(function(t,e){return um(t,e)}))},t}(),ay=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){dd(e.mutations.length===r.length);for(var i=Nm(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),uy=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=wd.min()),void 0===o&&(o=wd.min()),void 0===s&&(s=Ad.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),cy=function(t){this.Lt=t};function ly(t,e){if(e.document)return ug(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=qd.fromSegments(e.noDocument.path),r=my(e.noDocument.readTime),i=ep.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=qd.fromSegments(e.unknownDocument.path);return r=my(e.unknownDocument.version),ep.newUnknownDocument(o,r)}return fd()}function hy(t,e,n){var r=fy(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:eg(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Wm(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Dg(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=py(e.version);return s=e.hasCommittedMutations,new Dg(null,new Rg(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=py(e.version);return new Dg(new Pg(c,l),null,null,!0,r,i)}return fd()}function fy(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function dy(t){var e=new _d(t[0],t[1]);return wd.fromTimestamp(e)}function py(t){var e=t.toTimestamp();return new xg(e.seconds,e.nanoseconds)}function my(t){var e=new _d(t.seconds,t.nanoseconds);return wd.fromTimestamp(e)}function gy(t,e){for(var n=(e.baseMutations||[]).map((function(e){return lg(t.Lt,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return lg(t.Lt,e)})),o=_d.fromMillis(e.localWriteTimeMs);return new sy(e.batchId,o,n,i)}function yy(t){var e,n,r=my(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?my(t.lastLimboFreeSnapshotVersion):wd.min();return void 0!==t.query.documents?(dd(1===(n=t.query).documents.length),e=jp(Tp(ig(n.documents[0])))):e=function(t){return jp(dg(t))}(t.query),new uy(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ad.fromBase64String(t.resumeToken))}function vy(t,e){var n,r=py(e.snapshotVersion),i=py(e.lastLimboFreeSnapshotVersion);n=sp(e.target)?hg(t.Lt,e.target):fg(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Fg(e.targetId,ip(e.target),r,o,e.sequenceNumber,i,n)}function by(t){var e=dg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Np(e,e.limit,"L"):e}var _y=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return wy(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:my(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return wy(t).put({bundleId:(n=e).id,createTime:py(Jm(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ey(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:by(e.bundledQuery),readTime:my(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Ey(t).put(function(t){return{name:t.name,readTime:py(Jm(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function wy(t){return oy(t,Bg.store)}function Ey(t){return oy(t,zg.store)}var Sy=function(){function t(){this.Bt=new Ty}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),$g.resolve()},t.prototype.getCollectionParents=function(t,e){return $g.resolve(this.Bt.getEntries(e))},t}(),Ty=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Om(Id.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Om(Id.comparator)).toArray()},t}(),Oy=function(){function t(){this.qt=new Ty}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Tg(i)};return Iy(t).put(o)}return $g.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[bd(e),""],!1,!0);return Iy(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Cg(o.parent))}return n}))},t}();function Iy(t){return oy(t,qg.store)}var Cy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xy=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ky(t,e,n){var r=t.store(jg.store),i=t.store(Ng.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){dd(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Ng.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return $g.waitFor(o).next((function(){return c}))}function Ay(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw fd();e=t.noDocument}return JSON.stringify(e).length}xy.DEFAULT_COLLECTION_PERCENTILE=10,xy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xy.DEFAULT=new xy(41943040,xy.DEFAULT_COLLECTION_PERCENTILE,xy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xy.DISABLED=new xy(-1,0,0);var jy=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return dd(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ry(t).Ot({index:jg.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Py(t),s=Ry(t);return s.add({}).next((function(a){dd("number"==typeof a);for(var u=new sy(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return cg(t.Lt,e)})),i=n.mutations.map((function(e){return cg(t.Lt,e)}));return new jg(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Om((function(t,e){return yd(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=Ng.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(m,Ng.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[a]=u.keys()})),$g.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Ry(t).get(e).next((function(t){return t?(dd(t.userId===n.userId),gy(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?$g.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ry(t).Ot({index:jg.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(dd(e.batchId>=r),o=gy(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ry(t).Ot({index:jg.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ry(t).Nt(jg.userMutationsIndex,n).next((function(t){return t.map((function(t){return gy(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ng.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Py(t).Ot({range:i},(function(r,i,s){var a=r[0],u=r[2],c=Cg(r[1]);if(a===n.userId&&e.path.isEqual(c))return Ry(t).get(u).next((function(t){if(!t)throw fd();dd(t.userId===n.userId),o.push(gy(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Om(yd),i=[];return e.forEach((function(e){var o=Ng.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Py(t).Ot({range:s},(function(t,i,o){var s=t[0],a=t[2],u=Cg(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),$g.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ng.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Om(yd);return Py(t).Ot({range:s},(function(t,e,o){var s=t[0],u=t[2],c=Cg(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ry(t).get(e).next((function(t){if(null===t)throw fd();dd(t.userId===n.userId),r.push(gy(n.R,t))})))})),$g.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return ky(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),$g.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return $g.resolve();var r=IDBKeyRange.lowerBound(Ng.prefixForUser(e.userId)),i=[];return Py(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Cg(t[1]);i.push(o)}else r.done()})).next((function(){dd(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Ny(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Dy(t).get(this.userId).next((function(t){return t||new Ag(e.userId,-1,"")}))},t}();function Ny(t,e,n){var r=Ng.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Py(t).Ot({range:o,kt:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function Ry(t){return oy(t,jg.store)}function Py(t){return oy(t,Ng.store)}function Dy(t){return oy(t,Ag.store)}var Ly=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Fy=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Ly(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return wd.fromTimestamp(new _d(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return My(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return dd(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return My(t).Ot((function(s,a){var u=yy(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return $g.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return My(t).Ot((function(t,n){var r=yy(n);e(r)}))},t.prototype.Xt=function(t){return Uy(t).get(Ug.key).next((function(t){return dd(null!==t),t}))},t.prototype.Zt=function(t,e){return Uy(t).put(Ug.key,e)},t.prototype.te=function(t,e){return My(t).put(vy(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ip(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return My(t).Ot({range:r,index:Fg.queryTargetsIndexName},(function(t,n,r){var o=yy(n);op(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=qy(t);return e.forEach((function(e){var s=Tg(e.path);i.push(o.put(new Mg(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),$g.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=qy(t);return $g.forEach(e,(function(e){var o=Tg(e.path);return $g.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=qy(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=qy(t),i=Pm();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=Cg(t[1]),o=new qd(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Tg(e.path),r=IDBKeyRange.bound([n],[bd(n)],!1,!0),i=0;return qy(t).Ot({index:Mg.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return My(t).get(e).next((function(t){return t?yy(t):null}))},t}();function My(t){return oy(t,Fg.store)}function Uy(t){return oy(t,Ug.store)}function qy(t){return oy(t,Mg.store)}function Vy(t){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){if(t.code!==id.FAILED_PRECONDITION||t.message!==Qg)throw t;return ud("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function By(t,e){var n=t[1],r=e[1],i=yd(t[0],e[0]);return 0===i?yd(n,r):i}var zy=function(){function t(t){this.ne=t,this.buffer=new Om(By),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();By(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Hy=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;ud("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(ku.b)(e,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Zg(e=n.sent())?(ud("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Vy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Qy=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return $g.resolve(rd.o);var r=new zy(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ud("LruGarbageCollector","Garbage collection skipped; disabled"),$g.resolve(Cy)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ud("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Cy):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(ud("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),ad()<=nc.a.DEBUG&&ud("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),$g.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Ky=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Qy(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Gy(t,n)},t.prototype.removeReference=function(t,e,n){return Gy(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Gy(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Dy(t).$t((function(r){return Ny(t,r,e).next((function(t){return t&&(n=!0),$g.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),qy(t).delete([0,Tg(s.path)])}))}));i.push(u)}})).next((function(){return $g.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Gy(t,e)},t.prototype.we=function(t,e){var n,r=qy(t),i=rd.o;return r.Ot({index:Mg.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==rd.o&&e(new qd(Cg(n)),i),i=s,n=o):i=rd.o})).next((function(){i!==rd.o&&e(new qd(Cg(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Gy(t,e){return qy(t).put(function(t,e){return new Mg(0,Tg(t.path),e)}(e,t.currentSequenceNumber))}var $y=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Sd(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return Td(this.inner)},t}(),Wy=function(){function t(){this.changes=new $y((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:wd.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ep.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?$g.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Xy=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Zy(t).put(tv(e),n)},t.prototype.removeEntry=function(t,e){var n=Zy(t),r=tv(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Zy(t).get(tv(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Zy(t).get(tv(e)).next((function(t){return{document:n.ye(e,t),size:Ay(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=xm();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=xm(),i=new Em(qd.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Ay(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return $g.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Zy(t).Ot({range:r},(function(t,e,r){for(var s=qd.fromSegments(t);o&&qd.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=xm(),o=e.path.length+1,s={};if(n.isEqual(wd.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=fy(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Dg.collectionReadTimeIndex}return Zy(t).Ot(s,(function(t,n,s){if(t.length===o){var a=ly(r.R,n);e.path.isPrefixOf(a.key.path)?Lp(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Yy(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Jy(t).get(Lg.key).next((function(t){return dd(!!t),t}))},t.prototype.me=function(t,e){return Jy(t).put(Lg.key,e)},t.prototype.ye=function(t,e){if(e){var n=ly(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(wd.min()))return n}return ep.newInvalidDocument(t)},t}(),Yy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new $y((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(ku.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Om((function(t,e){return yd(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=hy(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ay(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=hy(e.Ie.R,ep.newNoDocument(o,wd.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),$g.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Wy);function Jy(t){return oy(t,Lg.store)}function Zy(t){return oy(t,Dg.store)}function tv(t){return t.path.toArray()}var ev=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;dd(n<r&&n>=0&&r<=11);var o=new Wg("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(kg.store)}(t),function(t){t.createObjectStore(Ag.store,{keyPath:Ag.keyPath}),t.createObjectStore(jg.store,{keyPath:jg.keyPath,autoIncrement:!0}).createIndex(jg.userMutationsIndex,jg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ng.store)}(t),nv(t),function(t){t.createObjectStore(Dg.store)}(t));var s=$g.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Mg.store),t.deleteObjectStore(Fg.store),t.deleteObjectStore(Ug.store)}(t),nv(t)),s=s.next((function(){return function(t){var e=t.store(Ug.store),n=new Ug(0,0,wd.min().toTimestamp(),0);return e.put(Ug.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(jg.store).Nt().next((function(n){t.deleteObjectStore(jg.store),t.createObjectStore(jg.store,{keyPath:jg.keyPath,autoIncrement:!0}).createIndex(jg.userMutationsIndex,jg.userMutationsKeyPath,{unique:!0});var r=e.store(jg.store),i=n.map((function(t){return r.put(t)}));return $g.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Vg.store,{keyPath:Vg.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Lg.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Dg.store);e.createIndex(Dg.readTimeIndex,Dg.readTimeIndexPath,{unique:!1}),e.createIndex(Dg.collectionReadTimeIndex,Dg.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Bg.store,{keyPath:Bg.keyPath})}(t),function(t){t.createObjectStore(zg.store,{keyPath:zg.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(Dg.store).Ot((function(t,n){e+=Ay(n)})).next((function(){var n=new Lg(e);return t.store(Lg.store).put(Lg.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Ag.store),r=t.store(jg.store);return n.Nt().next((function(n){return $g.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(jg.userMutationsIndex,i).next((function(r){return $g.forEach(r,(function(r){dd(r.userId===n.userId);var i=gy(e.R,r);return ky(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Mg.store),n=t.store(Dg.store);return t.store(Ug.store).get(Ug.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new Id(n),s=function(t){return[0,Tg(t)]}(o);r.push(e.get(s).next((function(n){return n?$g.resolve():function(n){return e.put(new Mg(0,Tg(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return $g.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(qg.store,{keyPath:qg.keyPath});var n=e.store(qg.store),r=new Ty,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Tg(i)})}};return e.store(Dg.store).Ot({kt:!0},(function(t,e){var n=new Id(t);return i(n.popLast())})).next((function(){return e.store(Ng.store).Ot({kt:!0},(function(t,e){var n=Cg(t[1]);return i(n.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Fg.store);return n.Ot((function(t,r){var i=yy(r),o=vy(e.R,i);return n.put(o)}))},t}();function nv(t){t.createObjectStore(Mg.store,{keyPath:Mg.keyPath}).createIndex(Mg.documentTargetsIndex,Mg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Fg.store,{keyPath:Fg.keyPath}).createIndex(Fg.queryTargetsIndexName,Fg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ug.store)}var rv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iv=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new od(id.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ky(this,i),this.Le=n+"main",this.R=new cy(u),this.Be=new Xg(this.Le,11,new ev(this.R)),this.qe=new Fy(this.referenceDelegate,this.R),this.Ut=new Oy,this.Ue=function(t,e){return new Xy(t,e)}(this.R,this.Ut),this.Qe=new _y,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&cd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new od(id.FAILED_PRECONDITION,rv);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new rd(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(ku.b)(e,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(ku.b)(e,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(ku.b)(e,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return sv(e).put(new Vg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Zg(e))return ud("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ud("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return ov(t).get(kg.key).next((function(t){return $g.resolve(e.tn(t))}))},t.prototype.en=function(t){return sv(t).delete(this.clientId)},t.prototype.nn=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=oy(t,Vg.store);return e.Nt().next((function(t){var n=r.rn(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return $g.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?$g.resolve(!0):ov(t).get(kg.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new od(id.FAILED_PRECONDITION,rv);return!1}}return!(!e.networkEnabled||!e.inForeground)||sv(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&ud("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t=this;return Object(ku.d)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[kg.store,Vg.store],(function(e){var n=new iy(e,rd.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return sv(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return jy.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ud("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Hg,(function(o){return r=new iy(o,i.Ne?i.Ne.next():rd.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw cd("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new od(id.FAILED_PRECONDITION,Qg);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return ov(t).get(kg.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new od(id.FAILED_PRECONDITION,rv)}))},t.prototype.Ze=function(t){var e=new kg(this.clientId,this.allowTabSynchronization,Date.now());return ov(t).put(kg.key,e)},t.yt=function(){return Xg.yt()},t.prototype.Xe=function(t){var e=this,n=ov(t);return n.get(kg.key).next((function(t){return e.tn(t)?(ud("IndexedDbPersistence","Releasing primary lease."),n.delete(kg.key)):$g.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(cd("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return ud("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return cd("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){cd("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ov(t){return oy(t,kg.store)}function sv(t){return oy(t,Vg.store)}function av(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var uv=function(t,e){this.progress=t,this.wn=e},cv=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return qd.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):kp(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new qd(e)).next((function(t){var e=Am();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Am();return this.Ut.getCollectionParents(t,i).next((function(s){return $g.forEach(s,(function(s){var a=function(t,e){return new Ep(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.Rn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=ep.newInvalidDocument(c),r=r.insert(c,l)),sm(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Lp(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Pm(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof hm&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),lv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Pm(),i=Pm(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),hv=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(wd.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Op(e)||Ip(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(ad()<=nc.a.DEBUG&&ud("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Dp(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Om(Fp(t));return e.forEach((function(e,r){Lp(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ad()<=nc.a.DEBUG&&ud("QueryEngine","Using full collection scan to execute query:",Dp(e)),this.Sn.getDocumentsMatchingQuery(t,e,wd.min())},t}(),fv=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Em(yd),this.kn=new $y((function(t){return ip(t)}),op),this.On=wd.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new cv(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function dv(t,e,n,r){return new fv(t,e,n,r)}function pv(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ku.d)(this,(function(s){switch(s.label){case 0:return n=pd(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new cv(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=Pm(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)s=s.add(g[m].key)}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function mv(t,e){var n=pd(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=$g.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);dd(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function gv(t){var e=pd(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function yv(t,e){var n=pd(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return dd(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=xm();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(vv(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(wd.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return $g.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function vv(t,e,n,r,i){var o=Pm();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=xm();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(wd.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):ud("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function bv(t,e){var n=pd(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function _v(t,e){var n=pd(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?$g.resolve(r=i):n.qe.allocateTargetId(t).next((function(i){return r=new uy(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function wv(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ku.d)(this,(function(a){switch(a.label){case 0:r=pd(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Zg(s=a.sent()))throw s;return ud("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Ev(t,e,n){var r=pd(t),i=wd.min(),o=Pm();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=pd(t),i=r.kn.get(n);return void 0!==i?$g.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,jp(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:wd.min(),n?o:Pm())})).next((function(t){return{documents:t,Bn:o}}))}))}function Sv(t,e){var n=pd(t),r=pd(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Tv(t){var e=pd(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=pd(t),i=xm(),o=fy(n),s=Zy(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Dg.readTimeIndex,range:a},(function(t,e){var n=ly(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:dy(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn;return e.On=t.readTime,n}))}function Ov(t){return Object(ku.b)(this,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){return[2,(e=pd(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Zy(t),n=wd.min();return e.Ot({index:Dg.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=dy(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function Iv(t,e,n,r){return Object(ku.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,d;return Object(ku.d)(this,(function(p){switch(p.label){case 0:for(i=pd(t),o=Pm(),s=xm(),a=Nm(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,_v(i,function(t){return jp(Tp(Id.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return vv(t,f,s,wd.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Cv(t,e,n){return void 0===n&&(n=Pm()),Object(ku.b)(this,void 0,void 0,(function(){var r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return[4,_v(t,jp(by(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=pd(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Jm(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Ad.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var xv=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return $g.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Jm(n.createTime)}),$g.resolve()},t.prototype.getNamedQuery=function(t,e){return $g.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:by(t.bundledQuery),readTime:Jm(t.readTime)}}(e)),$g.resolve()},t}(),kv=function(){function t(){this.Wn=new Om(Av.Gn),this.zn=new Om(Av.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Av(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Av(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new qd(new Id([])),r=new Av(n,t),i=new Av(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new qd(new Id([])),n=new Av(e,t),r=new Av(e,t+1),i=Pm();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Av(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Av=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return qd.comparator(t.key,e.key)||yd(t.ns,e.ns)},t.Hn=function(t,e){return yd(t.ns,e.ns)||qd.comparator(t.key,e.key)},t}(),jv=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Om(Av.Gn)}return t.prototype.checkEmpty=function(t){return $g.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new sy(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Av(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return $g.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return $g.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return $g.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return $g.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return $g.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Av(e,0),i=new Av(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),$g.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Om(yd);return e.forEach((function(t){var e=new Av(t,0),i=new Av(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),$g.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;qd.isDocumentKey(i)||(i=i.child(""));var o=new Av(new qd(i),0),s=new Om(yd);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),$g.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;dd(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return $g.forEach(e.mutations,(function(i){var o=new Av(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Av(e,0),r=this.rs.firstAfterOrEqual(n);return $g.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return $g.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Nv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Em(qd.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return $g.resolve(n?n.document.clone():ep.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=xm();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ep.newInvalidDocument(t))})),$g.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=xm(),i=new qd(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Lp(e,u)&&(r=r.insert(u.key,u.clone()))}return $g.resolve(r)},t.prototype.fs=function(t,e){return $g.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Rv(this)},t.prototype.getSize=function(t){return $g.resolve(this.size)},t}(),Rv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(ku.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),$g.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Wy),Pv=function(){function t(t){this.persistence=t,this.ds=new $y((function(t){return ip(t)}),op),this.lastRemoteSnapshotVersion=wd.min(),this.highestTargetId=0,this.ws=0,this._s=new kv,this.targetCount=0,this.ys=Ly.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),$g.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return $g.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return $g.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),$g.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),$g.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ly(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,$g.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),$g.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,$g.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),$g.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return $g.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return $g.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),$g.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),$g.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),$g.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return $g.resolve(n)},t.prototype.containsKey=function(t,e){return $g.resolve(this._s.containsKey(e))},t}(),Dv=function(){function t(t,e){var n=this;this.gs={},this.Ne=new rd(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Pv(this),this.Ut=new Sy,this.Ue=function(t,e){return new Nv(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new cy(e),this.Qe=new xv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new jv(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;ud("MemoryPersistence","Starting transaction:",t);var i=new Lv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return $g.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Lv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(ku.c)(e,t),e}(Kg),Fv=function(){function t(t){this.persistence=t,this.As=new kv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw fd()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),$g.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),$g.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),$g.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $g.forEach(this.vs,(function(r){var i=qd.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return $g.or([function(){return $g.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Mv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Uv(t,e){return"firestore_clients_"+t+"_"+e}function qv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Vv(t,e){return"firestore_targets_"+t+"_"+e}Mv.UNAUTHENTICATED=new Mv(null),Mv.GOOGLE_CREDENTIALS=new Mv("google-credentials-uid"),Mv.FIRST_PARTY=new Mv("first-party-uid");var Bv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new od(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(cd("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new od(i.error.code,i.error.message)),o?new t(e,i.state,r):(cd("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Lm(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ud(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(cd("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Qv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(cd("SharedClientState","Failed to parse online state: "+e),null)},t}(),Kv=function(){function t(){this.activeTargetIds=Lm()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Gv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Em(yd),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Uv(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Kv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(ku.d)(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Uv(this.persistenceKey,r)))&&(o=Hv.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Vv(this.persistenceKey,t));if(n){var r=zv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Vv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ud("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ud("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ud("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ud("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void cd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(ku.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(ku.d)(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=rd.o;if(null!=t)try{var n=JSON.parse(t);dd("number"==typeof n),e=n}catch(t){cd("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==rd.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Bv(this.currentUser,t,e,n),i=qv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=qv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Vv(this.persistenceKey,t),i=new zv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Hv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Bv.Vs(new Mv(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return zv.Vs(r,e)},t.prototype.js=function(t){return Qv.Vs(t)},t.prototype.ii=function(t){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(ud("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Lm();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),$v=function(){function t(){this.li=new Kv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Kv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Wv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Xv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){ud("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){ud("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Yv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Jv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Zv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(ku.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new nd;s.listenOnce(Zf.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Jf.NO_ERROR:var e=s.getResponseJson();ud("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Jf.TIMEOUT:ud("Connection",'RPC "'+t+'" timed out'),o(new od(id.DEADLINE_EXCEEDED,"Request time out"));break;case Jf.HTTP_ERROR:var n=s.getStatus();if(ud("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(id).indexOf(e)>=0?e:id.UNKNOWN}(r.status);o(new od(a,r.message))}else o(new od(id.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new od(id.UNAVAILABLE,"Connection failed."));break;default:fd()}}finally{ud("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Gf,i=Wl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(ec.n)()||Object(ec.p)()||Object(ec.l)()||Object(ec.m)()||Object(ec.q)()||Object(ec.k)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");ud("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Jv({Ei:function(t){c?ud("Connection","Not sending because WebChannel is closed:",t):(u||(ud("Connection","Opening WebChannel transport."),a.open(),u=!0),ud("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,ed.EventType.OPEN,(function(){c||ud("Connection","WebChannel transport opened.")})),h(a,ed.EventType.CLOSE,(function(){c||(c=!0,ud("Connection","WebChannel transport closed"),l.Vi())})),h(a,ed.EventType.ERROR,(function(t){c||(c=!0,ld("Connection","WebChannel transport errored:",t),l.Vi(new od(id.UNAVAILABLE,"The operation could not be completed")))})),h(a,ed.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];dd(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ud("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=mm[t];if(void 0!==e)return wm(e)}(i),s=r.message;void 0===o&&(o=id.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new od(o,s)),a.close()}else ud("Connection","WebChannel received:",n),l.Si(n)}})),h(i,td.STAT_EVENT,(function(t){10===t.stat?ud("Connection","Detected buffering proxy"):11===t.stat&&ud("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);ud("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return ud("RestConnection","Received: ",t),t}),(function(e){throw ld("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Yv[t]},t}());function tb(){return"undefined"!=typeof window?window:null}function eb(){return"undefined"!=typeof document?document:null}function nb(t){return new $m(t,!0)}var rb=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&ud("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),ib=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new rb(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===id.RESOURCE_EXHAUSTED?(cd(e.toString()),cd("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===id.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new od(id.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(ku.b)(t,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return ud("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(ud("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ob=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(ku.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:fd()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(dd(void 0===e||"string"==typeof e),Ad.fromBase64String(e||"")):(dd(void 0===e||e instanceof Uint8Array),Ad.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?id.UNKNOWN:wm(t.code);return new od(e,t.message||"")}(a);n=new Vm(r,i,o,s||null)}else if("documentChange"in e){i=ng(t,(r=e.documentChange).document.name),o=Jm(r.document.updateTime);var a=new Zd({mapValue:{fields:r.document.fields}}),u=(s=ep.newFoundDocument(i,o,a),r.targetIds||[]);n=new Um(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=ng(t,(r=e.documentDelete).document),o=r.readTime?Jm(r.readTime):wd.min(),a=ep.newNoDocument(i,o),n=new Um([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=ng(t,(r=e.documentRemove).document),n=new Um([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return fd();var c=e.filter;i=new bm(r=c.count||0),n=new qm(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return wd.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?wd.min():e.readTime?Jm(e.readTime):wd.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=og(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=sp(r)?{documents:hg(t,r)}:{query:fg(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Xm(t,e.resumeToken):e.snapshotVersion.compareTo(wd.min())>0&&(n.readTime=Wm(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fd()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=og(this.R),e.removeTarget=t,this.cr(e)},e}(ib),sb=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(ku.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(dd(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(dd(void 0!==e),t.map((function(t){return function(t,e){var n=Jm(t.updateTime?t.updateTime:e);return n.isEqual(wd.min())&&(n=Jm(e)),new em(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Jm(t.commitTime);return this.listener.Tr(n,e)}return dd(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=og(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return cg(e.R,t)}))};this.cr(n)},e}(ib),ab=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(ku.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new od(id.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===id.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new od(id.UNKNOWN,t.toString())}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===id.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new od(id.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),ub=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(cd(e),this.Vr=!1):ud("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),cb=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(ku.b)(o,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){switch(t.label){case 0:return vb(this)?(ud("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return(e=pd(t)).$r.add(4),[4,hb(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,lb(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new ub(n,r)};function lb(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:if(!vb(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function hb(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function fb(t,e){var n=pd(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),yb(n)?gb(n):Rb(n).er()&&pb(n,e))}function db(t,e){var n=pd(t),r=Rb(n);n.Or.delete(e),r.er()&&mb(n,e),0===n.Or.size&&(r.er()?r.ir():vb(n)&&n.Br.set("Unknown"))}function pb(t,e){t.qr.U(e.targetId),Rb(t).mr(e)}function mb(t,e){t.qr.U(e),Rb(t).yr(e)}function gb(t){t.qr=new zm({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Rb(t).start(),t.Br.Sr()}function yb(t){return vb(t)&&!Rb(t).tr()&&t.Or.size>0}function vb(t){return 0===pd(t).$r.size}function bb(t){t.qr=void 0}function _b(t){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){return t.Or.forEach((function(e,n){pb(t,e)})),[2]}))}))}function wb(t,e){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(n){return bb(t),yb(t)?(t.Br.Nr(e),gb(t)):t.Br.set("Unknown"),[2]}))}))}function Eb(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i,o;return Object(ku.d)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Vm&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ku.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ud("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Sb(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Um?t.qr.X(e):e instanceof qm?t.qr.rt(e):t.qr.et(e),n.isEqual(wd.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,gv(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Ad.EMPTY_BYTE_STRING,n.snapshotVersion)),mb(t,e);var r=new uy(n.target,e,1,n.sequenceNumber);pb(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ud("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Sb(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Sb(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r=this;return Object(ku.d)(this,(function(i){switch(i.label){case 0:if(!Zg(e))throw e;return t.$r.add(1),[4,hb(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return gv(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(ku.b)(r,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return ud("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,lb(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Tb(t,e){return e().catch((function(n){return Sb(t,n,e)}))}function Ob(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(ku.d)(this,(function(s){switch(s.label){case 0:e=pd(t),n=Pb(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return vb(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,bv(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Pb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Sb(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Ib(e)&&Cb(e),[2]}}))}))}function Ib(t){return vb(t)&&!Pb(t).tr()&&t.kr.length>0}function Cb(t){Pb(t).start()}function xb(t){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){return Pb(t).Ar(),[2]}))}))}function kb(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ku.d)(this,(function(i){for(e=Pb(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]}))}))}function Ab(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=ay.from(r,e,n),[4,Tb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Ob(t)];case 2:return o.sent(),[2]}}))}))}function jb(t,e){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(n){switch(n.label){case 0:return e&&Pb(t).pr?[4,function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return _m(r=e.code)&&r!==id.ABORTED?(n=t.kr.shift(),Pb(t).sr(),[4,Tb(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Ob(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ib(t)&&Cb(t),[2]}}))}))}function Nb(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return n=pd(t),e?(n.$r.delete(2),[4,lb(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,hb(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Rb(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=pd(t);return r.br(),new ob(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:_b.bind(null,t),Ri:wb.bind(null,t),_r:Eb.bind(null,t)}),t.Mr.push((function(n){return Object(ku.b)(e,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),yb(t)?gb(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),bb(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Pb(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=pd(t);return r.br(),new sb(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:xb.bind(null,t),Ri:jb.bind(null,t),Ir:kb.bind(null,t),Tr:Ab.bind(null,t)}),t.Mr.push((function(n){return Object(ku.b)(e,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Ob(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(ud("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var Db=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Gg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new od(id.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Lb(t,e){if(cd("AsyncQueue",e+": "+t),Zg(t))return new od(id.UNAVAILABLE,e+": "+t);throw t}var Fb=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||qd.comparator(e.key,n.key)}:function(t,e){return qd.comparator(t.key,e.key)},this.keyedMap=Am(),this.sortedSet=new Em(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Mb=function(){function t(){this.Kr=new Em(qd.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):fd():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Ub=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Fb.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Rp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),qb=function(){this.Wr=void 0,this.listeners=[]},Vb=function(){this.queries=new $y((function(t){return Pp(t)}),Rp),this.onlineState="Unknown",this.Gr=new Set};function Bb(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(ku.d)(this,(function(c){switch(c.label){case 0:if(n=pd(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new qb),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Lb(a,"Initialization of query '"+Dp(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Kb(n),[2]}}))}))}function zb(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ku.d)(this,(function(a){return n=pd(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Hb(t,e){for(var n=pd(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Kb(n)}function Qb(t,e,n){var r=pd(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Kb(t){t.Gr.forEach((function(t){t.next()}))}var Gb=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ub(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ub.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),$b=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Wb=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ng(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?ug(this.R,t.document,!1):ep.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Jm(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Wb(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Pm()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return[4,Iv(this.localStore,new Wb(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Cv(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new uv(Object.assign({},this.progress),t))]}}))}))}}();var Xb=function(t){this.key=t},Yb=function(t){this.key=t},Jb=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Pm(),this.mutatedKeys=Pm(),this.lo=Fp(t),this.fo=new Fb(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Mb,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Op(this.query)&&i.size===this.query.limit?i.last():null,c=Ip(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Lp(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Op(this.query)||Ip(this.query))for(;s.size>this.query.limit;){var l=Op(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fd()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Ub(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Mb,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Pm(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Yb(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Xb(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Pm();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ub.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Zb=function(t,e,n){this.query=t,this.targetId=e,this.view=n},t_=function(t){this.key=t,this.bo=!1},e_=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new $y((function(t){return Pp(t)}),Rp),this.Vo=new Map,this.So=new Set,this.Do=new Em(qd.comparator),this.Co=new Map,this.No=new kv,this.xo={},this.Fo=new Map,this.ko=Ly.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function n_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ku.d)(this,(function(a){switch(a.label){case 0:return n=j_(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,_v(n.localStore,jp(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,r_(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&fb(n.remoteStore,o),a.label=4;case 4:return[2,r]}}))}))}function r_(t,e,n,r){return Object(ku.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(ku.d)(this,(function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(ku.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ku.d)(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Ev(t.localStore,e.query,!1).then((function(t){return e.view._o(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(g_(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Ev(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Jb(e,i.Bn),s=o._o(i.documents),a=Mm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),g_(t,n,u.To),c=new Zb(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function i_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return n=pd(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Rp(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,wv(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),db(n.remoteStore,r.targetId),p_(n,r.targetId)})).catch(Vy)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return p_(n,r.targetId),[4,wv(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function o_(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ku.d)(this,(function(a){switch(a.label){case 0:r=N_(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=pd(t),i=_d.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Pm());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=am(c,n.get(c.key));null!=l&&s.push(new hm(c.key,l,tp(l.toProto().mapValue),nm.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Em(yd)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,b_(r,i.changes)];case 3:return a.sent(),[4,Ob(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Lb(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function s_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r;return Object(ku.d)(this,(function(i){switch(i.label){case 0:n=pd(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,yv(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(dd(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?dd(r.bo):t.removedDocuments.size>0&&(dd(r.bo),r.bo=!1))})),[4,b_(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Vy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function a_(t,e,n){var r=pd(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=pd(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Kb(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function u_(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(ku.d)(this,(function(c){switch(c.label){case 0:return(r=pd(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Em(qd.comparator)).insert(o,ep.newNoDocument(o,wd.min())),a=Pm().add(o),u=new Fm(wd.min(),new Map,new Om(yd),s,a),[4,s_(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),v_(r),[3,4];case 2:return[4,wv(r.localStore,e,!1).then((function(){return p_(r,e,n)})).catch(Vy)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function c_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:n=pd(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,mv(n.localStore,e)];case 2:return i=o.sent(),d_(n,r,null),f_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,b_(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Vy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function l_(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:r=pd(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=pd(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return dd(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),d_(r,e,n),f_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,b_(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Vy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function h_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ku.d)(this,(function(a){switch(a.label){case 0:vb((n=pd(t)).remoteStore)||ud("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=pd(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Lb(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function f_(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function d_(t,e,n){var r=pd(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function p_(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||m_(t,e)}))}function m_(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(db(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),v_(t))}function g_(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Xb?(t.No.addReference(o.key,e),y_(t,o)):o instanceof Yb?(ud("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||m_(t,o.key)):fd()}}function y_(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(ud("SyncEngine","New document in limbo: "+n),t.So.add(r),v_(t))}function v_(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new qd(Id.fromString(e)),r=t.ko.next();t.Co.set(r,new t_(n)),t.Do=t.Do.insert(n,r),fb(t.remoteStore,new uy(jp(Tp(n.path)),r,2,rd.o))}}function b_(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ku.d)(this,(function(a){switch(a.label){case 0:return r=pd(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.$o(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=lv.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(ku.d)(this,(function(l){switch(l.label){case 0:n=pd(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return $g.forEach(e,(function(e){return $g.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return $g.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Zg(r=l.sent()))throw r;return ud("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function __(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return(n=pd(t)).currentUser.isEqual(e)?[3,3]:(ud("SyncEngine","User change. New user:",e.toKey()),[4,pv(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new od(id.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,b_(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function w_(t,e){var n=pd(t),r=n.Co.get(e);if(r&&r.bo)return Pm().add(r.key);var i=Pm(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function E_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return[4,Ev((n=pd(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&g_(n,e.targetId,i.To),i)]}}))}))}function S_(t){return Object(ku.b)(this,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){return[2,Tv((e=pd(t)).localStore).then((function(t){return b_(e,t)}))]}))}))}function T_(t,e,n,r){return Object(ku.b)(this,void 0,void 0,(function(){var i,o;return Object(ku.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=pd(t),r=pd(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):$g.resolve(null)}))}))}((i=pd(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ob(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(d_(i,e,r||null),f_(i,e),function(t,e){pd(pd(t)._n).Gt(e)}(i.localStore,e)):fd(),s.label=4;case 4:return[4,b_(i,o)];case 5:return s.sent(),[3,7];case 6:ud("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function O_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(ku.d)(this,(function(c){switch(c.label){case 0:return j_(n=pd(t)),N_(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,I_(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Nb(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)fb(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then((function(){return p_(n,e),wv(n.localStore,e,!0)})),db(n.remoteStore,e)})),[4,u]);case 4:return c.sent(),[4,I_(n,a)];case 5:return c.sent(),function(t){var e=pd(t);e.Co.forEach((function(t,n){db(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Em(qd.comparator)}(n),n.Oo=!1,[4,Nb(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function I_(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(ku.d)(this,(function(m){switch(m.label){case 0:n=pd(t),r=[],i=[],o=0,s=e,m.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,_v(n.localStore,jp(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,E_(n,f)]):[3,6];case 4:(d=m.sent()).snapshot&&i.push(d.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Sv(n.localStore,a)];case 8:return p=m.sent(),[4,_v(n.localStore,p)];case 9:return u=m.sent(),[4,r_(n,C_(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function C_(t){return Sp(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function x_(t){var e=pd(t);return pd(pd(e.localStore).persistence).fn()}function k_(t,e,n,r){return Object(ku.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ku.d)(this,(function(a){switch(a.label){case 0:return(i=pd(t)).Oo?(ud("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Tv(i.localStore)];case 3:return o=a.sent(),s=Fm.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,b_(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,wv(i.localStore,e,!0)];case 6:return a.sent(),p_(i,e,r),[3,8];case 7:fd(),a.label=8;case 8:return[2]}}))}))}function A_(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(ku.d)(this,(function(f){switch(f.label){case 0:if(!(r=j_(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(ud("SyncEngine","Adding an already active target "+s),[3,5]):[4,Sv(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,_v(r.localStore,a)];case 3:return u=f.sent(),[4,r_(r,C_(a),u.targetId,!1)];case 4:f.sent(),fb(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,wv(r.localStore,t,!1).then((function(){db(r.remoteStore,t),p_(r,t)})).catch(Vy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function j_(t){var e=pd(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=s_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u_.bind(null,e),e.vo._r=Hb.bind(null,e.eventManager),e.vo.Mo=Qb.bind(null,e.eventManager),e}function N_(t){var e=pd(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l_.bind(null,e),e}var R_=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return this.R=nb(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return dv(this.persistence,new hv,t.initialUser,this.R)},t.prototype.qo=function(t){return new Dv(Fv.bs,this.R)},t.prototype.Bo=function(t){return new $v},t.prototype.terminate=function(){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),P_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(ku.c)(e,t),e.prototype.initialize=function(e){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ov(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,N_(this.Ko.syncEngine)];case 4:return n.sent(),[4,Ob(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return dv(this.persistence,new hv,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Hy(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=av(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?xy.withCacheSize(this.cacheSizeBytes):xy.DEFAULT;return new iv(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,tb(),eb(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new $v},e}(R_),D_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(ku.c)(e,t),e.prototype.initialize=function(e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r=this;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Gv?(this.sharedClientState.syncEngine={ui:T_.bind(null,n),ai:k_.bind(null,n),hi:A_.bind(null,n),fn:x_.bind(null,n),ci:S_.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(ku.b)(r,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return[4,O_(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=tb();if(!Gv.yt(e))throw new od(id.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=av(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Gv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(P_),L_=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n=this;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return a_(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=__.bind(null,this.syncEngine),[4,Nb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Vb},t.prototype.createDatastore=function(t){var e=nb(t.databaseInfo.databaseId),n=new Zv(t.databaseInfo);return function(t,e,n){return new ab(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return a_(s.syncEngine,t,0)},o=Xv.yt()?new Xv:new Wv,new cb(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new e_(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return e=pd(t),ud("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,hb(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),F_=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),M_=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Gg,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new $b(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ku.d)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new od(id.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(ku.d)(this,(function(u){switch(u.label){case 0:return n=pd(t),r=og(n.R)+"/documents",i={documents:e.map((function(t){return eg(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){dd(!!e.found);var n=ng(t,e.found.name),r=Jm(e.found.updateTime),i=new Zd({mapValue:{fields:e.found.fields}});return ep.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){dd(!!e.missing),dd(!!e.readTime);var n=ng(t,e.missing),r=Jm(e.readTime);return ep.newNoDocument(n,r)}(t,e):fd()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());dd(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new ym(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ku.d)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=qd.fromPath(n);e.mutations.push(new vm(r,e.precondition(r)))})),[4,function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return n=pd(t),r=og(n.R)+"/documents",i={writes:e.map((function(t){return cg(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw fd();e=wd.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new od(id.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?nm.updateTime(e):nm.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(wd.min()))throw new od(id.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nm.updateTime(e)}return nm.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),U_=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new rb(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(ku.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(ku.d)(this,(function(r){return t=new M_(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Fd(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!_m(e)}return!1},t}(),q_=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Mv.UNAUTHENTICATED,this.clientId=gd.u(),this.credentialListener=function(){},this.receivedInitialUser=new Gg,this.credentials.setChangeListener((function(t){ud("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new od(id.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Gg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(ku.b)(t,void 0,void 0,(function(){var t,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Lb(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function V_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),ud("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return Object(ku.b)(i,void 0,void 0,(function(){return Object(ku.d)(this,(function(t){switch(t.label){case 0:return[4,pv(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function B_(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,z_(t)];case 1:return n=i.sent(),ud("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return(n=pd(t)).asyncQueue.verifyOperationInProgress(),ud("RemoteStore","RemoteStore received new credentials"),r=vb(n),n.$r.add(3),[4,hb(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,lb(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function z_(t){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(ud("FirestoreClient","Using default OfflineComponentProvider"),[4,V_(t,new R_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function H_(t){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(ud("FirestoreClient","Using default OnlineComponentProvider"),[4,B_(t,new L_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Q_(t){return z_(t).then((function(t){return t.persistence}))}function K_(t){return z_(t).then((function(t){return t.localStore}))}function G_(t){return H_(t).then((function(t){return t.remoteStore}))}function $_(t){return H_(t).then((function(t){return t.syncEngine}))}function W_(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return[4,H_(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=n_.bind(null,e.syncEngine),n.onUnlisten=i_.bind(null,e.syncEngine),n)]}}))}))}function X_(t,e,n){var r=this;void 0===n&&(n={});var i=new Gg;return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(r,void 0,void 0,(function(){var r;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new F_({next:function(o){e.enqueueAndForget((function(){return zb(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new od(id.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new od(id.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Gb(Tp(n.path),o,{includeMetadataChanges:!0,so:!0});return Bb(t,s)},[4,W_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Y_(t,e,n){var r=this;void 0===n&&(n={});var i=new Gg;return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(r,void 0,void 0,(function(){var r;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new F_({next:function(n){e.enqueueAndForget((function(){return zb(t,s)})),n.fromCache&&"server"===r.source?i.reject(new od(id.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Gb(n,o,{includeMetadataChanges:!0,so:!0});return Bb(t,s)},[4,W_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var J_=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Z_=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),tw=new Map,ew=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},nw=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Mv.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),rw=function(){function t(t){var e=this;this.oc=null,this.currentUser=Mv.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(ud("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(dd("string"==typeof n.accessToken),new ew(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return dd(null===t||"string"==typeof t),new Mv(t)},t}(),iw=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Mv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),ow=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new iw(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Mv.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function sw(t,e,n){if(!n)throw new od(id.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function aw(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new od(id.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function uw(t,e,n,r){if(!0===e&&!0===r)throw new od(id.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function cw(t){if(!qd.isDocumentKey(t))throw new od(id.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function lw(t){if(qd.isDocumentKey(t))throw new od(id.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function hw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":fd()}function fw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new od(id.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hw(t);throw new od(id.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function dw(t,e){if(e<=0)throw new od(id.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var pw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new od(id.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new od(id.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,uw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),mw=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new pw({}),this._settingsFrozen=!1,t instanceof Z_?(this._databaseId=t,this._credentials=new nw):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new od(id.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Z_(t.options.projectId)}(t),this._credentials=new rw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new od(id.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new od(id.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pw(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new nw;switch(t.type){case"gapi":var e=t.client;return dd(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ow(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new od(id.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=tw.get(this))&&(ud("ComponentProvider","Removing Datastore"),tw.delete(this),t.terminate()),Promise.resolve();var t},t}(),gw=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new vw(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),yw=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),vw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Tp(r))||this)._path=r,i.type="collection",i}return Object(ku.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new gw(this.firestore,null,new qd(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(yw);function bw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ec.h)(t),sw("collection","path",e),t instanceof mw)return lw(n=Id.fromString.apply(Id,Object(ku.f)([e],r))),new vw(t,null,n);if(!(t instanceof gw||t instanceof vw))throw new od(id.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lw(n=Id.fromString.apply(Id,Object(ku.f)([t.path],r)).child(Id.fromString(e))),new vw(t.firestore,null,n)}function _w(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ec.h)(t),1===arguments.length&&(e=gd.u()),sw("doc","path",e),t instanceof mw)return cw(n=Id.fromString.apply(Id,Object(ku.f)([e],r))),new gw(t,null,new qd(n));if(!(t instanceof gw||t instanceof vw))throw new od(id.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cw(n=t._path.child(Id.fromString.apply(Id,Object(ku.f)([e],r)))),new gw(t.firestore,t instanceof vw?t._converter:null,new qd(n))}function ww(t,e){return t=Object(ec.h)(t),e=Object(ec.h)(e),(t instanceof gw||t instanceof vw)&&(e instanceof gw||e instanceof vw)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Ew(t,e){return t=Object(ec.h)(t),e=Object(ec.h)(e),t instanceof yw&&e instanceof yw&&t.firestore===e.firestore&&Rp(t._query,e._query)&&t._converter===e._converter}var Sw=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new rb(this,"async_queue_retry"),this.Ec=function(){var e=eb();e&&ud("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=eb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=eb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise((function(t){})):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.dc.push(t),e.Ac()}))},t.prototype.Ac=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ku.d)(this,(function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Zg(t=n.sent()))throw t;return ud("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji((function(){return e.Ac()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ic=function(t){var e=this,n=this.fc.then((function(){return e.yc=!0,t().catch((function(t){throw e.mc=t,e.yc=!1,cd("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.yc=!1,t}))}));return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Db.createAndSchedule(this,t,e,n,(function(t){return r.Rc(t)}));return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&fd()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t;return Object(ku.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then((function(){e._c.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()}))},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Tw(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Gg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Ow=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Sw,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(ku.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Cw(this),this._firestoreClient.terminate()},e}(mw);function Iw(t){return t._firestoreClient||Cw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Cw(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new J_(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new q_(t._credentials,t._queue,r)}function xw(t,e,n){var r=this,i=new Gg;return t.asyncQueue.enqueue((function(){return Object(ku.b)(r,void 0,void 0,(function(){var r;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,V_(t,n)];case 1:return o.sent(),[4,B_(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===id.FAILED_PRECONDITION||t.code===id.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function kw(t){if(t._initialized||t._terminated)throw new od(id.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Aw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new od(id.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xd(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),jw=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Ad.fromBase64String(e))}catch(e){throw new od(id.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Ad.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Nw=function(t){this._methodName=t},Rw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new od(id.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new od(id.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return yd(this._lat,t._lat)||yd(this._long,t._long)},t}(),Pw=/^__.*__$/,Dw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new hm(t,this.data,this.fieldMask,e,this.fieldTransforms):new lm(t,this.data,e,this.fieldTransforms)},t}(),Lw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new hm(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Fw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fd()}}var Mw=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return iE(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(Fw(this.Dc)&&Pw.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),Uw=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||nb(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new Mw({Dc:t,methodName:e,Lc:n,path:xd.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function qw(t){var e=t._freezeSettings(),n=nb(t._databaseId);return new Uw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vw(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);tE("Data must be an object, but it was:",s,r);var a,u,c=Jw(r,s);if(o.merge)a=new kd(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=eE(e,f[h],n);if(!s.contains(d))throw new od(id.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");oE(l,d)||l.push(d)}a=new kd(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Dw(new Zd(c),a,u)}var Bw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ku.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Nw);function zw(t,e,n){return new Mw({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Hw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ku.c)(e,t),e.prototype._toFieldTransform=function(t){return new tm(t.path,new Kp)},e.prototype.isEqual=function(t){return t instanceof e},e}(Nw),Qw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(ku.c)(e,t),e.prototype._toFieldTransform=function(t){var e=zw(this,t,!0),n=this.qc.map((function(t){return Yw(t,e)})),r=new Gp(n);return new tm(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Nw),Kw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(ku.c)(e,t),e.prototype._toFieldTransform=function(t){var e=zw(this,t,!0),n=this.qc.map((function(t){return Yw(t,e)})),r=new Wp(n);return new tm(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Nw),Gw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(ku.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Yp(t.R,Vp(t.R,this.Uc));return new tm(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Nw);function $w(t,e,n,r){var i=t.Bc(1,e,n);tE("Data must be an object, but it was:",i,r);var o=[],s=Zd.empty();Sd(r,(function(t,r){var a=rE(e,t,n);r=Object(ec.h)(r);var u=i.kc(a);if(r instanceof Bw)o.push(a);else{var c=Yw(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new kd(o);return new Lw(s,a,i.fieldTransforms)}function Ww(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[eE(e,r,n)],u=[i];if(o.length%2!=0)throw new od(id.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(eE(e,o[c])),u.push(o[c+1]);for(var l=[],h=Zd.empty(),f=a.length-1;f>=0;--f)if(!oE(l,a[f])){var d=a[f],p=u[f];p=Object(ec.h)(p);var m=s.kc(d);if(p instanceof Bw)l.push(d);else{var g=Yw(p,m);null!=g&&(l.push(d),h.set(d,g))}}var y=new kd(l);return new Lw(h,y,s.fieldTransforms)}function Xw(t,e,n,r){return void 0===r&&(r=!1),Yw(n,t.Bc(r?4:3,e))}function Yw(t,e){if(Zw(t=Object(ec.h)(t)))return tE("Unsupported field value:",e,t),Jw(t,e);if(t instanceof Nw)return function(t,e){if(!Fw(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Yw(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(ec.h)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Vp(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=_d.fromDate(t);return{timestampValue:Wm(e.R,n)}}if(t instanceof _d)return n=new _d(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Wm(e.R,n)};if(t instanceof Rw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jw)return{bytesValue:Xm(e.R,t._byteString)};if(t instanceof gw){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Zm(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+hw(t))}(t,e)}function Jw(t,e){var n={};return Td(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sd(t,(function(t,r){var i=Yw(r,e.Nc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Zw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _d||t instanceof Rw||t instanceof jw||t instanceof gw||t instanceof Nw)}function tE(t,e,n){if(!Zw(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=hw(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function eE(t,e,n){if((e=Object(ec.h)(e))instanceof Aw)return e._internalPath;if("string"==typeof e)return rE(t,e);throw iE("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var nE=new RegExp("[~\\*/\\[\\]]");function rE(t,e,n){if(e.search(nE)>=0)throw iE("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Aw.bind.apply(Aw,Object(ku.f)([void 0],e.split(".")))))._internalPath}catch(r){throw iE("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function iE(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new od(id.INVALID_ARGUMENT,(a+=". ")+t+u)}function oE(t,e){return t.some((function(t){return t.isEqual(e)}))}var sE=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gw(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new aE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(uE("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),aE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ku.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(sE);function uE(t,e){return"string"==typeof e?rE(t,e):e instanceof Aw?e._internalPath:e._delegate._internalPath}var cE=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),lE=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(ku.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new hE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(uE("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(sE),hE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ku.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(lE),fE=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new cE(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new hE(n._firestore,n._userDataWriter,r.key,r,new cE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new od(id.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new hE(t._firestore,t._userDataWriter,e.doc.key,e.doc,new cE(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new hE(t._firestore,t._userDataWriter,e.doc.key,e.doc,new cE(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:dE(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function dE(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fd()}}function pE(t,e){return t instanceof lE&&e instanceof lE?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof fE&&e instanceof fE&&t._firestore===e._firestore&&Ew(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function mE(t){if(Ip(t)&&0===t.explicitOrderBy.length)throw new od(id.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gE=function(){};function yE(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var vE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(ku.c)(e,t),e.prototype._apply=function(t){var e=qw(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new od(id.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){OE(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(TE(r,t,l[c]));a={arrayValue:{values:u}}}else a=TE(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||OE(s,o),a=Xw(n,"where",s,"in"===o||"not-in"===o);var h=ap.create(i,o,a);return function(t,e){if(e.g()){var n=xp(t);if(null!==n&&!n.isEqual(e.field))throw new od(id.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Cp(t);null!==r&&IE(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new od(id.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new yw(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(gE),bE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(ku.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new od(id.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new od(id.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vp(e,n);return function(t,e){if(null===Cp(t)){var n=xp(t);null!==n&&IE(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new yw(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ep(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(gE),_E=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(ku.c)(e,t),e.prototype._apply=function(t){return new yw(t.firestore,t._converter,Np(t._query,this.Gc,this.zc))},e}(gE),wE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(ku.c)(e,t),e.prototype._apply=function(t){var e=SE(t,this.type,this.Hc,this.Jc);return new yw(t.firestore,t._converter,function(t,e){return new Ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(gE),EE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(ku.c)(e,t),e.prototype._apply=function(t){var e=SE(t,this.type,this.Hc,this.Jc);return new yw(t.firestore,t._converter,function(t,e){return new Ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(gE);function SE(t,e,n,r){if(n[0]=Object(ec.h)(n[0]),n[0]instanceof sE)return function(t,e,n,r,i){if(!r)throw new od(id.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ap(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Gd(e,r.key));else{var c=r.data.field(u.field);if(Dd(c))throw new od(id.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new od(id.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new gp(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=qw(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new od(id.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new od(id.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!kp(t)&&-1!==c.indexOf("/"))throw new od(id.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Id.fromString(c));if(!qd.isDocumentKey(l))throw new od(id.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new qd(l);a.push(Gd(e,h))}else{var f=Xw(n,r,c);a.push(f)}}return new gp(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function TE(t,e,n){if("string"==typeof(n=Object(ec.h)(n))){if(""===n)throw new od(id.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!kp(e)&&-1!==n.indexOf("/"))throw new od(id.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Id.fromString(n));if(!qd.isDocumentKey(r))throw new od(id.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Gd(t,new qd(r))}if(n instanceof gw)return Gd(t,n._key);throw new od(id.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+hw(n)+".")}function OE(t,e){if(!Array.isArray(t)||0===t.length)throw new od(id.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new od(id.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function IE(t,e,n){if(!n.isEqual(e))throw new od(id.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var CE=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Vd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rd(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Pd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw fd()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Sd(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Rw(Rd(t.latitude),Rd(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Dd(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ld(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Nd(t);return new _d(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Id.fromString(t);dd(Sg(n));var r=new Z_(n.get(1),n.get(3)),i=new qd(n.popFirst(5));return r.isEqual(e)||cd("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function xE(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var kE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ku.c)(e,t),e.prototype.convertBytes=function(t){return new jw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gw(this.firestore,null,e)},e}(CE),AE=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=qw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=jE(t,this._firestore),i=xE(r._converter,e,n),o=Vw(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,nm.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=jE(t,this._firestore);return o="string"==typeof(e=Object(ec.h)(e))||e instanceof Aw?Ww(this._dataReader,"WriteBatch.update",s._key,e,n,r):$w(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,nm.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=jE(t,this._firestore);return this._mutations=this._mutations.concat(new ym(e._key,nm.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new od(id.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function jE(t,e){if((t=Object(ec.h)(t)).firestore!==e)throw new od(id.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var NE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ku.c)(e,t),e.prototype.convertBytes=function(t){return new jw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gw(this.firestore,null,e)},e}(CE);function RE(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=fw(t,gw);var o=fw(t.firestore,Ow),s=qw(o);return DE(o,[("string"==typeof(e=Object(ec.h)(e))||e instanceof Aw?Ww(s,"updateDoc",t._key,e,n,r):$w(s,"updateDoc",t._key,e)).toMutation(t._key,nm.exists(!0))])}function PE(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(ec.h)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Tw(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Tw(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof gw)c=fw(t.firestore,Ow),l=Tp(t._key.path),u={next:function(e){i[a]&&i[a](LE(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=fw(t,yw);c=fw(d.firestore,Ow),l=d._query;var p=new NE(c);u={next:function(t){i[a]&&i[a](new fE(c,p,d,t))},error:i[a+1],complete:i[a+2]},mE(t._query)}return function(t,e,n,r){var i=this,o=new F_(r),s=new Gb(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(i,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return e=Bb,[4,W_(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(i,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return e=zb,[4,W_(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Iw(c),l,h,u)}function DE(t,e){return function(t,e){var n=this,r=new Gg;return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(n,void 0,void 0,(function(){var n;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return n=o_,[4,$_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Iw(t),e)}function LE(t,e,n){var r=n.docs.get(e._key),i=new NE(t);return new lE(t,i,e._key,r,new cE(n.hasPendingWrites,n.fromCache),e._converter)}var FE=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(ku.c)(e,t),e.prototype.get=function(e){var n=this,r=jE(e,this._firestore),i=new NE(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new lE(n._firestore,i,r._key,t._document,new cE(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=qw(t)}return t.prototype.get=function(t){var e=this,n=jE(t,this._firestore),r=new kE(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return fd();var i=t[0];if(i.isFoundDocument())return new sE(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new sE(e._firestore,r,n._key,null,n._converter);throw fd()}))},t.prototype.set=function(t,e,n){var r=jE(t,this._firestore),i=xE(r._converter,e,n),o=Vw(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=jE(t,this._firestore);return o="string"==typeof(e=Object(ec.h)(e))||e instanceof Aw?Ww(this._dataReader,"Transaction.update",s._key,e,n,r):$w(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=jE(t,this._firestore);return this._transaction.delete(e._key),this},t}());function ME(){if("undefined"==typeof Uint8Array)throw new od(id.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function UE(){if("undefined"==typeof atob)throw new od(id.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var qE=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return UE(),new t(jw.fromBase64String(e))},t.fromUint8Array=function(e){return ME(),new t(jw.fromUint8Array(e))},t.prototype.toBase64=function(){return UE(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ME(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),VE=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){kw(t=fw(t,Ow));var n=Iw(t),r=t._freezeSettings(),i=new L_;return xw(n,i,new P_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){kw(t=fw(t,Ow));var e=Iw(t),n=t._freezeSettings(),r=new L_;return xw(e,r,new D_(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new od(id.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Gg;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(ku.b)(e,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(ku.b)(this,void 0,void 0,(function(){return Object(ku.d)(this,(function(e){switch(e.label){case 0:return Xg.yt()?[4,Xg.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(av(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),BE=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Z_||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=fw(t,mw))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&ld("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(ku.b)(e,void 0,void 0,(function(){var e,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return[4,Q_(t)];case 1:return e=r.sent(),[4,G_(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=pd(t);return e.$r.delete(0),lb(e)}(n))]}}))}))}))}(Iw(fw(this._delegate,Ow)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(ku.b)(e,void 0,void 0,(function(){var e,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return[4,Q_(t)];case 1:return e=r.sent(),[4,G_(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return(e=pd(t)).$r.add(0),[4,hb(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Iw(fw(this._delegate,Ow)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&uw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Gg;return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(e,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return e=h_,[4,$_(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Iw(fw(this._delegate,Ow)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new F_(e);return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(n,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){pd(t).Gr.add(e),e.next()},[4,W_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(n,void 0,void 0,(function(){var e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){pd(t).Gr.delete(e)},[4,W_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Iw(t=fw(t,Ow)),Tw(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new od(id.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new nS(this,bw(this._delegate,t))}catch(t){throw $E(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new GE(this,_w(this._delegate,t))}catch(t){throw $E(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new ZE(this,function(t,e){if(t=fw(t,mw),sw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new od(id.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new yw(t,null,function(t){return new Ep(Id.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw $E(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Gg;return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(n,void 0,void 0,(function(){var n;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return H_(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new U_(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Iw(t),(function(n){return e(new FE(t,n))}))}(this._delegate,(function(n){return t(new HE(e,n))}))},t.prototype.batch=function(){var t=this;return Iw(this._delegate),new QE(new AE(this._delegate,(function(e){return DE(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new od(id.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new od(id.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),zE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ku.c)(e,t),e.prototype.convertBytes=function(t){return new qE(new jw(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return GE.Zc(e,this.firestore,null)},e}(CE),HE=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new zE(t)}return t.prototype.get=function(t){var e=this,n=rS(t);return this._delegate.get(n).then((function(t){return new YE(e._firestore,new lE(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=rS(t);return n?(aw("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=rS(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ku.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=rS(t);return this._delegate.delete(e),this},t}(),QE=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=rS(t);return n?(aw("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=rS(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ku.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=rS(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),KE=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new hE(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new JE(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new zE(e),n),i.set(n,o)),o},t}();KE.eu=new WeakMap;var GE=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new zE(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new od(id.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new gw(n._delegate,r,new qd(e)))},t.Zc=function(e,n,r){return new t(n,new gw(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nS(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new nS(this.firestore,bw(this._delegate,t))}catch(t){throw $E(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(ec.h)(t))instanceof gw&&ww(this._delegate,t)},t.prototype.set=function(t,e){e=aw("DocumentReference.set",e);try{return function(t,e,n){t=fw(t,gw);var r=fw(t.firestore,Ow),i=xE(t._converter,e,n);return DE(r,[Vw(qw(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,nm.none())])}(this._delegate,t,e)}catch(t){throw $E(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?RE(this._delegate,t):RE.apply(void 0,Object(ku.f)([this._delegate,t,e],n))}catch(t){throw $E(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return DE(fw((t=this._delegate).firestore,Ow),[new ym(t._key,nm.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=WE(e),i=XE(e,(function(e){return new YE(t.firestore,new lE(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return PE(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=fw(t,gw);var e=fw(t.firestore,Ow),n=Iw(e),r=new NE(e);return function(t,e){var n=this,r=new Gg;return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(n,void 0,void 0,(function(){var n;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=pd(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new od(id.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Lb(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,K_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new lE(e,r,t._key,n,new cE(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=fw(t,gw);var e=fw(t.firestore,Ow);return X_(Iw(e),t._key,{source:"server"}).then((function(n){return LE(e,t,n)}))}(this._delegate):function(t){t=fw(t,gw);var e=fw(t.firestore,Ow);return X_(Iw(e),t._key).then((function(n){return LE(e,t,n)}))}(this._delegate)).then((function(t){return new YE(e.firestore,new lE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?KE.tu(this.firestore,e):null))},t}();function $E(t,e,n){return t.message=t.message.replace(e,n),t}function WE(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Tw(r))return r}return{}}function XE(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Tw(t[0])?t[0]:Tw(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var YE=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new GE(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return pE(this._delegate,t._delegate)},t}(),JE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ku.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(YE),ZE=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new zE(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,yE(this._delegate,function(t,e,n){var r=e,i=uE("where",t);return new vE(i,r,n)}(e,n,r)))}catch(e){throw $E(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,yE(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=uE("orderBy",t);return new bE(r,n)}(e,n)))}catch(e){throw $E(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,yE(this._delegate,function(t){return dw("limit",t),new _E("limit",t,"F")}(e)))}catch(e){throw $E(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,yE(this._delegate,function(t){return dw("limitToLast",t),new _E("limitToLast",t,"L")}(e)))}catch(e){throw $E(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yE(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wE("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw $E(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yE(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wE("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw $E(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yE(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new EE("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw $E(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yE(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new EE("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw $E(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ew(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=fw(t,yw);var e=fw(t.firestore,Ow),n=Iw(e),r=new NE(e);return function(t,e){var n=this,r=new Gg;return t.asyncQueue.enqueueAndForget((function(){return Object(ku.b)(n,void 0,void 0,(function(){var n;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ku.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(ku.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Ev(t,e,!0)];case 1:return a=u.sent(),r=new Jb(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Lb(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,K_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new fE(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=fw(t,yw);var e=fw(t.firestore,Ow),n=Iw(e),r=new NE(e);return Y_(n,t._query,{source:"server"}).then((function(n){return new fE(e,r,t,n)}))}(this._delegate):function(t){t=fw(t,yw);var e=fw(t.firestore,Ow),n=Iw(e),r=new NE(e);return mE(t._query),Y_(n,t._query).then((function(n){return new fE(e,r,t,n)}))}(this._delegate)).then((function(t){return new eS(e.firestore,new fE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=WE(e),i=XE(e,(function(e){return new eS(t.firestore,new fE(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return PE(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?KE.tu(this.firestore,e):null))},t}(),tS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new JE(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),eS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new ZE(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new JE(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new tS(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new JE(n._firestore,r))}))},t.prototype.isEqual=function(t){return pE(this._delegate,t._delegate)},t}(),nS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(ku.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new GE(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new GE(this.firestore,void 0===t?_w(this._delegate):_w(this._delegate,t))}catch(t){throw $E(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=fw(t.firestore,Ow),r=_w(t),i=xE(t._converter,e);return DE(n,[Vw(qw(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,nm.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new GE(e.firestore,t)}))},e.prototype.isEqual=function(t){return ww(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?KE.tu(this.firestore,t):null))},e}(ZE);function rS(t){return fw(t,gw)}var iS,oS=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Aw.bind.apply(Aw,Object(ku.f)([void 0],t)))}return t.documentId=function(){return new t(xd.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(ec.h)(t))instanceof Aw&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),sS=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Hw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Bw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qw("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kw("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Gw("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),aS=n("/6Yf"),uS={Firestore:BE,GeoPoint:Rw,Timestamp:_d,Blob:qE,Transaction:HE,WriteBatch:QE,DocumentReference:GE,DocumentSnapshot:YE,Query:ZE,QueryDocumentSnapshot:JE,QuerySnapshot:eS,CollectionReference:nS,FieldPath:oS,FieldValue:sS,setLogLevel:function(t){sd.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function cS(t,e){return function(t,e=wo.b){return new qt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function lS(t,e){return cS(t,e).pipe(Object(Wt.a)(t=>({payload:t,type:"query"})))}function hS(t,e){return lS(t,e).pipe(we(void 0),Wu(),Object(Wt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function fS(t,e,n){return hS(t,n).pipe(Ee((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return dS(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return dS(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dS(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Ju(void 0,void 0)),Object(Wt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function dS(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function pS(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new aS.a("firestore",(function(t){return function(t,e){return new BE(t,new Ow(t,e),new VE)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},uS)))})(iS=tc.a),iS.registerVersion("@firebase/firestore","2.2.5");class mS{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=hS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Wt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(we(void 0),Wu(),Jt(([t,e])=>e.length>0||!t),Object(Wt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ee((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=pS(t);return fS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return lS(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Wt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(At.a)(this.query.get(t)).pipe(Object(Nu.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new gS(this.ref.doc(t),this.afs)}}class gS{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=ES(n,e);return new mS(r,i,this.afs)}snapshotChanges(){return cS(this.ref,this.afs.schedulers.outsideAngular).pipe(we(void 0),Wu(),Object(Wt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Wt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(At.a)(this.ref.get(t)).pipe(Object(Nu.b)(this.afs.schedulers.insideAngular))}}class yS{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?hS(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Wt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Jt(t=>t.length>0),this.afs.keepUnstableUntilFirst):hS(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ee((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=pS(t);return fS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return lS(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Wt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(At.a)(this.query.get(t)).pipe(Object(Nu.b)(this.afs.schedulers.insideAngular))}}const vS=new r.q("angularfire2.enableFirestorePersistence"),bS=new r.q("angularfire2.firestore.persistenceSettings"),_S=new r.q("angularfire2.firestore.settings"),wS=new r.q("angularfire2.firestore.use-emulator");function ES(t,e=(t=>t)){return{query:e(t),ref:t}}let SS=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new qu.d(o),this.keepUnstableUntilFirst=Object(qu.h)(this.schedulers);const c=Object(qu.g)(t,o,e);!Au.a.auth&&u&&Object(qu.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(qu.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!H(i)){const e=()=>{try{return Object(At.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(iS){return"undefined"!=typeof console&&console.warn(iS),Object(kt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(kt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=ES(n,e),o=this.schedulers.ngZone.run(()=>r);return new mS(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new yS(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new gS(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(qu.c),r.Qb(qu.b,8),r.Qb(vS,8),r.Qb(_S,8),r.Qb(r.B),r.Qb(r.z),r.Qb(bS,8),r.Qb(wS,8),r.Qb(Vu,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Qb)(qu.c),Object(r.Qb)(qu.b,8),Object(r.Qb)(vS,8),Object(r.Qb)(_S,8),Object(r.Qb)(r.B),Object(r.Qb)(r.z),Object(r.Qb)(bS,8),Object(r.Qb)(wS,8),Object(r.Qb)(Vu,8))},token:t,providedIn:"any"}),t})(),TS=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:vS,useValue:!0},{provide:bS,useValue:e}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[SS]}),t})(),OS=(()=>{class t{constructor(t,e,n){this.afAuth=t,this.afs=e,this.router=n,this.user$=this.afAuth.authState.pipe(pe(t=>t?this.afs.doc("users/"+t.uid).valueChanges():Object(kt.a)(null)))}googleSignIn(){return Object(ku.b)(this,void 0,void 0,(function*(){const t=new Au.a.auth.GoogleAuthProvider,e=yield this.afAuth.signInWithPopup(t);return this.updateUserData(e.user)}))}signOut(){return Object(ku.b)(this,void 0,void 0,(function*(){yield this.afAuth.signOut(),this.router.navigate(["/"])}))}updateUserData(t){return this.afs.doc("users/"+t.uid).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,product:"Guitar"},{merge:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Gu),r.Qb(SS),r.Qb(Zr))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function IS(t,e){1&t&&r.Kb(0,"div")}function CS(t,e){if(1&t){const t=r.Nb();r.Mb(0,"h3"),r.mc(1,"Howdy, GUEST"),r.Lb(),r.Mb(2,"p"),r.mc(3,"Login to to save search results, like products & more!"),r.Lb(),r.Mb(4,"button",3),r.Tb("click",(function(){return r.gc(t),r.Xb().auth.googleSignIn()})),r.Mb(5,"span"),r.Kb(6,"img",4),r.Lb(),r.Mb(7,"span"),r.mc(8,"Login with Google"),r.Lb(),r.Lb()}}function xS(t,e){if(1&t){const t=r.Nb();r.Mb(0,"div"),r.Mb(1,"div",6),r.Mb(2,"div",7),r.Kb(3,"img",8),r.Mb(4,"div",9),r.Mb(5,"h3"),r.mc(6),r.Lb(),r.Mb(7,"button",10),r.Tb("click",(function(){return r.gc(t),r.Xb(2).auth.signOut()})),r.mc(8,"Logout"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(9,"div",11),r.Mb(10,"div",12),r.Mb(11,"div",13),r.Mb(12,"h4"),r.mc(13,"Edit Account Info"),r.Lb(),r.Lb(),r.Mb(14,"div",13),r.Mb(15,"h4"),r.mc(16,"Liked Products"),r.Lb(),r.Lb(),r.Mb(17,"div",13),r.Mb(18,"h4"),r.mc(19,"Saved Searches"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&t){const t=e.ngIf;r.zb(3),r.cc("src",t.photoURL,r.hc),r.zb(3),r.oc("Howdy, ",t.displayName,"")}}function kS(t,e){if(1&t&&(r.kc(0,xS,20,2,"div",5),r.Yb(1,"async")),2&t){const t=r.Xb();r.cc("ngIf",r.Zb(1,1,t.auth.user$))}}const AS=[{path:"",component:Ou},{path:"browse",component:xu},{path:"account",component:(()=>{class t{constructor(t){this.auth=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(OS))},t.\u0275cmp=r.Db({type:t,selectors:[["app-account"]],decls:6,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["guest",""],["authenticated",""],[1,"login_button",3,"click"],["width","20px","alt","Google sign-in","src","https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png",2,"margin-top","7px","margin-right","8px"],[4,"ngIf"],[1,"top"],[1,"wrapper"],[1,"profile_pic",3,"src"],[1,"profile_info"],[3,"click"],[1,"bottom"],[1,"settings"],[1,"card"]],template:function(t,e){if(1&t&&(r.kc(0,IS,1,0,"div",0),r.Yb(1,"async"),r.kc(2,CS,9,0,"ng-template",null,1,r.lc),r.kc(4,kS,2,3,"ng-template",null,2,r.lc)),2&t){const t=r.fc(3),n=r.fc(5);r.cc("ngIf",r.Zb(1,3,e.auth.user$))("ngIfThen",n)("ngIfElse",t)}},directives:[R],pipes:[V],styles:[".top[_ngcontent-%COMP%]{display:block}.top[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex}.top[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile_pic[_ngcontent-%COMP%]{border-radius:50%;margin-right:30px}.top[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile_info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:5px}.top[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile_info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:#fff;color:#bf616a}.bottom[_ngcontent-%COMP%]{display:block;margin-top:20px;margin-bottom:60px}.bottom[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(19rem,1fr));grid-gap:1rem}.bottom[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-style:solid;border-radius:12px;border-width:0;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);padding:2rem}.bottom[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.login_button[_ngcontent-%COMP%]{display:flex;align-items:center;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);border:none;background-color:#fff}.login_button[_ngcontent-%COMP%]   left[_ngcontent-%COMP%]{float:left}"]}),t})()}];let jS=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[fi.forRoot(AS)],fi]}),t})(),NS=(()=>{class t{constructor(){this.title="Present",this.selectedMenu=0}updateMenu(t){this.selectedMenu=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-root"]],decls:22,vars:6,consts:[["href","https://fonts.googleapis.com/icon?family=Material+Icons","rel","stylesheet"],["src","../assets/logo.png"],[1,"bottom_menu"],["href","#","routerLink","/",1,"nav__link",3,"click"],[1,"material-icons","nav__icon"],[1,"nav__text"],["href","#","routerLink","/browse",1,"nav__link",3,"click"],["href","#","routerLink","/account",1,"nav__link",3,"click"],[1,"container"]],template:function(t,e){1&t&&(r.Kb(0,"link",0),r.Mb(1,"header"),r.Kb(2,"img",1),r.Lb(),r.Mb(3,"div",2),r.Mb(4,"nav"),r.Mb(5,"a",3),r.Tb("click",(function(){return e.updateMenu(0)})),r.Mb(6,"span",4),r.mc(7,"search"),r.Lb(),r.Mb(8,"span",5),r.mc(9,"Search"),r.Lb(),r.Lb(),r.Mb(10,"a",6),r.Tb("click",(function(){return e.updateMenu(1)})),r.Mb(11,"span",4),r.mc(12,"trending_up"),r.Lb(),r.Mb(13,"span",5),r.mc(14,"Browse"),r.Lb(),r.Lb(),r.Mb(15,"a",7),r.Tb("click",(function(){return e.updateMenu(2)})),r.Mb(16,"span",4),r.mc(17,"account_circle"),r.Lb(),r.Mb(18,"span",5),r.mc(19,"Account"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(20,"div",8),r.Kb(21,"router-outlet"),r.Lb()),2&t&&(r.zb(5),r.jc("color",0==e.selectedMenu?"#6B83BB":"white"),r.zb(5),r.jc("color",1==e.selectedMenu?"#6B83BB":"white"),r.zb(5),r.jc("color",2==e.selectedMenu?"#6B83BB":"white"))},directives:[ti,ni],styles:[".container[_ngcontent-%COMP%]{justify-content:center;margin:auto}"]}),t})();var RS=n("z6cu"),PS=n("KqfI");const DS=new qt.a(PS.a);var LS=n("oB13"),FS=n("WMd4");class MS{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new US(t,this.delay,this.scheduler))}}class US extends Lt.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(US.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new qS(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(FS.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(FS.a.createComplete()),this.unsubscribe()}}class qS{constructor(t,e){this.time=t,this.notification=e}}const VS="Service workers are disabled or not supported by this browser";class BS{constructor(t){if(this.serviceWorker=t,t){const e=lu(t,"controllerchange").pipe(Object(Wt.a)(()=>t.controller)),n=_e($t(()=>Object(kt.a)(t.controller)),e);this.worker=n.pipe(Jt(t=>!!t)),this.registration=this.worker.pipe(pe(()=>t.getRegistration()));const r=lu(t,"message").pipe(Object(Wt.a)(t=>t.data)).pipe(Jt(t=>t&&t.type)).pipe(Object(LS.a)(new jt.a));r.connect(),this.events=r}else this.worker=this.events=this.registration=$t(()=>Object(RS.a)(new Error("Service workers are disabled or not supported by this browser")))}postMessage(t,e){return this.worker.pipe(ye(1),Object(je.a)(n=>{n.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithStatus(t,e,n){const r=this.waitForStatus(n),i=this.postMessage(t,e);return Promise.all([r,i]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){return this.events.pipe(Jt(e=>e.type===t))}nextEventOfType(t){return this.eventsOfType(t).pipe(ye(1))}waitForStatus(t){return this.eventsOfType("STATUS").pipe(Jt(e=>e.nonce===t),ye(1),Object(Wt.a)(t=>{if(!t.status)throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let zS=(()=>{class t{constructor(t){if(this.sw=t,this.subscriptionChanges=new jt.a,!t.isEnabled)return this.messages=DS,this.notificationClicks=DS,void(this.subscription=DS);this.messages=this.sw.eventsOfType("PUSH").pipe(Object(Wt.a)(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Object(Wt.a)(t=>t.data)),this.pushManager=this.sw.registration.pipe(Object(Wt.a)(t=>t.pushManager));const e=this.pushManager.pipe(pe(t=>t.getSubscription()));this.subscription=Object(ju.a)(e,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(VS));const e={userVisibleOnly:!0};let n=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return e.applicationServerKey=r,this.pushManager.pipe(pe(t=>t.subscribe(e)),ye(1)).toPromise().then(t=>(this.subscriptionChanges.next(t),t))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ye(1),pe(t=>{if(null===t)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then(t=>{if(!t)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(VS))}decodeBase64(t){return atob(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(BS))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),HS=(()=>{class t{constructor(t){if(this.sw=t,!t.isEnabled)return this.available=DS,void(this.activated=DS);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(VS));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(VS));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:t},t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(BS))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class QS{}const KS=new r.q("NGSW_REGISTER_SCRIPT");function GS(t,e,n,i){return()=>{if(!z(i)||!("serviceWorker"in navigator)||!1===n.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)o=n.registrationStrategy();else{const[e,...r]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(e){case"registerImmediately":o=Object(kt.a)(null);break;case"registerWithDelay":o=$S(+r[0]||0);break;case"registerWhenStable":o=r[0]?Object(ju.a)(WS(t),$S(+r[0])):WS(t);break;default:throw new Error("Unknown ServiceWorker registration strategy: "+n.registrationStrategy)}}t.get(r.z).runOutsideAngular(()=>o.pipe(ye(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(t=>console.error("Service worker registration failed with:",t))))}}function $S(t){return Object(kt.a)(null).pipe(function(t,e=wo.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new MS(r,e))}(t))}function WS(t){return t.get(r.g).isStable.pipe(Jt(t=>t))}function XS(t,e){return new BS(z(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let YS=(()=>{class t{static register(e,n={}){return{ngModule:t,providers:[{provide:KS,useValue:e},{provide:QS,useValue:n},{provide:BS,useFactory:XS,deps:[QS,r.B]},{provide:r.d,useFactory:GS,deps:[r.r,KS,QS,r.B],multi:!0}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[zS,HS]}),t})(),JS=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[uu,su],su]}),t})();var ZS="firebasestorage.googleapis.com",tT=function(t){function e(n,r){var i=t.call(this,eT(n),"Firebase Storage: "+r+" ("+eT(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(ku.c)(e,t),e.prototype._codeEquals=function(t){return eT(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(ec.c);function eT(t){return"storage/"+t}function nT(){return new tT("unknown","An unknown error occurred, please check the error payload for server response.")}function rT(){return new tT("canceled","User canceled the upload/download.")}function iT(){return new tT("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function oT(t){return new tT("invalid-argument",t)}function sT(){return new tT("app-deleted","The Firebase app was deleted.")}function aT(t){return new tT("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uT(t,e){return new tT("invalid-format","String does not match format '"+t+"': "+e)}function cT(t){throw new tT("internal-error","Internal error: "+t)}var lT={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},hT=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function fT(t,e){switch(t){case lT.RAW:return new hT(dT(e));case lT.BASE64:case lT.BASE64URL:return new hT(pT(t,e));case lT.DATA_URL:return new hT((n=new mT(e)).base64?pT(lT.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(iS){throw uT(lT.DATA_URL,"Malformed data URL.")}return dT(e)}(n.rest),new mT(e).contentType)}var n;throw nT()}function dT(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function pT(t,e){switch(t){case lT.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw uT(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case lT.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw uT(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(iS){throw uT(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var mT=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw uT(lT.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),gT={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yT(t){switch(t){case"running":case"pausing":case"canceling":return gT.RUNNING;case"paused":return gT.PAUSED;case"success":return gT.SUCCESS;case"canceled":return gT.CANCELED;case"error":default:return gT.ERROR}}var vT=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),bT=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=vT.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=vT.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=vT.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw cT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw cT("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw cT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(iS){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw cT("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),_T=function(){function t(){}return t.prototype.createXhrIo=function(){return new bT},t}(),wT=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(iS){return new t(e,"")}if(""===r.path)return r;throw new tT("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===ZS?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new tT("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),ET=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function ST(t){return"string"==typeof t||t instanceof String}function TT(t){return OT()&&t instanceof Blob}function OT(){return"undefined"!=typeof Blob}function IT(t,e,n,r){if(r<e)throw oT("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw oT("Invalid value for '"+t+"'. Expected "+n+" or less.")}function CT(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function xT(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var kT=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(iS){o(iS)}else null!==s?((r=nT()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?sT():rT():new tT("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new AT(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new AT(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===vT.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new AT(s,n))}else{var a=n.getErrorCode()===vT.ABORT;e(!1,new AT(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(ku.f)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(ku.f)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),AT=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function jT(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function NT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=jT();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(OT())return new Blob(t);throw new tT("unsupported-environment","This browser doesn't seem to support creating Blobs")}var RT=function(){function t(t,e){var n=0,r="";TT(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(TT(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(OT()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(NT.apply(null,r))}var i=e.map((function(t){return ST(t)?fT(lT.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function PT(t){var e,n;try{e=JSON.parse(t)}catch(iS){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function DT(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function LT(t,e){return e}var FT=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||LT}}(),MT=null;function UT(){if(MT)return MT;var t=[];t.push(new FT("bucket")),t.push(new FT("generation")),t.push(new FT("metageneration")),t.push(new FT("name","fullPath",!0));var e=new FT("name");e.xform=function(t,e){return function(t){return!ST(t)||t.length<2?t:DT(t)}(e)},t.push(e);var n=new FT("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new FT("timeCreated")),t.push(new FT("updated")),t.push(new FT("md5Hash",null,!0)),t.push(new FT("cacheControl",null,!0)),t.push(new FT("contentDisposition",null,!0)),t.push(new FT("contentEncoding",null,!0)),t.push(new FT("contentLanguage",null,!0)),t.push(new FT("contentType",null,!0)),t.push(new FT("metadata","customMetadata",!0)),MT=t}function qT(t,e,n){var r=PT(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new wT(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function VT(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var BT=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function zT(t){if(!t)throw nT()}function HT(t,e){return function(n,r){var i=qT(t,r,e);return zT(null!==i),i}}function QT(t){return function(e,n){var r;return(r=401===e.getStatus()?new tT("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new tT("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new tT("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function KT(t){var e=QT(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new tT("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function GT(t,e,n){var r=CT(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new BT(r,"GET",HT(t,n),i);return o.errorHandler=KT(e),o}function $T(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var WT=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function XT(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(iS){zT(!1)}return zT(!!n&&-1!==(e||["active"]).indexOf(n)),n}var YT=262144,JT=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function ZT(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var tO=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=UT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=$T(e,r,i),a={name:s.fullPath},u=CT(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=VT(s,n),h=new BT(u,"POST",(function(t){var e;XT(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(iS){zT(!1)}return zT(ST(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=QT(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=new BT(n,"POST",(function(t){var e=XT(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(iS){zT(!1)}n||zT(!1);var i=Number(n);return zT(!isNaN(i)),new WT(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=QT(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=YT*this._chunkMultiplier,n=new WT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new WT(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new tT("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw iT();var p=new BT(n,"POST",(function(t,n){var i,s=XT(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?HT(e,o)(t,n):null,new WT(a,c,"final"===s,i)}),e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=QT(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(iS){return t._error=iS,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){YT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=GT(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=$T(e,r,i),c=VT(u,n),l=RT.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw iT();var h={name:u.fullPath},f=CT(o,t.host),d=t.maxUploadRetryTime,p=new BT(f,"POST",HT(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=QT(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=rT(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=yT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new JT(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(yT(this._state)){case gT.SUCCESS:ZT(this._resolve.bind(null,this.snapshot))();break;case gT.CANCELED:case gT.ERROR:ZT(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(yT(this._state)){case gT.RUNNING:case gT.PAUSED:t.next&&ZT(t.next.bind(t,this.snapshot))();break;case gT.SUCCESS:t.complete&&ZT(t.complete.bind(t))();break;case gT.CANCELED:case gT.ERROR:t.error&&ZT(t.error.bind(t,this._error))();break;default:t.error&&ZT(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),eO=function(){function t(t,e){this._service=t,this._location=e instanceof wT?e:wT.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new wT(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return DT(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new wT(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw aT(t)},t}();function nO(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ku.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&IT("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=CT(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new BT(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=PT(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new wT(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new wT(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return zT(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=QT(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function rO(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new wT(t._location.bucket,n);return new eO(t.storage,r)}function iO(t){return/^[A-Za-z]+:\/\//.test(t)}function oO(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:wT.makeFromBucketSpec(n,t)}var sO=function(){function t(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=ZS,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?wT.makeFromBucketSpec(r,this._host):oO(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?wT.makeFromBucketSpec(this._url,t):oO(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){IT("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){IT("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(ku.b)(this,void 0,void 0,(function(){var t,e;return Object(ku.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new eO(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new ET(sT());var r=function(t,e,n,r,i){var o=xT(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new kT(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}();function aO(t,e){return function(t,e){if(e&&iO(e)){if(t instanceof sO)return new eO(t,e);throw oT("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof sO){var r=e;if(null==r._bucket)throw new tT("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new eO(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw oT('`path` param cannot contain ".."');return rO(e,n)}return e}(t,e)}(t=Object(ec.h)(t),e)}var uO,cO,lO=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),hO=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new lO(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new lO(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new lO(t,i,i._ref))}:{next:e.next?function(t){return e.next(new lO(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),fO=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new dO(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new dO(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),dO=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return rO(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new hO(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new tO(t,new RT(e),n)}(t=Object(ec.h)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=lT.RAW),this._throwIfRoot("putString");var r=fT(e,t),i=Object(ku.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new hO(new tO(this._delegate,new RT(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,function(t){var e={prefixes:[],items:[]};return function t(e,n,r){return Object(ku.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ku.d)(this,(function(a){switch(a.label){case 0:return[4,nO(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}(t=Object(ec.h)(t))).then((function(t){return new fO(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return nO(t=Object(ec.h)(t),e)}(this._delegate,t||void 0).then((function(t){return new fO(t,e.storage)}))},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=GT(t.storage,t._location,UT()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t=Object(ec.h)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(ku.b)(this,void 0,void 0,(function(){var n,r;return Object(ku.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=CT(e.fullServerUrl(),t.host),o=VT(n,r),s=t.maxOperationRetryTime,a=new BT(i,"PATCH",HT(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=KT(e),a}(t.storage,t._location,e,UT()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}(t=Object(ec.h)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=CT(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new BT(r,"GET",function(t,e){return function(n,r){var i=qT(t,r,e);return zT(null!==i),function(t,e,n){var r=PT(e);if(null===r)return null;if(!ST(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.fullPath;return CT("/b/"+o(t.bucket)+"/o/"+o(r),n)+xT({alt:"media",token:e})}))[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=KT(e),o}(t.storage,t._location,UT()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new tT("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(t=Object(ec.h)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(ku.b)(this,void 0,void 0,(function(){var e,n;return Object(ku.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=CT(e.fullServerUrl(),t.host),r=new BT(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=KT(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t=Object(ec.h)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw aT(t)},t}(),pO=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(iO(t))throw oT("ref() expected a child path but got a URL, use refFromURL instead.");return new dO(aO(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!iO(t))throw oT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{wT.makeFromUrl(t,this._delegate.host)}catch(iS){throw oT("refFromUrl() expected a valid full URL but got an invalid one.")}return new dO(aO(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function mO(t){const e=function(t){return new qt.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=wo.a){return n=>n.lift(new Eo(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(Wt.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function gO(t,e,n){return{getDownloadURL:()=>Object(kt.a)(void 0).pipe(Object(Nu.b)(e.outsideAngular),pe(()=>t.getDownloadURL()),n),getMetadata:()=>Object(kt.a)(void 0).pipe(Object(Nu.b)(e.outsideAngular),pe(()=>t.getMetadata()),n),delete:()=>Object(At.a)(t.delete()),child:r=>gO(t.child(r),e,n),updateMetadata:e=>Object(At.a)(t.updateMetadata(e)),put:(e,n)=>mO(t.put(e,n)),putString:(e,n,r)=>mO(t.putString(e,n,r)),listAll:()=>Object(At.a)(t.listAll())}}cO={TaskState:gT,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:lT,Storage:sO,Reference:dO},(uO=tc.a).INTERNAL.registerComponent(new aS.a("storage",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new pO(r,new sO(r,i,new _T,n,tc.a.SDK_VERSION))}),"PUBLIC").setServiceProps(cO).setMultipleInstances(!0)),uO.registerVersion("@firebase/storage","0.5.1");const yO=new r.q("angularfire2.storageBucket"),vO=new r.q("angularfire2.storage.maxUploadRetryTime"),bO=new r.q("angularfire2.storage.maxOperationRetryTime");let _O=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new qu.d(i),this.keepUnstableUntilFirst=Object(qu.h)(this.schedulers);const a=Object(qu.g)(t,i,e);this.storage=Object(qu.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return gO(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return gO(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return gO(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(qu.c),r.Qb(qu.b,8),r.Qb(yO,8),r.Qb(r.B),r.Qb(r.z),r.Qb(vO,8),r.Qb(bO,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Qb)(qu.c),Object(r.Qb)(qu.b,8),Object(r.Qb)(yO,8),Object(r.Qb)(r.B),Object(r.Qb)(r.z),Object(r.Qb)(vO,8),Object(r.Qb)(bO,8))},token:t,providedIn:"any"}),t})(),wO=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})(),EO=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[_O],imports:[wO]}),t})();const SO={apiKey:"AIzaSyAbPnjegJyZJDNHdVfhZH1MIw_EvC5dUrU",authDomain:"presentpresenter-c9e38.firebaseapp.com",projectId:"presentpresenter-c9e38",storageBucket:"presentpresenter-c9e38.appspot.com",messagingSenderId:"834840014001",appId:"1:834840014001:web:9c0fe5fc3acb947e260690"};let TO=(()=>{class t extends yt{constructor(){super(...arguments),this.overrides={swipe:{direction:i.DIRECTION_ALL}}}}return t.\u0275fac=function(e){return OO(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const OO=r.Ob(TO);let IO=(()=>{class t{}return t.\u0275mod=r.Hb({type:t,bootstrap:[NS]}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[{provide:mt,useClass:TO}],imports:[[xt,jS,YS.register("ngsw-worker.js",{enabled:!0}),nu,Su,JS,vu,bt,yo,qu.a.initializeApp(SO),TS,$u,EO]]}),t})();Object(r.T)(),It().bootstrapModule(IO).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);